{"version":3,"file":"step-question.js","sourceRoot":"","sources":["../../../../src/components/step-question/step-question.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,aAAa,CAAC;AAChD,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AAQjE,MAAM,OAAO,YAAY;;;;uBAIA,KAAK;2BACD,KAAK;;EAGhC,yBAAyB;IACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IACzB,UAAU,CAAC,GAAG,EAAE;MACd,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC1B,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,oBAAoB;IAC9B,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EAC3B,CAAC;EAED,UAAU;IACR,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;EAC3C,CAAC;EAED,KAAK,CAAC,iBAAiB;IACrB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IACzB,UAAU,CAAC,GAAG,EAAE;MACd,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC1B,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,oBAAoB;IAC7B,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAA;EAEpC,CAAC;EAKD,KAAK,CAAC,cAAc,CAAC,EAAS;IAC5B,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;MACjD,MAAM,QAAQ,GAAG,UAAU,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,uBAAuB;MACvE,MAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,uBAAuB;MACzE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;MAEnB,IAAI,CAAC,MAAM,EAAE;QACX,OAAO,CAAC,wCAAwC;OACjD;MAED,MAAM,OAAO,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC;QAC7C,SAAS,EAAE,aAAa;QACxB,KAAK,EAAE,EAAE;QACT,SAAS,EAAE,QAAQ;QACnB,WAAW,EAAE,IAAI;QACjB,YAAY,EAAE,KAAK;QACnB,QAAQ,EAAE,WAAW;QACrB,QAAQ,EAAE,IAAI;QACd,cAAc,EAAE,EAAE;OACnB,CAAC,CAAC;MAEH,MAAM,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;MAC7D,cAAc,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;MAC5C,cAAc,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;MAE3D,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;MAEpC,8CAA8C;MAE9C,yCAAyC;MACzC,wCAAwC;MACxC,OAAO,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;QAC/B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;MAC/B,CAAC,CAAC,CAAC;MAEH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;MAC5B,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;KACzB;EACH,CAAC;EAED,MAAM;IACJ,MAAM,QAAQ,GAAG,OAAO,CAAC,CAAC,yBAAyB;IACnD,MAAM,QAAQ,GAAG,SAAS,CAAC,CAAC,oBAAoB;IAChD,MAAM,OAAO,GAAG,8PAA8P,CAAA;IAC9Q,MAAM,UAAU,GAAG,aAAa,CAAA;IAEhC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;MACtB,OAAO,CACL,WAAK,KAAK,EAAE,yBAAyB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE;QACnE,WAAK,KAAK,EAAC,wBAAwB;UACjC,WAAK,KAAK,EAAC,kBAAkB,GAAO;UACpC,YAAM,KAAK,EAAE,EAAE,wBAAwB,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAU,CAC5H,CACF,CACP,CAAC;KACH;IAED,OAAO,CACL,WAAK,KAAK,EAAE,yBAAyB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE;MACnE,WAAK,KAAK,EAAC,wBAAwB;QACjC,WAAK,KAAK,EAAC,kBAAkB,GAAO;QACpC,YAAM,KAAK,EAAE,EAAE,wBAAwB,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,gBAAgB,EAAE,QAAQ,EAAE,IAAI,CAAC,eAAe,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAU,CAC5J;MACN,WAAK,EAAE,EAAE,UAAU,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,KAAK,EAAC,oBAAoB,EAAC,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC;QAC/I,YAAM,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,GAAI,CAChC,CAEF,CACP,CAAC;EAGJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEF","sourcesContent":["import { popoverController } from '@ionic/core';\r\nimport { Component, Prop, State, Watch, h } from '@stencil/core';\r\nimport { Fragment } from '../../interfaces/dialog-interfaces';\r\n\r\n@Component({\r\n  tag: 'step-question',\r\n  styleUrl: 'step-question.css',\r\n  shadow: false,\r\n})\r\nexport class StepQuestion {\r\n  @Prop() fragment: Fragment;\r\n  @Prop() isActiveQuestion: boolean;\r\n\r\n  @State() showContent = false;\r\n  @State() isTooltipOpened = false;\r\n\r\n  @Watch('fragment')\r\n  handleFragmentValueChange() {\r\n    this.showContent = false;\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n    }, 1000); // 200ms késleltetés\r\n    console.log(\"q-fragment\")\r\n  }\r\n\r\n  hasTooltip(): boolean {\r\n    return !!this.fragment.descriptionLayman;\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    this.showContent = false;\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n    }, 200); // 200ms késleltetés\r\n    console.log(\"componentWillLoad-q\")\r\n\r\n  }\r\n\r\n\r\n  \r\n\r\n  async presentPopover(ev: Event) {\r\n    if (this.fragment.descriptionLayman.trim() !== '') {\r\n      const buttonId = `button-${this.fragment.iri}`; // Az egyedi gomb ID-je\r\n      const button = document.getElementById(buttonId); // A gomb elem lekérése\r\n      console.log(button)\r\n\r\n      if (!button) {\r\n        return; // Kilépés, ha nem található a gomb elem\r\n      }\r\n\r\n      const popover = await popoverController.create({\r\n        component: 'ion-popover',\r\n        event: ev,\r\n        alignment: \"center\",\r\n        translucent: true,\r\n        showBackdrop: false,\r\n        cssClass: 'full-size',\r\n        animated: true,\r\n        componentProps: {}\r\n      });\r\n\r\n      const popoverContent = document.createElement('ion-content');\r\n      popoverContent.classList.add(\"ion-padding\");\r\n      popoverContent.innerHTML = this.fragment.descriptionLayman;\r\n\r\n      popover.appendChild(popoverContent);\r\n\r\n      //const rect = button.getBoundingClientRect();\r\n\r\n      //popover.style.top = rect.bottom + 'px';\r\n      //popover.style.left = rect.left + 'px';\r\n      popover.onDidDismiss().then(() => {\r\n        this.isTooltipOpened = false;\r\n      });\r\n\r\n      this.isTooltipOpened = true;\r\n      await popover.present();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const svgWidth = '1.5em'; // A szélesség beállítása\r\n    const svgColor = \"#2B7371\"; // A szín beállítása\r\n    const svgPath = \"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\r\n    const svgViewBox = \"0 0 512 512\"\r\n\r\n    if (!this.hasTooltip()) {\r\n      return (\r\n        <div class={`question fade-in left ${this.showContent ? 'show' : ''}`}>\r\n          <div class=\"speech-bubble-triangle\">\r\n            <div class=\"triangle-topleft\"></div>\r\n            <span class={{ \"speech-bubble-question\": true, \"active\": this.isActiveQuestion }} innerHTML={this.fragment.labelLayman} ></span>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div class={`question fade-in left ${this.showContent ? 'show' : ''}`}>\r\n        <div class=\"speech-bubble-triangle\">\r\n          <div class=\"triangle-topleft\"></div>\r\n          <span class={{ \"speech-bubble-question\": true, \"active\": this.isActiveQuestion, \"opened\": this.isTooltipOpened }} innerHTML={this.fragment.labelLayman} ></span>\r\n        </div>\r\n        <svg id={`button-${this.fragment.iri}`} class=\"infoicon clickable\" width={svgWidth} viewBox={svgViewBox} onClick={(ev) => this.presentPopover(ev)} >\r\n          <path d={svgPath} fill={svgColor} />\r\n        </svg>\r\n\r\n      </div>\r\n    );\r\n\r\n\r\n  }\r\n\r\n}\r\n"]}