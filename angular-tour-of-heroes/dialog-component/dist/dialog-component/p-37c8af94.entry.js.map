{"version":3,"names":["descriptionComponentCss","DescriptionComponent","setData","newValue","this","showContent","title","label","data","setTimeout","console","log","render","h","class","_a","metadata","description","innerHTML","_b","isFunction","value","createErrorClass","createImpl","_super","instance","Error","call","stack","ctorFunc","prototype","Object","create","constructor","UnsubscriptionError","UnsubscriptionErrorImpl","errors","message","length","map","err","i","toString","join","name","arrRemove","arr","item","index","indexOf","splice","Subscription","initialTeardown","closed","_parentage","_finalizers","unsubscribe","Array","isArray","parent","remove","initialFinalizer","e","finalizer","execFinalizer","push","add","teardown","_hasParent","_addParent","includes","_removeParent","EMPTY","empty","EMPTY_SUBSCRIPTION","isSubscription","config","onUnhandledError","onStoppedNotification","Promise","undefined","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","handler","timeout","args","delegate","clearTimeout","handle","reportUnhandledError","noop","COMPLETE_NOTIFICATION","createNotification","errorNotification","error","nextNotification","kind","errorContext","cb","Subscriber","destination","super","isStopped","EMPTY_OBSERVER","static","next","complete","SafeSubscriber","handleStoppedNotification","_next","_error","_complete","_bind","Function","bind","fn","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context","defaultErrorHandler","notification","subscriber","observable","Symbol","identity","x","pipeFromArray","fns","piped","input","reduce","prev","Observable","subscribe","_subscribe","lift","operator","source","isSubscriber","_trySubscribe","sink","forEach","promiseCtor","getPromiseCtor","resolve","reject","Symbol_observable","pipe","operations","toPromise","isObserver","hasLift","operate","init","liftedSource","TypeError","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","Subject","currentObservers","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","from","observer","shift","observed","_checkFinalizedStatuses","_innerSubscribe","asObservable","isScheduler","schedule","last","popResultSelector","pop","popScheduler","__awaiter","_arguments","P","generator","adopt","fulfilled","step","rejected","result","done","then","apply","__values","o","s","iterator","m","__await","v","__asyncGenerator","asyncIterator","g","q","verb","n","a","b","resume","settle","r","fulfill","f","__asyncValues","d","isArrayLike","isPromise","isInteropObservable","isAsyncIterable","obj","createInvalidObservableTypeError","getSymbolIterator","isIterable","Symbol_iterator","readableStreamLikeToAsyncGenerator","readableStream","arguments","readableStreamLikeToAsyncGenerator_1","reader","getReader","read","releaseLock","isReadableStreamLike","innerFrom","fromInteropObservable","fromArrayLike","fromPromise","fromAsyncIterable","fromIterable","fromReadableStreamLike","obs","array","promise","iterable","asyncIterable","process","catch","asyncIterable_1","asyncIterable_1_1","e_1","e_1_1","return","executeSchedule","parentSubscription","scheduler","work","delay","repeat","scheduleSubscription","observeOn","subscribeOn","scheduleObservable","schedulePromise","scheduleArray","scheduleIterable","scheduleAsyncIterable","scheduleReadableStreamLike","scheduled","project","callOrApply","mapOneOrManyArgs","getPrototypeOf","objectProto","keys","getKeys","argsArgArrayOrObject","first","isPOJO","key","createObject","values","combineLatest","resultSelector","observables","combineLatestInit","valueTransform","maybeSchedule","active","remainingFirstValues","hasFirstValue","slice","execute","subscription","User","region","player_id","sex","education","birthyear","email","DialogAsyncService","serviceUrl","serverUrl","startWithIri","iri","lang","answers","stored","data$","fetch","method","body","JSON","stringify","headers","response","json","metadata$","startWithCaseId","caseId","date","getSession","sessionId","answer","revokeAnswer","getDialogMetadata","ElasticService","sendConsultationData","consultationObj","HelperService","user","host_domain","age","Date","getFullYear","getBodyWithUsers","mail","score","scr","goal","expert","substring","lastIndexOf","parseInt","getIntlMessage","async","locale","messages","import","default","dialogComponentCss","DialogComponent","lastLocale","hostRef","answer$","revoke$","startDate","now","Map","loadMessages","initSubscriptions","dialogAsyncService","elasticService","helperService","answersFromParams","params","ids","filter","p","test","id","toLocaleDateString","replace","res","dialogData","dialogMetadata","fragmentData","fragments","dialogIri","endpointId","res2","fr","isPre","str","shortId","processNextQuestion","processRevoke","popover","popoverController","component","alignment","translucent","showBackdrop","cssClass","animated","componentProps","dismissOnSelect","popoverContent","document","createElement","classList","appendChild","onDidDismiss","reloadPage","present","location","reload","Response","ok","presentPopover","type","endDate","Set","saveAuto","scrollToLast","end","findIndex","revokeAnswerIri","assign","steps","getElementsByClassName","resultContainer","scrollIntoView","handleAnswer","detail","handleRevoke","saveDialog","sendData","labelExpert","layman","labelLayman","session","model_id","RegExp","exec","localPairs","frag","questionLayman","questionLabel","answerLayman","optionsLayman","parse","question","pairs","sessionName","fragment","answerValue","controlDisabled","onAnswer","event","onRevokeAnswer","resultData","contentCss","Content","watchDog","isScrolling","lastScroll","queued","cTop","cBottom","isMainContent","resizeTimeout","scrollTop","scrollLeft","startX","startY","startTime","currentX","currentY","velocityX","velocityY","deltaX","deltaY","currentTime","color","fullscreen","forceOverscroll","scrollX","scrollY","scrollEvents","connectedCallback","el","closest","disconnectedCallback","onScrollEnd","onAppLoad","resize","onResize","offsetParent","shouldForceOverscroll","mode","getIonMode","isPlatform","readTask","readDimensions","forceUpdate","page","getPageElement","top","Math","max","offsetTop","bottom","offsetHeight","dirty","onScroll","ev","timeStamp","shouldStart","onScrollStart","ts","updateScrollDetail","scrollEl","ionScroll","emit","componentOnReady","backgroundContentEl","scrollToTop","duration","scrollToPoint","getScrollElement","y","scrollHeight","clientHeight","fromY","fromX","linearTime","min","easedT","pow","floor","requestAnimationFrame","ionScrollStart","clearInterval","setInterval","ionScrollEnd","rtl","isRTL","transitionShadow","TagType","Host","createColorClasses","hostContext","overscroll","style","ref","part","getParentElement","parentElement","parentNode","host","tabs","timestamp","prevX","prevY","prevT","timeDelta","resultComponentCss","ResultComponent","tag","resultFailTags","resultSuccessTags","resultD","makeResultLabel","setTag","setFocus","element","querySelector","focus","tmp","split","details","handleResultValueChange","toggleDetails","isDetailOpen","svgWidth","svgColor","svgPathDown","svgPathUp","svgPathCheck","svgPathBan","svgViewBox","svgTarget","alignSelf","width","height","viewBox","fill","xmlns","marginTop","fontWeight","marginRight","onClick","marginBottom","HOOKS","defaults","_disable","allowInput","allowInvalidPreload","altFormat","altInput","altInputClass","animate","window","navigator","userAgent","ariaDateFormat","autoFillDefaultTime","clickOpens","closeOnSelect","conjunction","dateFormat","defaultHour","defaultMinute","defaultSeconds","disable","disableMobile","enableSeconds","enableTime","errorHandler","warn","getWeek","givenDate","getTime","setHours","setDate","getDate","getDay","week1","round","hourIncrement","ignoredFocusElements","inline","minuteIncrement","monthSelectorType","nextArrow","noCalendar","onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition","plugins","position","positionElement","prevArrow","shorthandCurrentMonth","showMonths","time_24hr","weekNumbers","wrap","english","weekdays","shorthand","longhand","months","daysInMonth","firstDayOfWeek","ordinal","nth","rangeSeparator","weekAbbreviation","scrollTitle","toggleTitle","amPM","yearAriaLabel","monthAriaLabel","hourAriaLabel","minuteAriaLabel","pad","number","int","bool","debounce","wait","t","_this","arrayify","toggleClass","elem","className","content","textContent","clearNode","node","firstChild","removeChild","findParent","condition","createNumberInput","inputClassName","opts","wrapper","numInput","arrowUp","arrowDown","pattern","setAttribute","getEventTarget","composedPath","path","target","doNothing","monthToStr","monthNumber","revFormat","D","F","dateObj","monthName","setMonth","G","hour","getHours","parseFloat","H","J","day","K","M","shortMonth","S","seconds","setSeconds","U","_","unixSeconds","W","weekNum","weekNumber","Y","year","setFullYear","Z","ISODate","minutes","setMinutes","j","l","month","u","unixMillSeconds","w","tokenRegex","formats","toISOString","options","getMonth","getSeconds","getMinutes","String","createDateFormatter","_c","l10n","_d","isMobile","frmt","overrideLocale","formatDate","c","createDateParser","givenFormat","timeless","customLocale","parsedDate","dateOrig","toFixed","format","datestr","trim","parseDate","matched","ops","matchIndex","regexStr","token","isBackSlash","escaped","match","val","isNaN","compareDates","date1","date2","isBetween","ts1","ts2","calculateSecondsSinceMidnight","hours","parseSeconds","secondsSinceMidnight","DAY","getDefaultHours","minDate","minHour","minMinutes","minSeconds","maxDate","maxHr","maxMinutes","_i","_loop_1","args_1","__assign","hasOwnProperty","__spreadArrays","il","k","jl","DEBOUNCED_CHANGE_MS","FlatpickrInstance","instanceConfig","self","defaultOptions","flatpickr","defaultConfig","English","_handlers","pluginElements","loadedPlugins","_setHoursFromDate","setHoursFromDate","_positionCalendar","positionCalendar","changeMonth","changeYear","clear","close","onMouseOver","_createElement","createDay","destroy","isEnabled","jumpToDate","updateValue","open","redraw","set","toggle","setupHelperFunctions","utils","getDaysInMonth","yr","currentMonth","currentYear","isOpen","parseConfig","setupLocale","setupInputs","setupDates","build","bindEvents","selectedDates","latestSelectedDateObj","setCalendarWidth","isSafari","triggerEvent","getClosestActiveElement","calendarContainer","getRootNode","activeElement","bindToInstance","visibility","display","daysContainer","daysWidth","days","offsetWidth","weekWrapper","removeProperty","updateTime","defaultDate","getMilliseconds","timeWrapper","prevValue","_input","setHoursFromInputs","_debouncedChange","ampm2military","military2ampm","hourElement","minuteElement","secondElement","limitMinHours","minTime","minDateHasTime","limitMaxHours","maxTime","maxDateHasTime","minBound","maxBound","onYearInput","eventTarget","delta","addEventListener","removeEventListener","triggerChange","evt","querySelectorAll","setupMobile","debouncedResize","ontouchstart","documentClick","capture","monthNav","onMonthNavClick","selectDate","timeContainer","selText","select","timeIncrement","onBlur","jumpDate","jumpTo","oldYear","oldMonth","buildMonthSwitch","incrementNumInput","contains","inputElem","createEvent","dispatchEvent","createDocumentFragment","tabIndex","buildMonthNav","innerContainer","buildWeeks","rContainer","buildWeekdays","buildDays","buildTime","customAppend","appendTo","nodeType","insertBefore","nextSibling","_dayNumber","dateIsEnabled","dayElement","$i","todayDateElem","isDateSelected","selectedDateElem","isDateInRange","insertAdjacentHTML","focusOnDayElem","targetNode","getFirstAvailableDay","startMonth","endMonth","children","startIndex","endIndex","getNextAvailableDay","current","givenMonth","loopDelta","numMonthDays","abs","focusOnDay","offset","dayFocused","isInView","startElem","buildMonthDays","firstOfMonth","prevMonthDays","isMultiMonth","prevMonthDayClass","nextMonthDayClass","dayNumber","dayIndex","dayNum","dayContainer","shouldBuildMonth","monthsDropdownContainer","selected","buildMonth","container","monthNavFragment","monthElement","selectedMonth","yearInput","tabindex","yearElement","getElementsByTagName","disabled","buildMonths","prevMonthNav","yearElements","monthElements","nextMonthNav","defineProperty","get","__hidePrevMonthArrow","__hideNextMonthArrow","currentYearElement","updateNavigationCurrentMonth","separator","hourInput","minuteInput","secondInput","getAttribute","weekdayContainer","updateWeekdays","isOffset","_hidePrevMonthArrow","_hideNextMonthArrow","triggerChangeEvent","toInitial","mobileInput","_initialDate","lastChild","_type","removeAttribute","isCalendarElem","eventTarget_1","isCalendarElement","isInput","lostFocus","relatedTarget","isIgnored","some","newYear","newYearNum","isNewYear","dateToCheck","enable","parsed","to","valueChanged","trimEnd","getDateStr","allowKeydown","allowInlineKeydown","keyCode","blur","isTimeObj","preventDefault","focusAndClose","delta_1","ctrlKey","stopPropagation","elems","concat","shiftKey","charAt","toLowerCase","cellClass","hoverDate","firstElementChild","initialDate","rangeStartDate","rangeEndDate","containsDisabled","minRange","maxRange","hoverableCells","dayElem","outOfRange","_positionElement","click","wasOpen","minMaxDateSetter","inverseDateObj","boolOpts","userConfig","dataset","_enable","dates","parseDateRules","timeMode","defaultDateFormat","defaultAltFormat","_minDate","_maxDate","minMaxTimeSetter","_minTime","_maxTime","hook","pluginConf","getInputElem","l10ns","customPositionElement","calendarHeight","acc","child","calendarWidth","configPos","configPosVertical","configPosHorizontal","inputBounds","getBoundingClientRect","distanceFromBottom","innerHeight","showOnTop","pageYOffset","left","pageXOffset","isCenter","isRight","right","rightMost","centerMost","doc","getDocumentStyleSheet","bodyWidth","centerLeft","centerBefore","centerAfter","centerIndex","cssRules","centerStyle","insertRule","editableSheet","styleSheets","sheet","createStyleSheet","head","msMaxTouchPoints","isSelectable","selectedDate","shouldChangeMonth","selectedIndex","sort","single","range","CALLBACKS","updatePositionElement","option","setSelectedDate","inputDate","rule","preloadedDate","nodeName","placeholder","required","inputType","mobileFormatStr","defaultValue","hooks","initEvent","specificFormat","dObj","isPrevMonth","isNextMonth","isKeyDown","curValue","which","isHourElem","isMinuteElem","_flatpickr","nodeList","nodes","HTMLElement","instances","HTMLCollection","NodeList","selector","Node","en","localize","setDefaults","jQuery","fp_incr","global","factory","exports","fp","Hungarian","hu","stepComponentCss","StepComponent","handleAnswerValueChange","numberAnswerValue","localNumberAnswerValue","dateAnswerValue","stringAnswerValue","yesButtonClass","noButtonClass","isActive","isDateActive","handleFragmentValueChange","oldValue","optionsExpert","localStringAnswerValue","componentDidLoad","dateInput","realDateInput","localeObject","datePicker","_selectedDates","dateStr","handleDateChange","handleButtonClick","firstInput","firstArea","firstButton","svgPathSend","isActiveQuestion","op","menuAnswer","yesNoAnswer","onSubmit","form","numberAnswer","inputMode","answered","onInput","setCustomValidity","onNumberInput","setNumberActive","onInvalid","hidden","flexGrow","stringAnswer","onStringInput","setStringActive","hiddenSubmit","localDateAnswerValue","setDateActive","dateAnswer","onDateInput","onKeyUp","readonly","stroke","dateString","padZero","padStart","checkNumberInput","textarea","ans","okButtonClass","stepQuestionCss","StepQuestion","hasTooltip","descriptionLayman","buttonId","button","getElementById","svgPath"],"sources":["./src/components/description-component/description-component.css?tag=description-component","./src/components/description-component/description-component.tsx","./node_modules/rxjs/dist/esm/internal/util/isFunction.js","./node_modules/rxjs/dist/esm/internal/util/createErrorClass.js","./node_modules/rxjs/dist/esm/internal/util/UnsubscriptionError.js","./node_modules/rxjs/dist/esm/internal/util/arrRemove.js","./node_modules/rxjs/dist/esm/internal/Subscription.js","./node_modules/rxjs/dist/esm/internal/config.js","./node_modules/rxjs/dist/esm/internal/scheduler/timeoutProvider.js","./node_modules/rxjs/dist/esm/internal/util/reportUnhandledError.js","./node_modules/rxjs/dist/esm/internal/util/noop.js","./node_modules/rxjs/dist/esm/internal/NotificationFactories.js","./node_modules/rxjs/dist/esm/internal/util/errorContext.js","./node_modules/rxjs/dist/esm/internal/Subscriber.js","./node_modules/rxjs/dist/esm/internal/symbol/observable.js","./node_modules/rxjs/dist/esm/internal/util/identity.js","./node_modules/rxjs/dist/esm/internal/util/pipe.js","./node_modules/rxjs/dist/esm/internal/Observable.js","./node_modules/rxjs/dist/esm/internal/util/lift.js","./node_modules/rxjs/dist/esm/internal/operators/OperatorSubscriber.js","./node_modules/rxjs/dist/esm/internal/util/ObjectUnsubscribedError.js","./node_modules/rxjs/dist/esm/internal/Subject.js","./node_modules/rxjs/dist/esm/internal/util/isScheduler.js","./node_modules/rxjs/dist/esm/internal/util/args.js","./node_modules/tslib/tslib.es6.js","./node_modules/rxjs/dist/esm/internal/util/isArrayLike.js","./node_modules/rxjs/dist/esm/internal/util/isPromise.js","./node_modules/rxjs/dist/esm/internal/util/isInteropObservable.js","./node_modules/rxjs/dist/esm/internal/util/isAsyncIterable.js","./node_modules/rxjs/dist/esm/internal/util/throwUnobservableError.js","./node_modules/rxjs/dist/esm/internal/symbol/iterator.js","./node_modules/rxjs/dist/esm/internal/util/isIterable.js","./node_modules/rxjs/dist/esm/internal/util/isReadableStreamLike.js","./node_modules/rxjs/dist/esm/internal/observable/innerFrom.js","./node_modules/rxjs/dist/esm/internal/util/executeSchedule.js","./node_modules/rxjs/dist/esm/internal/operators/observeOn.js","./node_modules/rxjs/dist/esm/internal/operators/subscribeOn.js","./node_modules/rxjs/dist/esm/internal/scheduled/scheduleObservable.js","./node_modules/rxjs/dist/esm/internal/scheduled/schedulePromise.js","./node_modules/rxjs/dist/esm/internal/scheduled/scheduleArray.js","./node_modules/rxjs/dist/esm/internal/scheduled/scheduleIterable.js","./node_modules/rxjs/dist/esm/internal/scheduled/scheduleAsyncIterable.js","./node_modules/rxjs/dist/esm/internal/scheduled/scheduleReadableStreamLike.js","./node_modules/rxjs/dist/esm/internal/scheduled/scheduled.js","./node_modules/rxjs/dist/esm/internal/observable/from.js","./node_modules/rxjs/dist/esm/internal/operators/map.js","./node_modules/rxjs/dist/esm/internal/util/mapOneOrManyArgs.js","./node_modules/rxjs/dist/esm/internal/util/argsArgArrayOrObject.js","./node_modules/rxjs/dist/esm/internal/util/createObject.js","./node_modules/rxjs/dist/esm/internal/observable/combineLatest.js","./src/interfaces/user.ts","./src/services/dialog-async.service.ts","./src/services/elastic.service.ts","./src/services/helper.service.ts","./src/language/translation.ts","./src/components/dialog-component/dialog-component.css?tag=dialog-component","./src/components/dialog-component/dialog-component.tsx","./node_modules/@ionic/core/dist/collection/components/content/content.css?tag=ion-content&encapsulation=shadow","./node_modules/@ionic/core/dist/collection/components/content/content.js","./src/components/result-component/result-component.css?tag=result-component","./src/components/result-component/result-component.tsx","./node_modules/flatpickr/dist/esm/types/options.js","./node_modules/flatpickr/dist/esm/l10n/default.js","./node_modules/flatpickr/dist/esm/utils/index.js","./node_modules/flatpickr/dist/esm/utils/dom.js","./node_modules/flatpickr/dist/esm/utils/formatting.js","./node_modules/flatpickr/dist/esm/utils/dates.js","./node_modules/flatpickr/dist/esm/utils/polyfills.js","./node_modules/flatpickr/dist/esm/index.js","./node_modules/flatpickr/dist/l10n/hu.js","./src/components/step-component/step-component.css?tag=step-component","./src/components/step-component/step-component.tsx","./src/components/step-question/step-question.css?tag=step-question","./src/components/step-question/step-question.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n\r\n.description-container {\r\n  background: var(--background-pastell-bg);\r\n  border: 1px solid var(--brand-main-brand);\r\n  border-radius: 2px;\r\n  padding: 0.5625rem;\r\n  margin-top: 1.25rem;\r\n}\r\n\r\n.fade-in.top {\r\n  transition: 0.5s all ease-in-out;\r\n  transform: translate3d(0, -50px, 0);\r\n  opacity: 0;\r\n}\r\n","import { Component, Prop, State, Watch, h } from '@stencil/core';\r\nimport { DialogMetadata } from '../../interfaces/dialog-interfaces';\r\n\r\n@Component({\r\n  tag: 'description-component',\r\n  styleUrl: 'description-component.css',\r\n  shadow: false,\r\n})\r\nexport class DescriptionComponent {\r\n  @Prop() data: DialogMetadata;\r\n  @Prop() sessionName: string;\r\n  @State() showContent = false;\r\n\r\n  title: string;\r\n\r\n  @Watch('data')\r\n  setData(newValue: DialogMetadata) {\r\n    this.showContent = false;\r\n    if (newValue) {\r\n      if (newValue.title) {\r\n        this.title = newValue.title;\r\n      } else {\r\n        this.title = newValue.label;\r\n      }\r\n    }\r\n\r\n    this.data = newValue;\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n    }, 100);\r\n    console.log(\"desc,setData\")\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class={`fade-in top ${this.showContent ? 'show' : ''}`}>\r\n        {this.data?.metadata.description && (\r\n\r\n          <div\r\n            class=\"description-container\"\r\n            innerHTML={this.data?.metadata.description}>\r\n          </div>\r\n\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    const _super = (instance) => {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    const ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport const UnsubscriptionError = createErrorClass((_super) => function UnsubscriptionErrorImpl(errors) {\n    _super(this);\n    this.message = errors\n        ? `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}`\n        : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        const index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nexport class Subscription {\n    constructor(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    unsubscribe() {\n        let errors;\n        if (!this.closed) {\n            this.closed = true;\n            const { _parentage } = this;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    for (const parent of _parentage) {\n                        parent.remove(this);\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            const { initialTeardown: initialFinalizer } = this;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            const { _finalizers } = this;\n            if (_finalizers) {\n                this._finalizers = null;\n                for (const finalizer of _finalizers) {\n                    try {\n                        execFinalizer(finalizer);\n                    }\n                    catch (err) {\n                        errors = errors !== null && errors !== void 0 ? errors : [];\n                        if (err instanceof UnsubscriptionError) {\n                            errors = [...errors, ...err.errors];\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    }\n    add(teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    }\n    _hasParent(parent) {\n        const { _parentage } = this;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    }\n    _addParent(parent) {\n        const { _parentage } = this;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    }\n    _removeParent(parent) {\n        const { _parentage } = this;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    }\n    remove(teardown) {\n        const { _finalizers } = this;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    }\n}\nSubscription.EMPTY = (() => {\n    const empty = new Subscription();\n    empty.closed = true;\n    return empty;\n})();\nexport const EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export const config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","export const timeoutProvider = {\n    setTimeout(handler, timeout, ...args) {\n        const { delegate } = timeoutProvider;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout(handler, timeout, ...args);\n        }\n        return setTimeout(handler, timeout, ...args);\n    },\n    clearTimeout(handle) {\n        const { delegate } = timeoutProvider;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(() => {\n        const { onUnhandledError } = config;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export const COMPLETE_NOTIFICATION = (() => createNotification('C', undefined, undefined))();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind,\n        value,\n        error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nlet context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        const isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            const { errorThrown, error } = context;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nexport class Subscriber extends Subscription {\n    constructor(destination) {\n        super();\n        this.isStopped = false;\n        if (destination) {\n            this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(this);\n            }\n        }\n        else {\n            this.destination = EMPTY_OBSERVER;\n        }\n    }\n    static create(next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    }\n    next(value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    }\n    error(err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    }\n    complete() {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    }\n    unsubscribe() {\n        if (!this.closed) {\n            this.isStopped = true;\n            super.unsubscribe();\n            this.destination = null;\n        }\n    }\n    _next(value) {\n        this.destination.next(value);\n    }\n    _error(err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    }\n    _complete() {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    }\n}\nconst _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nclass ConsumerObserver {\n    constructor(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    next(value) {\n        const { partialObserver } = this;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    }\n    error(err) {\n        const { partialObserver } = this;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    }\n    complete() {\n        const { partialObserver } = this;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    }\n}\nexport class SafeSubscriber extends Subscriber {\n    constructor(observerOrNext, error, complete) {\n        super();\n        let partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            let context;\n            if (this && config.useDeprecatedNextContext) {\n                context = Object.create(observerOrNext);\n                context.unsubscribe = () => this.unsubscribe();\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context),\n                    error: observerOrNext.error && bind(observerOrNext.error, context),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        this.destination = new ConsumerObserver(partialObserver);\n    }\n}\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    const { onStoppedNotification } = config;\n    onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\n}\nexport const EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export const observable = (() => (typeof Symbol === 'function' && Symbol.observable) || '@@observable')();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe(...fns) {\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce((prev, fn) => fn(prev), input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nexport class Observable {\n    constructor(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    lift(operator) {\n        const observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    }\n    subscribe(observerOrNext, error, complete) {\n        const subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(() => {\n            const { operator, source } = this;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        this._subscribe(subscriber)\n                    :\n                        this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    }\n    _trySubscribe(sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    }\n    forEach(next, promiseCtor) {\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor((resolve, reject) => {\n            const subscriber = new SafeSubscriber({\n                next: (value) => {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            this.subscribe(subscriber);\n        });\n    }\n    _subscribe(subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    }\n    [Symbol_observable]() {\n        return this;\n    }\n    pipe(...operations) {\n        return pipeFromArray(operations)(this);\n    }\n    toPromise(promiseCtor) {\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor((resolve, reject) => {\n            let value;\n            this.subscribe((x) => (value = x), (err) => reject(err), () => resolve(value));\n        });\n    }\n}\nObservable.create = (subscribe) => {\n    return new Observable(subscribe);\n};\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return (source) => {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nexport class OperatorSubscriber extends Subscriber {\n    constructor(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        super(destination);\n        this.onFinalize = onFinalize;\n        this.shouldUnsubscribe = shouldUnsubscribe;\n        this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : super._next;\n        this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : super._error;\n        this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : super._complete;\n    }\n    unsubscribe() {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            const { closed } = this;\n            super.unsubscribe();\n            !closed && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    }\n}\n//# sourceMappingURL=OperatorSubscriber.js.map","import { createErrorClass } from './createErrorClass';\nexport const ObjectUnsubscribedError = createErrorClass((_super) => function ObjectUnsubscribedErrorImpl() {\n    _super(this);\n    this.name = 'ObjectUnsubscribedError';\n    this.message = 'object unsubscribed';\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nexport class Subject extends Observable {\n    constructor() {\n        super();\n        this.closed = false;\n        this.currentObservers = null;\n        this.observers = [];\n        this.isStopped = false;\n        this.hasError = false;\n        this.thrownError = null;\n    }\n    lift(operator) {\n        const subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    }\n    _throwIfClosed() {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    }\n    next(value) {\n        errorContext(() => {\n            this._throwIfClosed();\n            if (!this.isStopped) {\n                if (!this.currentObservers) {\n                    this.currentObservers = Array.from(this.observers);\n                }\n                for (const observer of this.currentObservers) {\n                    observer.next(value);\n                }\n            }\n        });\n    }\n    error(err) {\n        errorContext(() => {\n            this._throwIfClosed();\n            if (!this.isStopped) {\n                this.hasError = this.isStopped = true;\n                this.thrownError = err;\n                const { observers } = this;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    }\n    complete() {\n        errorContext(() => {\n            this._throwIfClosed();\n            if (!this.isStopped) {\n                this.isStopped = true;\n                const { observers } = this;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    }\n    unsubscribe() {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    }\n    get observed() {\n        var _a;\n        return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n    }\n    _trySubscribe(subscriber) {\n        this._throwIfClosed();\n        return super._trySubscribe(subscriber);\n    }\n    _subscribe(subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    }\n    _innerSubscribe(subscriber) {\n        const { hasError, isStopped, observers } = this;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(() => {\n            this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    }\n    _checkFinalizedStatuses(subscriber) {\n        const { hasError, thrownError, isStopped } = this;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    }\n    asObservable() {\n        const observable = new Observable();\n        observable.source = this;\n        return observable;\n    }\n}\nSubject.create = (destination, source) => {\n    return new AnonymousSubject(destination, source);\n};\nexport class AnonymousSubject extends Subject {\n    constructor(destination, source) {\n        super();\n        this.destination = destination;\n        this.source = source;\n    }\n    next(value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    }\n    error(err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    }\n    complete() {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    _subscribe(subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    }\n}\n//# sourceMappingURL=Subject.js.map","import { isFunction } from './isFunction';\nexport function isScheduler(value) {\n    return value && isFunction(value.schedule);\n}\n//# sourceMappingURL=isScheduler.js.map","import { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nexport function popResultSelector(args) {\n    return isFunction(last(args)) ? args.pop() : undefined;\n}\nexport function popScheduler(args) {\n    return isScheduler(last(args)) ? args.pop() : undefined;\n}\nexport function popNumber(args, defaultValue) {\n    return typeof last(args) === 'number' ? args.pop() : defaultValue;\n}\n//# sourceMappingURL=args.js.map","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport default {\r\n    __extends,\r\n    __assign,\r\n    __rest,\r\n    __decorate,\r\n    __param,\r\n    __metadata,\r\n    __awaiter,\r\n    __generator,\r\n    __createBinding,\r\n    __exportStar,\r\n    __values,\r\n    __read,\r\n    __spread,\r\n    __spreadArrays,\r\n    __spreadArray,\r\n    __await,\r\n    __asyncGenerator,\r\n    __asyncDelegator,\r\n    __asyncValues,\r\n    __makeTemplateObject,\r\n    __importStar,\r\n    __importDefault,\r\n    __classPrivateFieldGet,\r\n    __classPrivateFieldSet,\r\n    __classPrivateFieldIn,\r\n};\r\n","export const isArrayLike = ((x) => x && typeof x.length === 'number' && typeof x !== 'function');\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(`You provided ${input !== null && typeof input === 'object' ? 'an invalid object' : `'${input}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`);\n}\n//# sourceMappingURL=throwUnobservableError.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport const iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function* readableStreamLikeToAsyncGenerator_1() {\n        const reader = readableStream.getReader();\n        try {\n            while (true) {\n                const { value, done } = yield __await(reader.read());\n                if (done) {\n                    return yield __await(void 0);\n                }\n                yield yield __await(value);\n            }\n        }\n        finally {\n            reader.releaseLock();\n        }\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable((subscriber) => {\n        const obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable((subscriber) => {\n        for (let i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable((subscriber) => {\n        promise\n            .then((value) => {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, (err) => subscriber.error(err))\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable((subscriber) => {\n        for (const value of iterable) {\n            subscriber.next(value);\n            if (subscriber.closed) {\n                return;\n            }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable((subscriber) => {\n        process(asyncIterable, subscriber).catch((err) => subscriber.error(err));\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_1, _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            for (asyncIterable_1 = __asyncValues(asyncIterable); asyncIterable_1_1 = yield asyncIterable_1.next(), !asyncIterable_1_1.done;) {\n                const value = asyncIterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return)) yield _a.call(asyncIterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay = 0, repeat = false) {\n    const scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay = 0) {\n    return operate((source, subscriber) => {\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => executeSchedule(subscriber, scheduler, () => subscriber.next(value), delay), () => executeSchedule(subscriber, scheduler, () => subscriber.complete(), delay), (err) => executeSchedule(subscriber, scheduler, () => subscriber.error(err), delay)));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay = 0) {\n    return operate((source, subscriber) => {\n        subscriber.add(scheduler.schedule(() => source.subscribe(subscriber), delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable((subscriber) => {\n        let i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable((subscriber) => {\n        let iterator;\n        executeSchedule(subscriber, scheduler, () => {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, () => {\n                let value;\n                let done;\n                try {\n                    ({ value, done } = iterator.next());\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return () => isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return();\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable((subscriber) => {\n        executeSchedule(subscriber, scheduler, () => {\n            const iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, () => {\n                iterator.next().then((result) => {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate((source, subscriber) => {\n        let index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { map } from \"../operators/map\";\nconst { isArray } = Array;\nfunction callOrApply(fn, args) {\n    return isArray(args) ? fn(...args) : fn(args);\n}\nexport function mapOneOrManyArgs(fn) {\n    return map(args => callOrApply(fn, args));\n}\n//# sourceMappingURL=mapOneOrManyArgs.js.map","const { isArray } = Array;\nconst { getPrototypeOf, prototype: objectProto, keys: getKeys } = Object;\nexport function argsArgArrayOrObject(args) {\n    if (args.length === 1) {\n        const first = args[0];\n        if (isArray(first)) {\n            return { args: first, keys: null };\n        }\n        if (isPOJO(first)) {\n            const keys = getKeys(first);\n            return {\n                args: keys.map((key) => first[key]),\n                keys,\n            };\n        }\n    }\n    return { args: args, keys: null };\n}\nfunction isPOJO(obj) {\n    return obj && typeof obj === 'object' && getPrototypeOf(obj) === objectProto;\n}\n//# sourceMappingURL=argsArgArrayOrObject.js.map","export function createObject(keys, values) {\n    return keys.reduce((result, key, i) => ((result[key] = values[i]), result), {});\n}\n//# sourceMappingURL=createObject.js.map","import { Observable } from '../Observable';\nimport { argsArgArrayOrObject } from '../util/argsArgArrayOrObject';\nimport { from } from './from';\nimport { identity } from '../util/identity';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { popResultSelector, popScheduler } from '../util/args';\nimport { createObject } from '../util/createObject';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function combineLatest(...args) {\n    const scheduler = popScheduler(args);\n    const resultSelector = popResultSelector(args);\n    const { args: observables, keys } = argsArgArrayOrObject(args);\n    if (observables.length === 0) {\n        return from([], scheduler);\n    }\n    const result = new Observable(combineLatestInit(observables, scheduler, keys\n        ?\n            (values) => createObject(keys, values)\n        :\n            identity));\n    return resultSelector ? result.pipe(mapOneOrManyArgs(resultSelector)) : result;\n}\nexport function combineLatestInit(observables, scheduler, valueTransform = identity) {\n    return (subscriber) => {\n        maybeSchedule(scheduler, () => {\n            const { length } = observables;\n            const values = new Array(length);\n            let active = length;\n            let remainingFirstValues = length;\n            for (let i = 0; i < length; i++) {\n                maybeSchedule(scheduler, () => {\n                    const source = from(observables[i], scheduler);\n                    let hasFirstValue = false;\n                    source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n                        values[i] = value;\n                        if (!hasFirstValue) {\n                            hasFirstValue = true;\n                            remainingFirstValues--;\n                        }\n                        if (!remainingFirstValues) {\n                            subscriber.next(valueTransform(values.slice()));\n                        }\n                    }, () => {\n                        if (!--active) {\n                            subscriber.complete();\n                        }\n                    }));\n                }, subscriber);\n            }\n        }, subscriber);\n    };\n}\nfunction maybeSchedule(scheduler, execute, subscription) {\n    if (scheduler) {\n        executeSchedule(subscription, scheduler, execute);\n    }\n    else {\n        execute();\n    }\n}\n//# sourceMappingURL=combineLatest.js.map","export class User {\r\n\r\n    constructor(\r\n        public region: number,\r\n        public player_id: number,\r\n        public sex?: number,\r\n        public education?: string,\r\n        public birthyear?: number,\r\n        public email?: string) { }\r\n}\r\n","import { Observable, combineLatest, from } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { serverUrl } from \"../../config.json\";\r\nimport { Answer, DialogData, DialogMetadata } from \"../interfaces/dialog-interfaces\";\r\n\r\nexport class DialogAsyncService {\r\n\r\n    private serviceUrl: string = `${serverUrl}/emerald/rest/api/v1/product-finder`;\r\n    sessionId: string;\r\n    dialogIri: string;\r\n    endpointId: string;\r\n\r\n    constructor() { }\r\n\r\n    startWithIri(iri: string, lang: string, answers?: Answer[], stored?: boolean): Observable<{ data: DialogData, metadata: DialogMetadata }> {\r\n        const data$ = fetch(`${this.serviceUrl}?stored=${stored}`, {\r\n            method: 'POST',\r\n            body: JSON.stringify({ iri, lang, answers }),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(response => response.json()) as Promise<DialogData>;\r\n\r\n        const metadata$ = fetch(`${this.serviceUrl}/dialogByIri?iri=${iri}&lang=${lang}`)\r\n            .then(response => response.json()) as Promise<DialogMetadata>;\r\n\r\n        return combineLatest([data$, metadata$]).pipe(\r\n            map(([data, metadata]) => ({ data, metadata }))\r\n        );\r\n\r\n    }\r\n\r\n    startWithCaseId(caseId: string, date: string, lang: string, answers?: Answer[], stored?: boolean): Observable<{ data: DialogData, metadata: DialogMetadata }> {\r\n        const data$ = fetch(`${this.serviceUrl}?stored=${stored}`, {\r\n            method: 'POST',\r\n            body: JSON.stringify({ caseId, date, lang, answers }),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(response => response.json()) as Promise<DialogData>;\r\n\r\n        const metadata$ = fetch(`${this.serviceUrl}/dialog?caseId=${caseId}&date=${date}`)\r\n            .then(response => response.json()) as Promise<DialogMetadata>;\r\n\r\n        return combineLatest([data$, metadata$]).pipe(\r\n            map(([data, metadata]) => ({ data, metadata }))\r\n        );\r\n    }\r\n\r\n    getSession(): Observable<any> {\r\n        return from(fetch(`${this.serviceUrl}/${this.sessionId}`).then(response => response.json()));\r\n    }\r\n\r\n    answer(body: Answer): Observable<any> {\r\n        return from(fetch(`${this.serviceUrl}/${this.sessionId}/answers`, {\r\n            method: 'POST',\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(response => response.json()));\r\n    }\r\n\r\n    revokeAnswer(body: Answer): Observable<any> {\r\n        return from(fetch(`${this.serviceUrl}/${this.sessionId}/answers`, {\r\n            method: 'PUT',\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(response => response.json()));\r\n    }\r\n\r\n    getDialogMetadata(iri: string, lang: string): Observable<any> {\r\n        return from(fetch(`${this.serviceUrl}/dialogByIri?iri=${iri}&lang=${lang}`).then(response => response.json()));\r\n    }\r\n\r\n\r\n}","import { Observable, from } from \"rxjs\";\r\nimport { serverUrl } from \"../../config.json\";\r\nimport { ConsultationResult } from \"../interfaces/dialog-interfaces\";\r\n\r\nexport class ElasticService {\r\n    private serviceUrl = `${serverUrl}/emerald/rest/api/v1/analytics/`;\r\n\r\n    constructor() { }\r\n\r\n    sendConsultationData(consultationObj: ConsultationResult): Observable<any> {\r\n        return from(fetch(`${this.serviceUrl}/consultation`, {\r\n            method: 'POST',\r\n            body: JSON.stringify(consultationObj),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(response => response.json()));\r\n    }\r\n\r\n}","import { host_domain } from \"../../config.json\";\r\nimport { ConsultationResult } from \"../interfaces/dialog-interfaces\";\r\nimport { User } from \"../interfaces/user\";\r\n\r\nexport class HelperService {\r\n    player_id: number;\r\n    region: number;\r\n    education: string;\r\n    sex: number;\r\n    age: number;\r\n    email: string;\r\n    host_domain = host_domain;\r\n\r\n    constructor(user: User) {\r\n        //console.log(\"helperservice\", user)\r\n        this.player_id = user.player_id || 12;\r\n        this.region = user.region || 0;\r\n        this.age = new Date().getFullYear() - user.birthyear || 26\r\n        this.sex = user.sex || 1;\r\n        this.education = user.education || 'higher';\r\n        this.email = user.email || 'tesztelek@ml.hu'\r\n    }\r\n\r\n    getBodyWithUsers(body: ConsultationResult) {\r\n        body.player_id = this.player_id;\r\n        body.host_domain = this.host_domain;\r\n        body.mail = this.email;\r\n        var score: number;\r\n        var scr = body.goal.expert.substring(body.goal.expert.lastIndexOf(\"Elrt pontszm: \") + 15, body.goal.expert.lastIndexOf(\"Elrt pontszm: \") + 25);\r\n        if (scr.includes('.')) {\r\n            score = parseInt(scr.substring(0, scr.indexOf('.')))\r\n        }\r\n        else {\r\n            score = parseInt(scr)\r\n        }\r\n        body.score = score\r\n        body.region = this.region;\r\n        body.sex = this.sex;\r\n        body.age = this.age;\r\n        body.education = this.education\r\n\r\n        //console.log(\"getBodyWithUsers\", body);\r\n        return body;\r\n    }\r\n\r\n}","export const getIntlMessage = async (locale: string): Promise<Record<string, string>> => {\r\n  let messages: Record<string, string> = {};\r\n\r\n  if (locale === 'en') {\r\n    const response = await import(`../assets/locales/en.translation.json`);\r\n    messages = response.default;\r\n  } else if (locale === 'hu') {\r\n    const response = await import(`../assets/locales/hu.translation.json`);\r\n    messages = response.default;\r\n  }\r\n\r\n  return messages;\r\n};\r\n\r\nexport const getIntlMessageFormatted = (message: string, values: string[]): string => {\r\n  return message.replace(/{(\\d+)}/g, (_match, index) => {\r\n    return values[index] || '';\r\n  });\r\n};",".dialog-body {\r\n  background: var(--background-light-bg);\r\n  min-height: 100vh;\r\n  padding-right: 0.9375rem;\r\n  padding-left: 0.9375rem;\r\n  color: var(--text-normal-text);\r\n  display: flex;\r\n}\r\n\r\n.dialog-root {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: var(--background-light-bg);\r\n}\r\n\r\n.content {\r\n  flex: 1 1 auto;\r\n  overflow-y: auto;\r\n}\r\n\r\n.steps {\r\n  margin-bottom: 2.5rem;\r\n  overflow: hidden;\r\n}\r\n","import { Component, Prop, State, Watch, h } from '@stencil/core';\r\nimport { Subject } from 'rxjs';\r\nimport { Answer, ConsultationResult, DialogData, DialogMetadata, Fragment, Result } from '../../interfaces/dialog-interfaces';\r\nimport { User } from '../../interfaces/user';\r\nimport { DialogAsyncService } from '../../services/dialog-async.service';\r\nimport { ElasticService } from '../../services/elastic.service';\r\nimport { HelperService } from '../../services/helper.service';\r\nimport { popoverController } from '@ionic/core';\r\nimport { getIntlMessage } from '../../language/translation';\r\n\r\n@Component({\r\n  tag: 'dialog-component',\r\n  styleUrl: 'dialog-component.css',\r\n  shadow: false,\r\n})\r\nexport class DialogComponent {\r\n  private dialogAsyncService: DialogAsyncService\r\n  private elasticService: ElasticService\r\n  private helperService: HelperService\r\n  private answer$: Subject<any> = new Subject();\r\n  private revoke$: Subject<any> = new Subject();\r\n  private endDate: number;\r\n  private startDate: number = Date.now();\r\n  private user: User;\r\n\r\n  @Prop() locale: string = 'hu';\r\n  @Prop() lastLocale: string = '';\r\n  private messages: Record<string, string> = {};\r\n\r\n  @Prop() caseId: string = '';\r\n  @Prop() iri: string = '';\r\n  @Prop() date: string = '';\r\n\r\n  @Prop() player_id: number;\r\n  @Prop() education?: string;\r\n  @Prop() sex?: number;\r\n  @Prop() birthyear?: number;\r\n  @Prop() region: number;\r\n  @Prop() email: string;\r\n  \r\n  @Prop() params: Map<string, string> = new Map<string, string>();\r\n\r\n  @Prop() dialogData: DialogData;\r\n  @Prop() dialogMetadata: DialogMetadata;\r\n  @State() fragmentData: Fragment[] = [];\r\n  @State() result: Result;\r\n\r\n  @Watch('locale')\r\n  async loadMessages() {\r\n    if (this.locale !== this.lastLocale) {\r\n      this.lastLocale = this.locale;\r\n      this.messages = await getIntlMessage(this.locale);\r\n    }\r\n  }\r\n  \r\n  constructor() {\r\n    this.user = new User(this.region, this.player_id, this.sex, this.education, this.birthyear, this.email)\r\n  }\r\n\r\n  async componentWillLoad() { //same as ngOnInit\r\n    await this.loadMessages();\r\n  }\r\n\r\n  async componentDidLoad() {\r\n    this.initSubscriptions();\r\n    this.user = new User(this.region, this.player_id, this.sex, this.education, this.birthyear, this.email)\r\n    this.dialogAsyncService = new DialogAsyncService();\r\n    this.elasticService = new ElasticService();\r\n    this.helperService = new HelperService(this.user);\r\n    console.log('caseid:', this.caseId)\r\n    console.log('user:', this.user)\r\n    await this.startWithCaseId(this.caseId, this.date);\r\n    await this.startWithIri(this.iri);\r\n    //await this.startWithCaseId('YY0013', null);\r\n    //await this.startWithCaseId('CSA0005', null);\r\n    //await this.startWithCaseId('YY0011', '2022-06-09')\r\n    //await this.startWithIri('xtext://resource/27fb08d0-f1e9-4599-8714-62b469c81143/2021-01-01');\r\n    //await this.startWithIri('xtext://resource/2e5ea4aa-e046-40da-8b75-504c761bc2e9/2022-09-12/draft')\r\n  }\r\n\r\n  answersFromParams(): Answer[] {\r\n    let answers: Answer[] = [];\r\n    console.log(\"params\", this.params)\r\n    let ids: string[] = Object.keys(this.params).filter((p) => { \r\n      return /^q_/.test(p) || /^qq_/.test(p)  \r\n    })\r\n\r\n    ids.forEach((id) => {\r\n      answers.push({iri: id, answer: this.params[id]})\r\n    })\r\n  \r\n    if (this.helperService.region !== null && this.helperService.region !== undefined) {\r\n      answers.push({ iri: 'qq_region', answer: this.helperService.region + '' })\r\n    }\r\n    console.log(\"answers\", answers)\r\n    return answers;\r\n  }\r\n\r\n  async startWithCaseId(caseId: string, date: string) {\r\n    if (caseId) {\r\n      if (!date) {\r\n        const d: Date = new Date();\r\n        date = d.toLocaleDateString('hu-HU').replace(/\\./g, '').replace(/ /g, '-');\r\n      }\r\n      console.log('locale', this.locale)\r\n      this.dialogAsyncService.startWithCaseId(caseId, date, this.locale, this.answersFromParams(), true).subscribe({\r\n        next: res => {\r\n          this.dialogData = res.data;\r\n          console.log(\"in call\", this.dialogData)\r\n          this.dialogMetadata = res.metadata;\r\n          this.fragmentData = [...res.data.step.fragments];\r\n\r\n          this.dialogAsyncService.sessionId = this.dialogData.sessionId;\r\n          this.dialogAsyncService.dialogIri = this.dialogMetadata.iri;\r\n\r\n          this.dialogAsyncService.endpointId = this.dialogData.endpointId;\r\n\r\n          this.dialogAsyncService.getSession().subscribe(res2 => {\r\n            res2.fragments.forEach(fr => {\r\n              if (!res.data.step.fragments.map(fr => fr.iri).includes(fr.iri)) {\r\n                fr.isPre = true;\r\n              }\r\n            });\r\n\r\n            res2.fragments = res2.fragments.filter(fr => {\r\n              if (fr.isPre) {\r\n                const str = fr.iri;\r\n                const n = str.lastIndexOf('/');\r\n                const shortId = str.substring(n + 1);\r\n                return !/^qq_/.test(shortId);\r\n              }\r\n              return true;\r\n            });\r\n\r\n            this.fragmentData = [...res2.fragments];\r\n          });\r\n        },\r\n        error: error => console.error(error)\r\n      });\r\n    }\r\n  }\r\n\r\n  async startWithIri(iri: string) {\r\n    if (iri) {\r\n      this.dialogAsyncService.startWithIri(iri, this.locale, [], true).subscribe({\r\n        next: res => {\r\n          this.dialogData = res.data;\r\n          console.log(\"in call\", this.dialogData)\r\n          this.dialogMetadata = res.metadata;\r\n          this.fragmentData = [...res.data.step.fragments];\r\n\r\n          this.dialogAsyncService.sessionId = this.dialogData.sessionId;\r\n          this.dialogAsyncService.dialogIri = this.dialogMetadata.iri;\r\n\r\n          this.dialogAsyncService.endpointId = this.dialogData.endpointId;\r\n\r\n          this.dialogAsyncService.getSession().subscribe(res2 => {\r\n            res2.fragments.forEach(fr => {\r\n              if (!res.data.step.fragments.map(fr => fr.iri).includes(fr.iri)) {\r\n                fr.isPre = true;\r\n              }\r\n            });\r\n\r\n            res2.fragments = res2.fragments.filter(fr => {\r\n              if (fr.isPre) {\r\n                const str = fr.iri;\r\n                const n = str.lastIndexOf('/');\r\n                const shortId = str.substring(n + 1);\r\n                return !/^qq_/.test(shortId);\r\n              }\r\n              return true;\r\n            });\r\n\r\n            this.fragmentData = [...res2.fragments];\r\n          });\r\n        },\r\n        error: error => console.error(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  initSubscriptions(): void {\r\n    this.answer$.subscribe((d: any) => this.processNextQuestion(d));\r\n    this.revoke$.subscribe((d: any) => this.processRevoke(d));\r\n  }\r\n\r\n  async presentPopover() {\r\n\r\n      const popover = await popoverController.create({\r\n        component: 'ion-popover',\r\n        alignment: \"center\",\r\n        translucent: true,\r\n        showBackdrop: true,\r\n        cssClass: 'full-size error',\r\n        animated: true,\r\n        componentProps: {},\r\n        dismissOnSelect: true\r\n      });\r\n\r\n      const popoverContent = document.createElement('ion-content');\r\n      popoverContent.classList.add(\"ion-padding\");\r\n      popoverContent.innerHTML = this.messages['fatal-error'];\r\n\r\n      popover.appendChild(popoverContent);\r\n\r\n      popover.onDidDismiss().then(() => {\r\n        this.reloadPage();\r\n      });\r\n\r\n      await popover.present();\r\n    \r\n  }\r\n\r\n  reloadPage() {\r\n    location.reload();\r\n  }\r\n\r\n  processNextQuestion(q: any) {\r\n    if (q instanceof Response && !q.ok) {\r\n      console.error(q);\r\n      this.presentPopover();\r\n      return;\r\n    }\r\n\r\n    if (q.fragments.length === 0) {\r\n      console.error(\"tudott hiba\",q)\r\n      this.presentPopover();\r\n      return;\r\n    }\r\n\r\n    \r\n    if (q.fragments[q.fragments.length - 1].type === 'Goal') {\r\n      this.result = q.fragments[q.fragments.length - 1]\r\n      this.endDate = Date.now();\r\n    }\r\n\r\n    console.log(\"before\", this.fragmentData)\r\n    this.fragmentData = [...this.fragmentData, ...q.fragments];\r\n    this.fragmentData = [... new Set(this.fragmentData)];\r\n    console.log(\"after\", this.fragmentData)\r\n\r\n    if ((this.helperService.player_id) && q.fragments[q.fragments.length - 1].type === 'Goal') {\r\n      this.saveAuto()\r\n    }\r\n\r\n    this.scrollToLast();\r\n  }\r\n\r\n  processRevoke(r: any) {\r\n    this.result = null;\r\n    let end = this.fragmentData.findIndex(v => v.iri === r.revokeAnswerIri);\r\n    console.log(\"before\")\r\n    this.fragmentData.forEach(v => console.log(v))\r\n    this.fragmentData = [...this.fragmentData.slice(0, end + 1), ...r.fragments]\r\n    console.log(\"after\")\r\n    this.fragmentData.forEach(v => console.log(v))\r\n\r\n    if (r.fragments[r.fragments.length - 1].type === 'Goal') {\r\n      this.result = { ...r.fragments[r.fragments.length - 1] }\r\n      this.endDate = Date.now();\r\n      if (this.helperService.player_id) {\r\n        this.saveAuto()\r\n      }\r\n    }\r\n\r\n    this.scrollToLast();\r\n  }\r\n\r\n  scrollToLast() {\r\n    let steps = document.getElementsByClassName('step');\r\n\r\n    if (steps.length > 0) {\r\n      let resultContainer = document.getElementsByClassName('result-container');\r\n      if (resultContainer.length > 0) {\r\n\r\n        setTimeout(() => {\r\n          resultContainer[resultContainer.length - 1].scrollIntoView();\r\n        }, 1000)\r\n      } else {\r\n        setTimeout(() => {\r\n          steps[steps.length - 1].scrollIntoView();\r\n        }, 50)\r\n\r\n      }\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  handleAnswer({ detail: answer }: CustomEvent<Answer>) {\r\n    console.log(\"handle answer\", answer)\r\n    this.dialogAsyncService.answer(answer).subscribe(\r\n      {\r\n        next: res => {\r\n          console.log(\"res\", res)\r\n          this.answer$.next(res);\r\n        },\r\n        error: err => {\r\n          this.answer$.next(err);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  handleRevoke({ detail: answer }: CustomEvent<Answer>) {\r\n    this.dialogAsyncService.revokeAnswer(answer).subscribe(\r\n      {\r\n        next: res => {\r\n          res.revokeAnswerIri = answer.iri;\r\n          this.revoke$.next(res);\r\n        },\r\n        error: err => {\r\n          this.revoke$.next(err);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n  saveAuto() {\r\n    console.log(\"saveAuto\")\r\n    let body: ConsultationResult = this.saveDialog();\r\n    body = this.helperService.getBodyWithUsers(body);\r\n    console.log(\"beforesenddata\")\r\n    this.sendData(body)\r\n  }\r\n\r\n\r\n\r\n  saveDialog(): ConsultationResult {\r\n    let body = {} as ConsultationResult\r\n    body.lang = this.locale\r\n\r\n    if (this.dialogMetadata.metadata.title) {\r\n      body.title = this.dialogMetadata.metadata.title\r\n    } else {\r\n      body.title = this.dialogMetadata.label;\r\n    }\r\n\r\n    if (this.dialogMetadata.metadata?.description) {\r\n      body.description = this.dialogMetadata.metadata?.description;\r\n    }\r\n    body.startDate = this.startDate\r\n    body.endDate = this.endDate;\r\n    body.goal = { \"expert\": this.result.labelExpert, \"layman\": this.result.labelLayman }\r\n    body.session = this.dialogData.sessionId\r\n    body.model_id = new RegExp(\"xtext://resource/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})\").exec(this.dialogMetadata.iri)[0]\r\n\r\n    let localPairs = new Array();\r\n    for (let i = 0; i < this.fragmentData.length - 1; ++i) {\r\n      let frag = this.fragmentData[i]\r\n      let questionLayman = frag.labelLayman;\r\n      let questionLabel = frag.label;\r\n      let iri = frag.iri;\r\n      //let questionExpert = frag.labelExpert;\r\n      //let answerExpert;\r\n      let answerLayman;\r\n\r\n      if (frag.type === 'QuestionMenu') {\r\n        answerLayman = frag.optionsLayman[frag.answer]\r\n        //answerExpert = frag.optionsExpert[frag.answer]\r\n      } else if (frag.type === 'QuestionYesNo') {\r\n        if (this.locale === 'en') {\r\n          answerLayman /*= answerExpert*/ = JSON.parse(frag.answer) ? \"Yes\" : \"No\"\r\n        } else {\r\n          answerLayman /*= answerExpert */ = JSON.parse(frag.answer) ? \"Igen\" : \"Nem\"\r\n        }\r\n      } else {\r\n        answerLayman /*= answerExpert*/ = frag.answer;\r\n      }\r\n\r\n      localPairs.push(\r\n        {\r\n          \"question\": { /*\"expert\": questionExpert,*/ \"layman\": questionLayman, \"label\": questionLabel, \"iri\": iri },\r\n          \"answer\": { /*\"expert\": answerExpert,*/ \"layman\": answerLayman }\r\n        }\r\n      )\r\n\r\n    }\r\n    body.pairs = localPairs;\r\n\r\n    return body;\r\n  }\r\n\r\n\r\n  async sendData(body: ConsultationResult) {\r\n    console.log(\"sendData\", body)\r\n\r\n    this.elasticService.sendConsultationData(body).subscribe({\r\n      next: () => { },\r\n      error: error => {\r\n        console.log(error)\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"dialog-body\">\r\n        <div class=\"dialog-root content\">\r\n          <description-component data={this.dialogMetadata} sessionName={this.dialogData?.sessionName}></description-component>\r\n\r\n          <div class=\"steps\">\r\n            {this.fragmentData.map((fragment) => (\r\n              <step-component\r\n                key={`${this.locale}-${fragment}`} locale={this.locale}\r\n                fragment={fragment}\r\n                answerValue={fragment?.answer}\r\n                controlDisabled={fragment.isPre}\r\n                onAnswer={(event) => this.handleAnswer(event)}\r\n                onRevokeAnswer={(event) => this.handleRevoke(event)}\r\n              ></step-component>\r\n            ))}\r\n          </div>\r\n\r\n          {this.result && (\r\n            <result-component\r\n              key={`${this.locale}-${this.result}`} locale={this.locale}\r\n              resultData={this.result}\r\n            ></result-component>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\n",":host {\n  /**\n   * @prop --background: Background of the content\n   *\n   * @prop --color: Color of the content\n   *\n   * @prop --padding-top: Top padding of the content\n   * @prop --padding-end: Right padding if direction is left-to-right, and left padding if direction is right-to-left of the content\n   * @prop --padding-bottom: Bottom padding of the content\n   * @prop --padding-start: Left padding if direction is left-to-right, and right padding if direction is right-to-left of the content\n   *\n   * @prop --keyboard-offset: Keyboard offset of the content\n   *\n   * @prop --offset-top: Offset top of the content\n   * @prop --offset-bottom: Offset bottom of the content\n   */\n  --background: var(--ion-background-color, #fff);\n  --color: var(--ion-text-color, #000);\n  --padding-top: 0px;\n  --padding-bottom: 0px;\n  --padding-start: 0px;\n  --padding-end: 0px;\n  --keyboard-offset: 0px;\n  --offset-top: 0px;\n  --offset-bottom: 0px;\n  --overflow: auto;\n  display: block;\n  position: relative;\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  /* stylelint-disable */\n  margin: 0 !important;\n  padding: 0 !important;\n  /* stylelint-enable */\n  font-family: var(--ion-font-family, inherit);\n  contain: size style;\n}\n\n:host(.ion-color) .inner-scroll {\n  background: var(--ion-color-base);\n  color: var(--ion-color-contrast);\n}\n\n:host(.outer-content) {\n  --background: var(--ion-color-step-50, #f2f2f2);\n}\n\n#background-content {\n  left: 0px;\n  right: 0px;\n  top: calc(var(--offset-top) * -1);\n  bottom: calc(var(--offset-bottom) * -1);\n  position: absolute;\n  background: var(--background);\n}\n\n.inner-scroll {\n  left: 0px;\n  right: 0px;\n  top: calc(var(--offset-top) * -1);\n  bottom: calc(var(--offset-bottom) * -1);\n  -webkit-padding-start: var(--padding-start);\n  padding-inline-start: var(--padding-start);\n  -webkit-padding-end: var(--padding-end);\n  padding-inline-end: var(--padding-end);\n  padding-top: calc(var(--padding-top) + var(--offset-top));\n  padding-bottom: calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));\n  position: absolute;\n  color: var(--color);\n  box-sizing: border-box;\n  overflow: hidden;\n  /**\n   * touch-action: manipulation is an alias\n   * for this, but WebKit has an issue\n   * where pointercancel events are not fired\n   * when scrolling: https://bugs.webkit.org/show_bug.cgi?id=240917\n   * Using the long form below avoids the issue.\n   */\n  touch-action: pan-x pan-y pinch-zoom;\n}\n\n.scroll-y,\n.scroll-x {\n  -webkit-overflow-scrolling: touch;\n  /**\n   * This adds `.inner-scroll` as part of the\n   * stacking context in WebKit. Without it,\n   * children of ion-content are treated as\n   * siblings rather than descendants. This\n   * can result in the children being put\n   * into their own layers, degrading\n   * scrolling performance.\n   *\n   * An optimization called \"layer backing\n   * sharing\" usually kicks in to prevent\n   * this, but having translate3d defeats\n   * this optimization.\n   *\n   * See: https://bugs.webkit.org/show_bug.cgi?id=216701\n   */\n  z-index: 0;\n  will-change: scroll-position;\n}\n\n.scroll-y {\n  overflow-y: var(--overflow);\n  overscroll-behavior-y: contain;\n}\n\n.scroll-x {\n  overflow-x: var(--overflow);\n  overscroll-behavior-x: contain;\n}\n\n.overscroll::before,\n.overscroll::after {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  content: \"\";\n}\n\n.overscroll::before {\n  bottom: -1px;\n}\n\n.overscroll::after {\n  top: -1px;\n}\n\n:host(.content-sizing) {\n  display: flex;\n  flex-direction: column;\n  /**\n   * This resolves a sizing issue in popovers where extra long content\n   * would overflow the popover's height, preventing scrolling. It's a\n   * quirk of flexbox that forces the content to shrink to fit.\n   *\n   * overflow: hidden can't be used here because it prevents the visual\n   * effect from showing on translucent headers.\n   */\n  min-height: 0;\n  contain: none;\n}\n\n:host(.content-sizing) .inner-scroll {\n  position: relative;\n  /**\n   * Because the outer content has display: flex here (to help enable\n   * scrolling in a popover), offsetting via `top` (such as when using\n   * a translucent header) creates white space under the content. Use\n   * a negative margin instead to keep the bottom in place. (A similar\n   * thing happens with `bottom` and footers.)\n   */\n  top: 0;\n  bottom: 0;\n  margin-top: calc(var(--offset-top) * -1);\n  margin-bottom: calc(var(--offset-bottom) * -1);\n}\n\n.transition-effect {\n  display: none;\n  position: absolute;\n  width: 100%;\n  height: 100vh;\n  opacity: 0;\n  pointer-events: none;\n}\n\n:host(.content-ltr) .transition-effect {\n  /* stylelint-disable property-disallowed-list */\n  left: -100%;\n  /* stylelint-enable property-disallowed-list */\n}\n\n:host(.content-rtl) .transition-effect {\n  /* stylelint-disable property-disallowed-list */\n  right: -100%;\n  /* stylelint-enable property-disallowed-list */\n}\n\n.transition-cover {\n  position: absolute;\n  /* stylelint-disable property-disallowed-list */\n  right: 0;\n  /* stylelint-enable property-disallowed-list */\n  width: 100%;\n  height: 100%;\n  background: black;\n  opacity: 0.1;\n}\n\n.transition-shadow {\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-shadow: inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);\n}\n\n:host(.content-ltr) .transition-shadow {\n  /* stylelint-disable property-disallowed-list */\n  right: 0;\n  /* stylelint-enable property-disallowed-list */\n}\n\n:host(.content-rtl) .transition-shadow {\n  /* stylelint-disable property-disallowed-list */\n  left: 0;\n  /* stylelint-enable property-disallowed-list */\n  transform: scaleX(-1);\n}\n\n::slotted([slot=fixed]) {\n  position: absolute;\n  /**\n   * When presenting ion-content inside of an ion-modal, the .inner-scroll\n   * element is composited. In WebKit, the fixed content is not composited\n   * causing it to appear under the main scrollable content as a result.\n   * The fixed content is correctly composited in other browsers. Adding\n   * the translateZ forces the fixed content to be composited so it correctly\n   * shows on top of the scrollable content. Setting a negative z-index will\n   * still allow the fixed content to appear under the scroll content if specified.\n   */\n  transform: translateZ(0);\n}","/*!\n * (C) Ionic http://ionicframework.com - MIT License\n */\nimport { Build, Host, forceUpdate, h, readTask } from '@stencil/core';\nimport { getIonMode } from '../../global/ionic-global';\nimport { componentOnReady } from '../../utils/helpers';\nimport { isPlatform } from '../../utils/platform';\nimport { isRTL } from '../../utils/rtl';\nimport { createColorClasses, hostContext } from '../../utils/theme';\n/**\n * @slot - Content is placed in the scrollable area if provided without a slot.\n * @slot fixed - Should be used for fixed content that should not scroll.\n *\n * @part background - The background of the content.\n * @part scroll - The scrollable container of the content.\n */\nexport class Content {\n  constructor() {\n    this.watchDog = null;\n    this.isScrolling = false;\n    this.lastScroll = 0;\n    this.queued = false;\n    this.cTop = -1;\n    this.cBottom = -1;\n    this.isMainContent = true;\n    this.resizeTimeout = null;\n    // Detail is used in a hot loop in the scroll event, by allocating it here\n    // V8 will be able to inline any read/write to it since it's a monomorphic class.\n    // https://mrale.ph/blog/2015/01/11/whats-up-with-monomorphism.html\n    this.detail = {\n      scrollTop: 0,\n      scrollLeft: 0,\n      type: 'scroll',\n      event: undefined,\n      startX: 0,\n      startY: 0,\n      startTime: 0,\n      currentX: 0,\n      currentY: 0,\n      velocityX: 0,\n      velocityY: 0,\n      deltaX: 0,\n      deltaY: 0,\n      currentTime: 0,\n      data: undefined,\n      isScrolling: true,\n    };\n    this.color = undefined;\n    this.fullscreen = false;\n    this.forceOverscroll = undefined;\n    this.scrollX = false;\n    this.scrollY = true;\n    this.scrollEvents = false;\n  }\n  connectedCallback() {\n    this.isMainContent = this.el.closest('ion-menu, ion-popover, ion-modal') === null;\n  }\n  disconnectedCallback() {\n    this.onScrollEnd();\n  }\n  onAppLoad() {\n    this.resize();\n  }\n  /**\n   * Rotating certain devices can update\n   * the safe area insets. As a result,\n   * the fullscreen feature on ion-content\n   * needs to be recalculated.\n   *\n   * We listen for \"resize\" because we\n   * do not care what the orientation of\n   * the device is. Other APIs\n   * such as ScreenOrientation or\n   * the deviceorientation event must have\n   * permission from the user first whereas\n   * the \"resize\" event does not.\n   *\n   * We also throttle the callback to minimize\n   * thrashing when quickly resizing a window.\n   */\n  onResize() {\n    if (this.resizeTimeout) {\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = null;\n    }\n    this.resizeTimeout = setTimeout(() => {\n      /**\n       * Resize should only happen\n       * if the content is visible.\n       * When the content is hidden\n       * then offsetParent will be null.\n       */\n      if (this.el.offsetParent === null) {\n        return;\n      }\n      this.resize();\n    }, 100);\n  }\n  shouldForceOverscroll() {\n    const { forceOverscroll } = this;\n    const mode = getIonMode(this);\n    return forceOverscroll === undefined ? mode === 'ios' && isPlatform('ios') : forceOverscroll;\n  }\n  resize() {\n    /**\n     * Only force update if the component is rendered in a browser context.\n     * Using `forceUpdate` in a server context with pre-rendering can lead to an infinite loop.\n     * The `hydrateDocument` function in `@stencil/core` will render the `ion-content`, but\n     * `forceUpdate` will trigger another render, locking up the server.\n     *\n     * TODO: Remove if STENCIL-834 determines Stencil will account for this.\n     */\n    if (Build.isBrowser) {\n      if (this.fullscreen) {\n        readTask(() => this.readDimensions());\n      }\n      else if (this.cTop !== 0 || this.cBottom !== 0) {\n        this.cTop = this.cBottom = 0;\n        forceUpdate(this);\n      }\n    }\n  }\n  readDimensions() {\n    const page = getPageElement(this.el);\n    const top = Math.max(this.el.offsetTop, 0);\n    const bottom = Math.max(page.offsetHeight - top - this.el.offsetHeight, 0);\n    const dirty = top !== this.cTop || bottom !== this.cBottom;\n    if (dirty) {\n      this.cTop = top;\n      this.cBottom = bottom;\n      forceUpdate(this);\n    }\n  }\n  onScroll(ev) {\n    const timeStamp = Date.now();\n    const shouldStart = !this.isScrolling;\n    this.lastScroll = timeStamp;\n    if (shouldStart) {\n      this.onScrollStart();\n    }\n    if (!this.queued && this.scrollEvents) {\n      this.queued = true;\n      readTask((ts) => {\n        this.queued = false;\n        this.detail.event = ev;\n        updateScrollDetail(this.detail, this.scrollEl, ts, shouldStart);\n        this.ionScroll.emit(this.detail);\n      });\n    }\n  }\n  /**\n   * Get the element where the actual scrolling takes place.\n   * This element can be used to subscribe to `scroll` events or manually modify\n   * `scrollTop`. However, it's recommended to use the API provided by `ion-content`:\n   *\n   * i.e. Using `ionScroll`, `ionScrollStart`, `ionScrollEnd` for scrolling events\n   * and `scrollToPoint()` to scroll the content into a certain point.\n   */\n  async getScrollElement() {\n    /**\n     * If this gets called in certain early lifecycle hooks (ex: Vue onMounted),\n     * scrollEl won't be defined yet with the custom elements build, so wait for it to load in.\n     */\n    if (!this.scrollEl) {\n      await new Promise((resolve) => componentOnReady(this.el, resolve));\n    }\n    return Promise.resolve(this.scrollEl);\n  }\n  /**\n   * Returns the background content element.\n   * @internal\n   */\n  async getBackgroundElement() {\n    if (!this.backgroundContentEl) {\n      await new Promise((resolve) => componentOnReady(this.el, resolve));\n    }\n    return Promise.resolve(this.backgroundContentEl);\n  }\n  /**\n   * Scroll to the top of the component.\n   *\n   * @param duration The amount of time to take scrolling to the top. Defaults to `0`.\n   */\n  scrollToTop(duration = 0) {\n    return this.scrollToPoint(undefined, 0, duration);\n  }\n  /**\n   * Scroll to the bottom of the component.\n   *\n   * @param duration The amount of time to take scrolling to the bottom. Defaults to `0`.\n   */\n  async scrollToBottom(duration = 0) {\n    const scrollEl = await this.getScrollElement();\n    const y = scrollEl.scrollHeight - scrollEl.clientHeight;\n    return this.scrollToPoint(undefined, y, duration);\n  }\n  /**\n   * Scroll by a specified X/Y distance in the component.\n   *\n   * @param x The amount to scroll by on the horizontal axis.\n   * @param y The amount to scroll by on the vertical axis.\n   * @param duration The amount of time to take scrolling by that amount.\n   */\n  async scrollByPoint(x, y, duration) {\n    const scrollEl = await this.getScrollElement();\n    return this.scrollToPoint(x + scrollEl.scrollLeft, y + scrollEl.scrollTop, duration);\n  }\n  /**\n   * Scroll to a specified X/Y location in the component.\n   *\n   * @param x The point to scroll to on the horizontal axis.\n   * @param y The point to scroll to on the vertical axis.\n   * @param duration The amount of time to take scrolling to that point. Defaults to `0`.\n   */\n  async scrollToPoint(x, y, duration = 0) {\n    const el = await this.getScrollElement();\n    if (duration < 32) {\n      if (y != null) {\n        el.scrollTop = y;\n      }\n      if (x != null) {\n        el.scrollLeft = x;\n      }\n      return;\n    }\n    let resolve;\n    let startTime = 0;\n    const promise = new Promise((r) => (resolve = r));\n    const fromY = el.scrollTop;\n    const fromX = el.scrollLeft;\n    const deltaY = y != null ? y - fromY : 0;\n    const deltaX = x != null ? x - fromX : 0;\n    // scroll loop\n    const step = (timeStamp) => {\n      const linearTime = Math.min(1, (timeStamp - startTime) / duration) - 1;\n      const easedT = Math.pow(linearTime, 3) + 1;\n      if (deltaY !== 0) {\n        el.scrollTop = Math.floor(easedT * deltaY + fromY);\n      }\n      if (deltaX !== 0) {\n        el.scrollLeft = Math.floor(easedT * deltaX + fromX);\n      }\n      if (easedT < 1) {\n        // do not use DomController here\n        // must use nativeRaf in order to fire in the next frame\n        requestAnimationFrame(step);\n      }\n      else {\n        resolve();\n      }\n    };\n    // chill out for a frame first\n    requestAnimationFrame((ts) => {\n      startTime = ts;\n      step(ts);\n    });\n    return promise;\n  }\n  onScrollStart() {\n    this.isScrolling = true;\n    this.ionScrollStart.emit({\n      isScrolling: true,\n    });\n    if (this.watchDog) {\n      clearInterval(this.watchDog);\n    }\n    // watchdog\n    this.watchDog = setInterval(() => {\n      if (this.lastScroll < Date.now() - 120) {\n        this.onScrollEnd();\n      }\n    }, 100);\n  }\n  onScrollEnd() {\n    if (this.watchDog)\n      clearInterval(this.watchDog);\n    this.watchDog = null;\n    if (this.isScrolling) {\n      this.isScrolling = false;\n      this.ionScrollEnd.emit({\n        isScrolling: false,\n      });\n    }\n  }\n  render() {\n    const { isMainContent, scrollX, scrollY, el } = this;\n    const rtl = isRTL(el) ? 'rtl' : 'ltr';\n    const mode = getIonMode(this);\n    const forceOverscroll = this.shouldForceOverscroll();\n    const transitionShadow = mode === 'ios';\n    const TagType = isMainContent ? 'main' : 'div';\n    this.resize();\n    return (h(Host, { class: createColorClasses(this.color, {\n        [mode]: true,\n        'content-sizing': hostContext('ion-popover', this.el),\n        overscroll: forceOverscroll,\n        [`content-${rtl}`]: true,\n      }), style: {\n        '--offset-top': `${this.cTop}px`,\n        '--offset-bottom': `${this.cBottom}px`,\n      } }, h(\"div\", { ref: (el) => (this.backgroundContentEl = el), id: \"background-content\", part: \"background\" }), h(TagType, { class: {\n        'inner-scroll': true,\n        'scroll-x': scrollX,\n        'scroll-y': scrollY,\n        overscroll: (scrollX || scrollY) && forceOverscroll,\n      }, ref: (scrollEl) => (this.scrollEl = scrollEl), onScroll: this.scrollEvents ? (ev) => this.onScroll(ev) : undefined, part: \"scroll\" }, h(\"slot\", null)), transitionShadow ? (h(\"div\", { class: \"transition-effect\" }, h(\"div\", { class: \"transition-cover\" }), h(\"div\", { class: \"transition-shadow\" }))) : null, h(\"slot\", { name: \"fixed\" })));\n  }\n  static get is() { return \"ion-content\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"content.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"content.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"color\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"Color\",\n          \"resolved\": \"\\\"danger\\\" | \\\"dark\\\" | \\\"light\\\" | \\\"medium\\\" | \\\"primary\\\" | \\\"secondary\\\" | \\\"success\\\" | \\\"tertiary\\\" | \\\"warning\\\" | string & Record<never, never> | undefined\",\n          \"references\": {\n            \"Color\": {\n              \"location\": \"import\",\n              \"path\": \"../../interface\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The color to use from your application's color palette.\\nDefault options are: `\\\"primary\\\"`, `\\\"secondary\\\"`, `\\\"tertiary\\\"`, `\\\"success\\\"`, `\\\"warning\\\"`, `\\\"danger\\\"`, `\\\"light\\\"`, `\\\"medium\\\"`, and `\\\"dark\\\"`.\\nFor more information on colors, see [theming](/docs/theming/basics).\"\n        },\n        \"attribute\": \"color\",\n        \"reflect\": true\n      },\n      \"fullscreen\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"If `true`, the content will scroll behind the headers\\nand footers. This effect can easily be seen by setting the toolbar\\nto transparent.\"\n        },\n        \"attribute\": \"fullscreen\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      },\n      \"forceOverscroll\": {\n        \"type\": \"boolean\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean | undefined\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"If `true` and the content does not cause an overflow scroll, the scroll interaction will cause a bounce.\\nIf the content exceeds the bounds of ionContent, nothing will change.\\nNote, this does not disable the system bounce on iOS. That is an OS level setting.\"\n        },\n        \"attribute\": \"force-overscroll\",\n        \"reflect\": false\n      },\n      \"scrollX\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"If you want to enable the content scrolling in the X axis, set this property to `true`.\"\n        },\n        \"attribute\": \"scroll-x\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      },\n      \"scrollY\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"If you want to disable the content scrolling in the Y axis, set this property to `false`.\"\n        },\n        \"attribute\": \"scroll-y\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"scrollEvents\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Because of performance reasons, ionScroll events are disabled by default, in order to enable them\\nand start listening from (ionScroll), set this property to `true`.\"\n        },\n        \"attribute\": \"scroll-events\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      }\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"ionScrollStart\",\n        \"name\": \"ionScrollStart\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Emitted when the scroll has started. This event is disabled by default.\\nSet `scrollEvents` to `true` to enable.\"\n        },\n        \"complexType\": {\n          \"original\": \"ScrollBaseDetail\",\n          \"resolved\": \"ScrollBaseDetail\",\n          \"references\": {\n            \"ScrollBaseDetail\": {\n              \"location\": \"import\",\n              \"path\": \"./content-interface\"\n            }\n          }\n        }\n      }, {\n        \"method\": \"ionScroll\",\n        \"name\": \"ionScroll\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Emitted while scrolling. This event is disabled by default.\\nSet `scrollEvents` to `true` to enable.\"\n        },\n        \"complexType\": {\n          \"original\": \"ScrollDetail\",\n          \"resolved\": \"ScrollDetail\",\n          \"references\": {\n            \"ScrollDetail\": {\n              \"location\": \"import\",\n              \"path\": \"./content-interface\"\n            }\n          }\n        }\n      }, {\n        \"method\": \"ionScrollEnd\",\n        \"name\": \"ionScrollEnd\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Emitted when the scroll has ended. This event is disabled by default.\\nSet `scrollEvents` to `true` to enable.\"\n        },\n        \"complexType\": {\n          \"original\": \"ScrollBaseDetail\",\n          \"resolved\": \"ScrollBaseDetail\",\n          \"references\": {\n            \"ScrollBaseDetail\": {\n              \"location\": \"import\",\n              \"path\": \"./content-interface\"\n            }\n          }\n        }\n      }];\n  }\n  static get methods() {\n    return {\n      \"getScrollElement\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<HTMLElement>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            },\n            \"HTMLElement\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<HTMLElement>\"\n        },\n        \"docs\": {\n          \"text\": \"Get the element where the actual scrolling takes place.\\nThis element can be used to subscribe to `scroll` events or manually modify\\n`scrollTop`. However, it's recommended to use the API provided by `ion-content`:\\n\\ni.e. Using `ionScroll`, `ionScrollStart`, `ionScrollEnd` for scrolling events\\nand `scrollToPoint()` to scroll the content into a certain point.\",\n          \"tags\": []\n        }\n      },\n      \"getBackgroundElement\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<HTMLElement>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            },\n            \"HTMLElement\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<HTMLElement>\"\n        },\n        \"docs\": {\n          \"text\": \"Returns the background content element.\",\n          \"tags\": [{\n              \"name\": \"internal\",\n              \"text\": undefined\n            }]\n        }\n      },\n      \"scrollToTop\": {\n        \"complexType\": {\n          \"signature\": \"(duration?: number) => Promise<void>\",\n          \"parameters\": [{\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"duration The amount of time to take scrolling to the top. Defaults to `0`.\"\n                }],\n              \"text\": \"The amount of time to take scrolling to the top. Defaults to `0`.\"\n            }],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Scroll to the top of the component.\",\n          \"tags\": [{\n              \"name\": \"param\",\n              \"text\": \"duration The amount of time to take scrolling to the top. Defaults to `0`.\"\n            }]\n        }\n      },\n      \"scrollToBottom\": {\n        \"complexType\": {\n          \"signature\": \"(duration?: number) => Promise<void>\",\n          \"parameters\": [{\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"duration The amount of time to take scrolling to the bottom. Defaults to `0`.\"\n                }],\n              \"text\": \"The amount of time to take scrolling to the bottom. Defaults to `0`.\"\n            }],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Scroll to the bottom of the component.\",\n          \"tags\": [{\n              \"name\": \"param\",\n              \"text\": \"duration The amount of time to take scrolling to the bottom. Defaults to `0`.\"\n            }]\n        }\n      },\n      \"scrollByPoint\": {\n        \"complexType\": {\n          \"signature\": \"(x: number, y: number, duration: number) => Promise<void>\",\n          \"parameters\": [{\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"x The amount to scroll by on the horizontal axis.\"\n                }],\n              \"text\": \"The amount to scroll by on the horizontal axis.\"\n            }, {\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"y The amount to scroll by on the vertical axis.\"\n                }],\n              \"text\": \"The amount to scroll by on the vertical axis.\"\n            }, {\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"duration The amount of time to take scrolling by that amount.\"\n                }],\n              \"text\": \"The amount of time to take scrolling by that amount.\"\n            }],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Scroll by a specified X/Y distance in the component.\",\n          \"tags\": [{\n              \"name\": \"param\",\n              \"text\": \"x The amount to scroll by on the horizontal axis.\"\n            }, {\n              \"name\": \"param\",\n              \"text\": \"y The amount to scroll by on the vertical axis.\"\n            }, {\n              \"name\": \"param\",\n              \"text\": \"duration The amount of time to take scrolling by that amount.\"\n            }]\n        }\n      },\n      \"scrollToPoint\": {\n        \"complexType\": {\n          \"signature\": \"(x: number | undefined | null, y: number | undefined | null, duration?: number) => Promise<void>\",\n          \"parameters\": [{\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"x The point to scroll to on the horizontal axis.\"\n                }],\n              \"text\": \"The point to scroll to on the horizontal axis.\"\n            }, {\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"y The point to scroll to on the vertical axis.\"\n                }],\n              \"text\": \"The point to scroll to on the vertical axis.\"\n            }, {\n              \"tags\": [{\n                  \"name\": \"param\",\n                  \"text\": \"duration The amount of time to take scrolling to that point. Defaults to `0`.\"\n                }],\n              \"text\": \"The amount of time to take scrolling to that point. Defaults to `0`.\"\n            }],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Scroll to a specified X/Y location in the component.\",\n          \"tags\": [{\n              \"name\": \"param\",\n              \"text\": \"x The point to scroll to on the horizontal axis.\"\n            }, {\n              \"name\": \"param\",\n              \"text\": \"y The point to scroll to on the vertical axis.\"\n            }, {\n              \"name\": \"param\",\n              \"text\": \"duration The amount of time to take scrolling to that point. Defaults to `0`.\"\n            }]\n        }\n      }\n    };\n  }\n  static get elementRef() { return \"el\"; }\n  static get listeners() {\n    return [{\n        \"name\": \"appload\",\n        \"method\": \"onAppLoad\",\n        \"target\": \"window\",\n        \"capture\": false,\n        \"passive\": false\n      }, {\n        \"name\": \"resize\",\n        \"method\": \"onResize\",\n        \"target\": \"window\",\n        \"capture\": false,\n        \"passive\": true\n      }];\n  }\n}\nconst getParentElement = (el) => {\n  var _a;\n  if (el.parentElement) {\n    // normal element with a parent element\n    return el.parentElement;\n  }\n  if ((_a = el.parentNode) === null || _a === void 0 ? void 0 : _a.host) {\n    // shadow dom's document fragment\n    return el.parentNode.host;\n  }\n  return null;\n};\nconst getPageElement = (el) => {\n  const tabs = el.closest('ion-tabs');\n  if (tabs) {\n    return tabs;\n  }\n  /**\n   * If we're in a popover, we need to use its wrapper so we can account for space\n   * between the popover and the edges of the screen. But if the popover contains\n   * its own page element, we should use that instead.\n   */\n  const page = el.closest('ion-app, ion-page, .ion-page, page-inner, .popover-content');\n  if (page) {\n    return page;\n  }\n  return getParentElement(el);\n};\n// ******** DOM READ ****************\nconst updateScrollDetail = (detail, el, timestamp, shouldStart) => {\n  const prevX = detail.currentX;\n  const prevY = detail.currentY;\n  const prevT = detail.currentTime;\n  const currentX = el.scrollLeft;\n  const currentY = el.scrollTop;\n  const timeDelta = timestamp - prevT;\n  if (shouldStart) {\n    // remember the start positions\n    detail.startTime = timestamp;\n    detail.startX = currentX;\n    detail.startY = currentY;\n    detail.velocityX = detail.velocityY = 0;\n  }\n  detail.currentTime = timestamp;\n  detail.currentX = detail.scrollLeft = currentX;\n  detail.currentY = detail.scrollTop = currentY;\n  detail.deltaX = currentX - detail.startX;\n  detail.deltaY = currentY - detail.startY;\n  if (timeDelta > 0 && timeDelta < 100) {\n    const velocityX = (currentX - prevX) / timeDelta;\n    const velocityY = (currentY - prevY) / timeDelta;\n    detail.velocityX = velocityX * 0.7 + detail.velocityX * 0.3;\n    detail.velocityY = velocityY * 0.7 + detail.velocityY * 0.3;\n  }\n};\n",":host {\r\n  display: block;\r\n}\r\n\r\n.result-container {\r\n  background: var(--background-pastell-bg);\r\n  border: 1px solid var(--brand-main-brand);\r\n  border-radius: 2px;\r\n  padding: 0.5625rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 1.25rem;\r\n}\r\n\r\n.result-with-tag {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 0.625rem;\r\n}\r\n\r\n.fade-in.top {\r\n  transition: 0.5s all ease-in-out;\r\n  transform: translate3d(0, -50px, 0);\r\n  opacity: 0;\r\n}\r\n\r\n.fade-in.show {\r\n  opacity: 1;\r\n  transform: translate3d(0, 0, 0);\r\n}\r\n","import { Component, Prop, State, Watch, h, Element } from '@stencil/core';\r\nimport { Result } from '../../interfaces/dialog-interfaces';\r\nimport { getIntlMessage } from '../../language/translation';\r\n\r\n@Component({\r\n  tag: 'result-component',\r\n  styleUrl: 'result-component.css',\r\n  shadow: false,\r\n})\r\nexport class ResultComponent {\r\n  resultD: Result;\r\n  result: string;\r\n  details: string[];\r\n  tag: string = 'neutral';\r\n\r\n  resultFailTags: string[] = [\"nem jogosult\", \"not eligible\", \"negatv\", \"negative\", \"fail\"];\r\n  resultSuccessTags: string[] = [\"jogosult\", \"eligible\", \"pozitv\", \"positive\", \"success\"];\r\n  private messages: Record<string, string> = {};\r\n\r\n  @Prop({ mutable: true }) resultData: Result;\r\n  @Prop() locale: string = 'hu';\r\n  @Prop() lastLocale: string = '';\r\n\r\n  @State() isDetailOpen: boolean = false;\r\n  @State() showContent = false;\r\n\r\n  @Element() private element: HTMLElement;\r\n\r\n  \r\n  @Watch('locale')\r\n  async loadMessages() {\r\n    if (this.locale !== this.lastLocale) {\r\n      this.lastLocale = this.locale;\r\n      this.messages = await getIntlMessage(this.locale);\r\n    }\r\n  }\r\n\r\n  async componentWillLoad() { //same as ngOnInit\r\n    console.log(\"componentWillLoad-result\")\r\n    this.showContent = false;\r\n    this.resultD = { ...this.resultData };\r\n    this.makeResultLabel('');\r\n    this.setTag();\r\n    this.makeResultLabel('layman');\r\n\r\n    await this.loadMessages();\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n      this.setFocus();\r\n    }, 1000);\r\n  }\r\n\r\n  setFocus() {\r\n    setTimeout(() => {\r\n      console.log(\"setFocus result\")\r\n      const resultContainer = this.element.querySelector('div');\r\n      resultContainer.focus();\r\n      console.log(\"result focus element\", resultContainer)\r\n    }, 1000)\r\n  }\r\n\r\n  makeResultLabel(type: string) {\r\n    let tmp: string[];\r\n\r\n    switch (type) {\r\n      case '':\r\n        tmp = this.resultD.label.split('...');\r\n        break;\r\n      case 'expert':\r\n        tmp = this.resultD.labelExpert.split('...');\r\n        break;\r\n      case 'layman':\r\n        tmp = this.resultD.labelLayman.split('...');\r\n        break;\r\n    }\r\n\r\n    this.result = tmp[0];\r\n    this.details = tmp[1] !== undefined ? [tmp[1]] : null;\r\n\r\n    if (this.details) {\r\n      this.details = this.details[0].split('\\n');\r\n      this.details.shift();\r\n      this.details.pop();\r\n    }\r\n  }\r\n\r\n  setTag() {\r\n    if (this.resultD.metadata) {\r\n      if (this.resultD.metadata.tag.length === 0) {\r\n        this.tag = 'neutral';\r\n      } else {\r\n        this.resultD.metadata.tag.forEach((tag) => {\r\n\r\n          this.tag = this.resultFailTags.indexOf(tag) !== -1 ? 'negative' : '';\r\n\r\n          if (this.tag === '') {\r\n            this.tag = this.resultSuccessTags.indexOf(tag) !== -1 ? 'positive' : 'neutral'\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  @Watch('resultData')\r\n  handleResultValueChange() {\r\n    this.showContent = false;\r\n    console.log(\"handleResultValueChangeresult\", this.resultData)\r\n    this.resultD = { ...this.resultData };\r\n    this.makeResultLabel('');\r\n    this.setTag();\r\n    this.makeResultLabel('layman');\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n      this.setFocus();\r\n    }, 1000);\r\n  }\r\n\r\n \r\n\r\n  // @Watch('details')\r\n  toggleDetails() {\r\n    this.isDetailOpen = !this.isDetailOpen;\r\n  }\r\n\r\n  render() {\r\n    const svgWidth = '1.5em'; // A szlessg belltsa\r\n    const svgColor = \"#2B7371\"; // A szn belltsa\r\n    const svgPathDown = \"M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z\";\r\n    const svgPathUp = \"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z\";\r\n    const svgPathCheck = \"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\";\r\n    const svgPathBan = \"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z\";\r\n    const svgViewBox = \"0 0 512 512\"\r\n    const svgTarget = \"M36.8904 0.0493164L30.9054 5.2914L30.9467 8.92371L16.8302 21.224C16.4774 21.5422 16.496 22.1159 16.8715 22.5449C17.25 22.9773 17.8322 23.0671 18.1923 22.7513L32.1437 10.5748L36.0236 11.1526L42.0087 5.95182L36.9317 5.16757L36.8904 0.0493164ZM16.7064 6.61224C7.51058 6.61224 0.0720215 14.0921 0.0720215 23.2878C0.0720215 32.4836 7.51058 39.9222 16.7064 39.9222C25.9021 39.9222 33.382 32.4836 33.382 23.2878C33.382 20.1793 32.5161 17.2787 31.0292 14.7849L27.8922 17.5092C28.7739 19.2455 29.2543 21.2083 29.2543 23.2878C29.2543 30.3199 23.5733 36.0009 16.5412 36.0009C9.50919 36.0009 3.78688 30.3199 3.78688 23.2878C3.78688 16.2558 9.50919 10.5335 16.5412 10.5335C19.1249 10.5335 21.5128 11.3125 23.5169 12.6386L26.6539 9.91434C23.875 7.84239 20.4317 6.61224 16.7064 6.61224ZM16.5412 13.8356C11.363 13.9086 7.19918 18.1504 7.21281 23.3291C7.22656 28.5501 11.4853 32.7539 16.7064 32.7401C21.9274 32.7264 26.1311 28.5089 26.1173 23.2878C26.114 22.0152 25.8759 20.8059 25.4156 19.6968L24.0123 20.8526C24.258 21.6079 24.4228 22.4104 24.425 23.2466C24.4362 27.5305 20.9903 30.9952 16.7064 31.0065C12.4224 31.0177 8.9577 27.5718 8.94642 23.2878C8.93519 19.0386 12.3337 15.5466 16.5825 15.4866H16.6651C17.7036 15.4839 18.691 15.6945 19.5957 16.0645L20.9578 14.8675C19.6541 14.1947 18.1889 13.8315 16.6238 13.8356H16.5412ZM16.5 18.7475C16.2329 18.7624 15.9665 18.8159 15.7157 18.8713C14.8472 19.063 14.0843 19.4927 13.4868 20.1096C12.8893 20.7264 12.4629 21.5042 12.2898 22.3798C12.2315 22.6709 12.2064 22.9796 12.2072 23.2878C12.2081 23.5986 12.2294 23.9028 12.2898 24.1959C12.4113 24.7817 12.6666 25.3276 12.9915 25.8057C13.3147 26.2849 13.7104 26.6793 14.1885 27.0027C14.9057 27.4878 15.774 27.7894 16.7064 27.787C17.2628 27.7855 17.7826 27.686 18.2749 27.498C18.6073 27.3711 18.9344 27.201 19.2242 27.0027C19.4727 26.8326 19.6749 26.6398 19.8846 26.4248C20.0877 26.2206 20.2601 26.0043 20.4212 25.7644C20.7446 25.2814 21.004 24.7425 21.1229 24.1547C21.177 23.8872 21.2021 23.6106 21.2055 23.3291L19.637 24.6912C18.8341 25.3973 17.2442 24.865 16.0459 23.4942C14.8573 22.1346 14.5616 20.4953 15.3442 19.7794L16.5 18.7475Z\"\r\n\r\n    return (\r\n      <div class={`result-container fade-in top ${this.showContent ? 'show' : ''}`}>\r\n        <div style={{ alignSelf: 'center' }}>\r\n          <svg width=\"43\" height=\"40\" viewBox=\"0 0 43 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <g clip-path=\"url(#clip0_1531_83)\">\r\n              <path d={svgTarget} fill={svgColor} />\r\n            </g>\r\n            <defs>\r\n              <clipPath id=\"clip0_1531_83\">\r\n                <rect width=\"42.0638\" height=\"40\" fill=\"white\" />\r\n              </clipPath>\r\n            </defs>\r\n          </svg>\r\n        </div>\r\n        <div class=\"result-with-tag\">\r\n          <div innerHTML={this.result}></div>\r\n          {this.tag === 'positive' && (\r\n            <div>\r\n              <svg viewBox={svgViewBox} width={svgWidth}>\r\n                <path d={svgPathCheck} fill={svgColor} />\r\n              </svg>\r\n            </div>\r\n          )}\r\n          {this.tag === 'negative' && (\r\n            <div>\r\n              <svg viewBox={svgViewBox} width={svgWidth} >\r\n                <path d={svgPathBan} fill=\"#FD1313\" />\r\n              </svg>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {this.details && (\r\n          <div style={{ marginTop: '0.625em' }}>\r\n            <span class=\"clickable\" style={{ color: '#2B7371', fontWeight: '600', marginRight: '0.9375em' }} onClick={() => this.toggleDetails()}>{this.messages['result-more']}</span>\r\n            {!this.isDetailOpen ? (\r\n              <svg class=\"clickable\" width={svgWidth} viewBox={svgViewBox} onClick={() => this.toggleDetails()} >\r\n                <path d={svgPathDown} fill={svgColor} />\r\n              </svg>\r\n            ) : (\r\n              <svg class=\"clickable\" width={svgWidth} viewBox={svgViewBox} onClick={() => this.toggleDetails()} >\r\n                <path d={svgPathUp} fill={svgColor} />\r\n              </svg>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {this.isDetailOpen && (\r\n          <div style={{ marginTop: '0.625em' }}>\r\n            <ul style={{ marginBottom: '0' }}>\r\n              {this.details.map((d: string) => (\r\n                <li innerHTML={d}></li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","export var HOOKS = [\n    \"onChange\",\n    \"onClose\",\n    \"onDayCreate\",\n    \"onDestroy\",\n    \"onKeyDown\",\n    \"onMonthChange\",\n    \"onOpen\",\n    \"onParseConfig\",\n    \"onReady\",\n    \"onValueUpdate\",\n    \"onYearChange\",\n    \"onPreCalendarPosition\",\n];\nexport var defaults = {\n    _disable: [],\n    allowInput: false,\n    allowInvalidPreload: false,\n    altFormat: \"F j, Y\",\n    altInput: false,\n    altInputClass: \"form-control input\",\n    animate: typeof window === \"object\" &&\n        window.navigator.userAgent.indexOf(\"MSIE\") === -1,\n    ariaDateFormat: \"F j, Y\",\n    autoFillDefaultTime: true,\n    clickOpens: true,\n    closeOnSelect: true,\n    conjunction: \", \",\n    dateFormat: \"Y-m-d\",\n    defaultHour: 12,\n    defaultMinute: 0,\n    defaultSeconds: 0,\n    disable: [],\n    disableMobile: false,\n    enableSeconds: false,\n    enableTime: false,\n    errorHandler: function (err) {\n        return typeof console !== \"undefined\" && console.warn(err);\n    },\n    getWeek: function (givenDate) {\n        var date = new Date(givenDate.getTime());\n        date.setHours(0, 0, 0, 0);\n        date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n        var week1 = new Date(date.getFullYear(), 0, 4);\n        return (1 +\n            Math.round(((date.getTime() - week1.getTime()) / 86400000 -\n                3 +\n                ((week1.getDay() + 6) % 7)) /\n                7));\n    },\n    hourIncrement: 1,\n    ignoredFocusElements: [],\n    inline: false,\n    locale: \"default\",\n    minuteIncrement: 5,\n    mode: \"single\",\n    monthSelectorType: \"dropdown\",\n    nextArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>\",\n    noCalendar: false,\n    now: new Date(),\n    onChange: [],\n    onClose: [],\n    onDayCreate: [],\n    onDestroy: [],\n    onKeyDown: [],\n    onMonthChange: [],\n    onOpen: [],\n    onParseConfig: [],\n    onReady: [],\n    onValueUpdate: [],\n    onYearChange: [],\n    onPreCalendarPosition: [],\n    plugins: [],\n    position: \"auto\",\n    positionElement: undefined,\n    prevArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>\",\n    shorthandCurrentMonth: false,\n    showMonths: 1,\n    static: false,\n    time_24hr: false,\n    weekNumbers: false,\n    wrap: false,\n};\n","export var english = {\n    weekdays: {\n        shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n        longhand: [\n            \"Sunday\",\n            \"Monday\",\n            \"Tuesday\",\n            \"Wednesday\",\n            \"Thursday\",\n            \"Friday\",\n            \"Saturday\",\n        ],\n    },\n    months: {\n        shorthand: [\n            \"Jan\",\n            \"Feb\",\n            \"Mar\",\n            \"Apr\",\n            \"May\",\n            \"Jun\",\n            \"Jul\",\n            \"Aug\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\",\n        ],\n        longhand: [\n            \"January\",\n            \"February\",\n            \"March\",\n            \"April\",\n            \"May\",\n            \"June\",\n            \"July\",\n            \"August\",\n            \"September\",\n            \"October\",\n            \"November\",\n            \"December\",\n        ],\n    },\n    daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n    firstDayOfWeek: 0,\n    ordinal: function (nth) {\n        var s = nth % 100;\n        if (s > 3 && s < 21)\n            return \"th\";\n        switch (s % 10) {\n            case 1:\n                return \"st\";\n            case 2:\n                return \"nd\";\n            case 3:\n                return \"rd\";\n            default:\n                return \"th\";\n        }\n    },\n    rangeSeparator: \" to \",\n    weekAbbreviation: \"Wk\",\n    scrollTitle: \"Scroll to increment\",\n    toggleTitle: \"Click to toggle\",\n    amPM: [\"AM\", \"PM\"],\n    yearAriaLabel: \"Year\",\n    monthAriaLabel: \"Month\",\n    hourAriaLabel: \"Hour\",\n    minuteAriaLabel: \"Minute\",\n    time_24hr: false,\n};\nexport default english;\n","export var pad = function (number, length) {\n    if (length === void 0) { length = 2; }\n    return (\"000\" + number).slice(length * -1);\n};\nexport var int = function (bool) { return (bool === true ? 1 : 0); };\nexport function debounce(fn, wait) {\n    var t;\n    return function () {\n        var _this = this;\n        var args = arguments;\n        clearTimeout(t);\n        t = setTimeout(function () { return fn.apply(_this, args); }, wait);\n    };\n}\nexport var arrayify = function (obj) {\n    return obj instanceof Array ? obj : [obj];\n};\n","export function toggleClass(elem, className, bool) {\n    if (bool === true)\n        return elem.classList.add(className);\n    elem.classList.remove(className);\n}\nexport function createElement(tag, className, content) {\n    var e = window.document.createElement(tag);\n    className = className || \"\";\n    content = content || \"\";\n    e.className = className;\n    if (content !== undefined)\n        e.textContent = content;\n    return e;\n}\nexport function clearNode(node) {\n    while (node.firstChild)\n        node.removeChild(node.firstChild);\n}\nexport function findParent(node, condition) {\n    if (condition(node))\n        return node;\n    else if (node.parentNode)\n        return findParent(node.parentNode, condition);\n    return undefined;\n}\nexport function createNumberInput(inputClassName, opts) {\n    var wrapper = createElement(\"div\", \"numInputWrapper\"), numInput = createElement(\"input\", \"numInput \" + inputClassName), arrowUp = createElement(\"span\", \"arrowUp\"), arrowDown = createElement(\"span\", \"arrowDown\");\n    if (navigator.userAgent.indexOf(\"MSIE 9.0\") === -1) {\n        numInput.type = \"number\";\n    }\n    else {\n        numInput.type = \"text\";\n        numInput.pattern = \"\\\\d*\";\n    }\n    if (opts !== undefined)\n        for (var key in opts)\n            numInput.setAttribute(key, opts[key]);\n    wrapper.appendChild(numInput);\n    wrapper.appendChild(arrowUp);\n    wrapper.appendChild(arrowDown);\n    return wrapper;\n}\nexport function getEventTarget(event) {\n    try {\n        if (typeof event.composedPath === \"function\") {\n            var path = event.composedPath();\n            return path[0];\n        }\n        return event.target;\n    }\n    catch (error) {\n        return event.target;\n    }\n}\n","import { int, pad } from \"../utils\";\nvar doNothing = function () { return undefined; };\nexport var monthToStr = function (monthNumber, shorthand, locale) { return locale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber]; };\nexport var revFormat = {\n    D: doNothing,\n    F: function (dateObj, monthName, locale) {\n        dateObj.setMonth(locale.months.longhand.indexOf(monthName));\n    },\n    G: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    H: function (dateObj, hour) {\n        dateObj.setHours(parseFloat(hour));\n    },\n    J: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    K: function (dateObj, amPM, locale) {\n        dateObj.setHours((dateObj.getHours() % 12) +\n            12 * int(new RegExp(locale.amPM[1], \"i\").test(amPM)));\n    },\n    M: function (dateObj, shortMonth, locale) {\n        dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));\n    },\n    S: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    U: function (_, unixSeconds) { return new Date(parseFloat(unixSeconds) * 1000); },\n    W: function (dateObj, weekNum, locale) {\n        var weekNumber = parseInt(weekNum);\n        var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);\n        date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);\n        return date;\n    },\n    Y: function (dateObj, year) {\n        dateObj.setFullYear(parseFloat(year));\n    },\n    Z: function (_, ISODate) { return new Date(ISODate); },\n    d: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    h: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    i: function (dateObj, minutes) {\n        dateObj.setMinutes(parseFloat(minutes));\n    },\n    j: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    l: doNothing,\n    m: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    n: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    s: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    u: function (_, unixMillSeconds) {\n        return new Date(parseFloat(unixMillSeconds));\n    },\n    w: doNothing,\n    y: function (dateObj, year) {\n        dateObj.setFullYear(2000 + parseFloat(year));\n    },\n};\nexport var tokenRegex = {\n    D: \"\",\n    F: \"\",\n    G: \"(\\\\d\\\\d|\\\\d)\",\n    H: \"(\\\\d\\\\d|\\\\d)\",\n    J: \"(\\\\d\\\\d|\\\\d)\\\\w+\",\n    K: \"\",\n    M: \"\",\n    S: \"(\\\\d\\\\d|\\\\d)\",\n    U: \"(.+)\",\n    W: \"(\\\\d\\\\d|\\\\d)\",\n    Y: \"(\\\\d{4})\",\n    Z: \"(.+)\",\n    d: \"(\\\\d\\\\d|\\\\d)\",\n    h: \"(\\\\d\\\\d|\\\\d)\",\n    i: \"(\\\\d\\\\d|\\\\d)\",\n    j: \"(\\\\d\\\\d|\\\\d)\",\n    l: \"\",\n    m: \"(\\\\d\\\\d|\\\\d)\",\n    n: \"(\\\\d\\\\d|\\\\d)\",\n    s: \"(\\\\d\\\\d|\\\\d)\",\n    u: \"(.+)\",\n    w: \"(\\\\d\\\\d|\\\\d)\",\n    y: \"(\\\\d{2})\",\n};\nexport var formats = {\n    Z: function (date) { return date.toISOString(); },\n    D: function (date, locale, options) {\n        return locale.weekdays.shorthand[formats.w(date, locale, options)];\n    },\n    F: function (date, locale, options) {\n        return monthToStr(formats.n(date, locale, options) - 1, false, locale);\n    },\n    G: function (date, locale, options) {\n        return pad(formats.h(date, locale, options));\n    },\n    H: function (date) { return pad(date.getHours()); },\n    J: function (date, locale) {\n        return locale.ordinal !== undefined\n            ? date.getDate() + locale.ordinal(date.getDate())\n            : date.getDate();\n    },\n    K: function (date, locale) { return locale.amPM[int(date.getHours() > 11)]; },\n    M: function (date, locale) {\n        return monthToStr(date.getMonth(), true, locale);\n    },\n    S: function (date) { return pad(date.getSeconds()); },\n    U: function (date) { return date.getTime() / 1000; },\n    W: function (date, _, options) {\n        return options.getWeek(date);\n    },\n    Y: function (date) { return pad(date.getFullYear(), 4); },\n    d: function (date) { return pad(date.getDate()); },\n    h: function (date) { return (date.getHours() % 12 ? date.getHours() % 12 : 12); },\n    i: function (date) { return pad(date.getMinutes()); },\n    j: function (date) { return date.getDate(); },\n    l: function (date, locale) {\n        return locale.weekdays.longhand[date.getDay()];\n    },\n    m: function (date) { return pad(date.getMonth() + 1); },\n    n: function (date) { return date.getMonth() + 1; },\n    s: function (date) { return date.getSeconds(); },\n    u: function (date) { return date.getTime(); },\n    w: function (date) { return date.getDay(); },\n    y: function (date) { return String(date.getFullYear()).substring(2); },\n};\n","import { tokenRegex, revFormat, formats, } from \"./formatting\";\nimport { defaults } from \"../types/options\";\nimport { english } from \"../l10n/default\";\nexport var createDateFormatter = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;\n    return function (dateObj, frmt, overrideLocale) {\n        var locale = overrideLocale || l10n;\n        if (config.formatDate !== undefined && !isMobile) {\n            return config.formatDate(dateObj, frmt, locale);\n        }\n        return frmt\n            .split(\"\")\n            .map(function (c, i, arr) {\n            return formats[c] && arr[i - 1] !== \"\\\\\"\n                ? formats[c](dateObj, locale, config)\n                : c !== \"\\\\\"\n                    ? c\n                    : \"\";\n        })\n            .join(\"\");\n    };\n};\nexport var createDateParser = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;\n    return function (date, givenFormat, timeless, customLocale) {\n        if (date !== 0 && !date)\n            return undefined;\n        var locale = customLocale || l10n;\n        var parsedDate;\n        var dateOrig = date;\n        if (date instanceof Date)\n            parsedDate = new Date(date.getTime());\n        else if (typeof date !== \"string\" &&\n            date.toFixed !== undefined)\n            parsedDate = new Date(date);\n        else if (typeof date === \"string\") {\n            var format = givenFormat || (config || defaults).dateFormat;\n            var datestr = String(date).trim();\n            if (datestr === \"today\") {\n                parsedDate = new Date();\n                timeless = true;\n            }\n            else if (config && config.parseDate) {\n                parsedDate = config.parseDate(date, format);\n            }\n            else if (/Z$/.test(datestr) ||\n                /GMT$/.test(datestr)) {\n                parsedDate = new Date(date);\n            }\n            else {\n                var matched = void 0, ops = [];\n                for (var i = 0, matchIndex = 0, regexStr = \"\"; i < format.length; i++) {\n                    var token = format[i];\n                    var isBackSlash = token === \"\\\\\";\n                    var escaped = format[i - 1] === \"\\\\\" || isBackSlash;\n                    if (tokenRegex[token] && !escaped) {\n                        regexStr += tokenRegex[token];\n                        var match = new RegExp(regexStr).exec(date);\n                        if (match && (matched = true)) {\n                            ops[token !== \"Y\" ? \"push\" : \"unshift\"]({\n                                fn: revFormat[token],\n                                val: match[++matchIndex],\n                            });\n                        }\n                    }\n                    else if (!isBackSlash)\n                        regexStr += \".\";\n                }\n                parsedDate =\n                    !config || !config.noCalendar\n                        ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0)\n                        : new Date(new Date().setHours(0, 0, 0, 0));\n                ops.forEach(function (_a) {\n                    var fn = _a.fn, val = _a.val;\n                    return (parsedDate = fn(parsedDate, val, locale) || parsedDate);\n                });\n                parsedDate = matched ? parsedDate : undefined;\n            }\n        }\n        if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {\n            config.errorHandler(new Error(\"Invalid date provided: \" + dateOrig));\n            return undefined;\n        }\n        if (timeless === true)\n            parsedDate.setHours(0, 0, 0, 0);\n        return parsedDate;\n    };\n};\nexport function compareDates(date1, date2, timeless) {\n    if (timeless === void 0) { timeless = true; }\n    if (timeless !== false) {\n        return (new Date(date1.getTime()).setHours(0, 0, 0, 0) -\n            new Date(date2.getTime()).setHours(0, 0, 0, 0));\n    }\n    return date1.getTime() - date2.getTime();\n}\nexport function compareTimes(date1, date2) {\n    return (3600 * (date1.getHours() - date2.getHours()) +\n        60 * (date1.getMinutes() - date2.getMinutes()) +\n        date1.getSeconds() -\n        date2.getSeconds());\n}\nexport var isBetween = function (ts, ts1, ts2) {\n    return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);\n};\nexport var calculateSecondsSinceMidnight = function (hours, minutes, seconds) {\n    return hours * 3600 + minutes * 60 + seconds;\n};\nexport var parseSeconds = function (secondsSinceMidnight) {\n    var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;\n    return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];\n};\nexport var duration = {\n    DAY: 86400000,\n};\nexport function getDefaultHours(config) {\n    var hours = config.defaultHour;\n    var minutes = config.defaultMinute;\n    var seconds = config.defaultSeconds;\n    if (config.minDate !== undefined) {\n        var minHour = config.minDate.getHours();\n        var minMinutes = config.minDate.getMinutes();\n        var minSeconds = config.minDate.getSeconds();\n        if (hours < minHour) {\n            hours = minHour;\n        }\n        if (hours === minHour && minutes < minMinutes) {\n            minutes = minMinutes;\n        }\n        if (hours === minHour && minutes === minMinutes && seconds < minSeconds)\n            seconds = config.minDate.getSeconds();\n    }\n    if (config.maxDate !== undefined) {\n        var maxHr = config.maxDate.getHours();\n        var maxMinutes = config.maxDate.getMinutes();\n        hours = Math.min(hours, maxHr);\n        if (hours === maxHr)\n            minutes = Math.min(maxMinutes, minutes);\n        if (hours === maxHr && minutes === maxMinutes)\n            seconds = config.maxDate.getSeconds();\n    }\n    return { hours: hours, minutes: minutes, seconds: seconds };\n}\n","\"use strict\";\nif (typeof Object.assign !== \"function\") {\n    Object.assign = function (target) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!target) {\n            throw TypeError(\"Cannot convert undefined or null to object\");\n        }\n        var _loop_1 = function (source) {\n            if (source) {\n                Object.keys(source).forEach(function (key) { return (target[key] = source[key]); });\n            }\n        };\n        for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n            var source = args_1[_a];\n            _loop_1(source);\n        }\n        return target;\n    };\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { defaults as defaultOptions, HOOKS, } from \"./types/options\";\nimport English from \"./l10n/default\";\nimport { arrayify, debounce, int, pad } from \"./utils\";\nimport { clearNode, createElement, createNumberInput, findParent, toggleClass, getEventTarget, } from \"./utils/dom\";\nimport { compareDates, createDateParser, createDateFormatter, duration, isBetween, getDefaultHours, calculateSecondsSinceMidnight, parseSeconds, } from \"./utils/dates\";\nimport { tokenRegex, monthToStr } from \"./utils/formatting\";\nimport \"./utils/polyfills\";\nvar DEBOUNCED_CHANGE_MS = 300;\nfunction FlatpickrInstance(element, instanceConfig) {\n    var self = {\n        config: __assign(__assign({}, defaultOptions), flatpickr.defaultConfig),\n        l10n: English,\n    };\n    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    self._handlers = [];\n    self.pluginElements = [];\n    self.loadedPlugins = [];\n    self._bind = bind;\n    self._setHoursFromDate = setHoursFromDate;\n    self._positionCalendar = positionCalendar;\n    self.changeMonth = changeMonth;\n    self.changeYear = changeYear;\n    self.clear = clear;\n    self.close = close;\n    self.onMouseOver = onMouseOver;\n    self._createElement = createElement;\n    self.createDay = createDay;\n    self.destroy = destroy;\n    self.isEnabled = isEnabled;\n    self.jumpToDate = jumpToDate;\n    self.updateValue = updateValue;\n    self.open = open;\n    self.redraw = redraw;\n    self.set = set;\n    self.setDate = setDate;\n    self.toggle = toggle;\n    function setupHelperFunctions() {\n        self.utils = {\n            getDaysInMonth: function (month, yr) {\n                if (month === void 0) { month = self.currentMonth; }\n                if (yr === void 0) { yr = self.currentYear; }\n                if (month === 1 && ((yr % 4 === 0 && yr % 100 !== 0) || yr % 400 === 0))\n                    return 29;\n                return self.l10n.daysInMonth[month];\n            },\n        };\n    }\n    function init() {\n        self.element = self.input = element;\n        self.isOpen = false;\n        parseConfig();\n        setupLocale();\n        setupInputs();\n        setupDates();\n        setupHelperFunctions();\n        if (!self.isMobile)\n            build();\n        bindEvents();\n        if (self.selectedDates.length || self.config.noCalendar) {\n            if (self.config.enableTime) {\n                setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : undefined);\n            }\n            updateValue(false);\n        }\n        setCalendarWidth();\n        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        if (!self.isMobile && isSafari) {\n            positionCalendar();\n        }\n        triggerEvent(\"onReady\");\n    }\n    function getClosestActiveElement() {\n        var _a;\n        return (((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode())\n            .activeElement || document.activeElement);\n    }\n    function bindToInstance(fn) {\n        return fn.bind(self);\n    }\n    function setCalendarWidth() {\n        var config = self.config;\n        if (config.weekNumbers === false && config.showMonths === 1) {\n            return;\n        }\n        else if (config.noCalendar !== true) {\n            window.requestAnimationFrame(function () {\n                if (self.calendarContainer !== undefined) {\n                    self.calendarContainer.style.visibility = \"hidden\";\n                    self.calendarContainer.style.display = \"block\";\n                }\n                if (self.daysContainer !== undefined) {\n                    var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;\n                    self.daysContainer.style.width = daysWidth + \"px\";\n                    self.calendarContainer.style.width =\n                        daysWidth +\n                            (self.weekWrapper !== undefined\n                                ? self.weekWrapper.offsetWidth\n                                : 0) +\n                            \"px\";\n                    self.calendarContainer.style.removeProperty(\"visibility\");\n                    self.calendarContainer.style.removeProperty(\"display\");\n                }\n            });\n        }\n    }\n    function updateTime(e) {\n        if (self.selectedDates.length === 0) {\n            var defaultDate = self.config.minDate === undefined ||\n                compareDates(new Date(), self.config.minDate) >= 0\n                ? new Date()\n                : new Date(self.config.minDate.getTime());\n            var defaults = getDefaultHours(self.config);\n            defaultDate.setHours(defaults.hours, defaults.minutes, defaults.seconds, defaultDate.getMilliseconds());\n            self.selectedDates = [defaultDate];\n            self.latestSelectedDateObj = defaultDate;\n        }\n        if (e !== undefined && e.type !== \"blur\") {\n            timeWrapper(e);\n        }\n        var prevValue = self._input.value;\n        setHoursFromInputs();\n        updateValue();\n        if (self._input.value !== prevValue) {\n            self._debouncedChange();\n        }\n    }\n    function ampm2military(hour, amPM) {\n        return (hour % 12) + 12 * int(amPM === self.l10n.amPM[1]);\n    }\n    function military2ampm(hour) {\n        switch (hour % 24) {\n            case 0:\n            case 12:\n                return 12;\n            default:\n                return hour % 12;\n        }\n    }\n    function setHoursFromInputs() {\n        if (self.hourElement === undefined || self.minuteElement === undefined)\n            return;\n        var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== undefined\n            ? (parseInt(self.secondElement.value, 10) || 0) % 60\n            : 0;\n        if (self.amPM !== undefined) {\n            hours = ampm2military(hours, self.amPM.textContent);\n        }\n        var limitMinHours = self.config.minTime !== undefined ||\n            (self.config.minDate &&\n                self.minDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.minDate, true) ===\n                    0);\n        var limitMaxHours = self.config.maxTime !== undefined ||\n            (self.config.maxDate &&\n                self.maxDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.maxDate, true) ===\n                    0);\n        if (self.config.maxTime !== undefined &&\n            self.config.minTime !== undefined &&\n            self.config.minTime > self.config.maxTime) {\n            var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());\n            var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());\n            var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);\n            if (currentTime > maxBound && currentTime < minBound) {\n                var result = parseSeconds(minBound);\n                hours = result[0];\n                minutes = result[1];\n                seconds = result[2];\n            }\n        }\n        else {\n            if (limitMaxHours) {\n                var maxTime = self.config.maxTime !== undefined\n                    ? self.config.maxTime\n                    : self.config.maxDate;\n                hours = Math.min(hours, maxTime.getHours());\n                if (hours === maxTime.getHours())\n                    minutes = Math.min(minutes, maxTime.getMinutes());\n                if (minutes === maxTime.getMinutes())\n                    seconds = Math.min(seconds, maxTime.getSeconds());\n            }\n            if (limitMinHours) {\n                var minTime = self.config.minTime !== undefined\n                    ? self.config.minTime\n                    : self.config.minDate;\n                hours = Math.max(hours, minTime.getHours());\n                if (hours === minTime.getHours() && minutes < minTime.getMinutes())\n                    minutes = minTime.getMinutes();\n                if (minutes === minTime.getMinutes())\n                    seconds = Math.max(seconds, minTime.getSeconds());\n            }\n        }\n        setHours(hours, minutes, seconds);\n    }\n    function setHoursFromDate(dateObj) {\n        var date = dateObj || self.latestSelectedDateObj;\n        if (date && date instanceof Date) {\n            setHours(date.getHours(), date.getMinutes(), date.getSeconds());\n        }\n    }\n    function setHours(hours, minutes, seconds) {\n        if (self.latestSelectedDateObj !== undefined) {\n            self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);\n        }\n        if (!self.hourElement || !self.minuteElement || self.isMobile)\n            return;\n        self.hourElement.value = pad(!self.config.time_24hr\n            ? ((12 + hours) % 12) + 12 * int(hours % 12 === 0)\n            : hours);\n        self.minuteElement.value = pad(minutes);\n        if (self.amPM !== undefined)\n            self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];\n        if (self.secondElement !== undefined)\n            self.secondElement.value = pad(seconds);\n    }\n    function onYearInput(event) {\n        var eventTarget = getEventTarget(event);\n        var year = parseInt(eventTarget.value) + (event.delta || 0);\n        if (year / 1000 > 1 ||\n            (event.key === \"Enter\" && !/[^\\d]/.test(year.toString()))) {\n            changeYear(year);\n        }\n    }\n    function bind(element, event, handler, options) {\n        if (event instanceof Array)\n            return event.forEach(function (ev) { return bind(element, ev, handler, options); });\n        if (element instanceof Array)\n            return element.forEach(function (el) { return bind(el, event, handler, options); });\n        element.addEventListener(event, handler, options);\n        self._handlers.push({\n            remove: function () { return element.removeEventListener(event, handler, options); },\n        });\n    }\n    function triggerChange() {\n        triggerEvent(\"onChange\");\n    }\n    function bindEvents() {\n        if (self.config.wrap) {\n            [\"open\", \"close\", \"toggle\", \"clear\"].forEach(function (evt) {\n                Array.prototype.forEach.call(self.element.querySelectorAll(\"[data-\" + evt + \"]\"), function (el) {\n                    return bind(el, \"click\", self[evt]);\n                });\n            });\n        }\n        if (self.isMobile) {\n            setupMobile();\n            return;\n        }\n        var debouncedResize = debounce(onResize, 50);\n        self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);\n        if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))\n            bind(self.daysContainer, \"mouseover\", function (e) {\n                if (self.config.mode === \"range\")\n                    onMouseOver(getEventTarget(e));\n            });\n        bind(self._input, \"keydown\", onKeyDown);\n        if (self.calendarContainer !== undefined) {\n            bind(self.calendarContainer, \"keydown\", onKeyDown);\n        }\n        if (!self.config.inline && !self.config.static)\n            bind(window, \"resize\", debouncedResize);\n        if (window.ontouchstart !== undefined)\n            bind(window.document, \"touchstart\", documentClick);\n        else\n            bind(window.document, \"mousedown\", documentClick);\n        bind(window.document, \"focus\", documentClick, { capture: true });\n        if (self.config.clickOpens === true) {\n            bind(self._input, \"focus\", self.open);\n            bind(self._input, \"click\", self.open);\n        }\n        if (self.daysContainer !== undefined) {\n            bind(self.monthNav, \"click\", onMonthNavClick);\n            bind(self.monthNav, [\"keyup\", \"increment\"], onYearInput);\n            bind(self.daysContainer, \"click\", selectDate);\n        }\n        if (self.timeContainer !== undefined &&\n            self.minuteElement !== undefined &&\n            self.hourElement !== undefined) {\n            var selText = function (e) {\n                return getEventTarget(e).select();\n            };\n            bind(self.timeContainer, [\"increment\"], updateTime);\n            bind(self.timeContainer, \"blur\", updateTime, { capture: true });\n            bind(self.timeContainer, \"click\", timeIncrement);\n            bind([self.hourElement, self.minuteElement], [\"focus\", \"click\"], selText);\n            if (self.secondElement !== undefined)\n                bind(self.secondElement, \"focus\", function () { return self.secondElement && self.secondElement.select(); });\n            if (self.amPM !== undefined) {\n                bind(self.amPM, \"click\", function (e) {\n                    updateTime(e);\n                });\n            }\n        }\n        if (self.config.allowInput) {\n            bind(self._input, \"blur\", onBlur);\n        }\n    }\n    function jumpToDate(jumpDate, triggerChange) {\n        var jumpTo = jumpDate !== undefined\n            ? self.parseDate(jumpDate)\n            : self.latestSelectedDateObj ||\n                (self.config.minDate && self.config.minDate > self.now\n                    ? self.config.minDate\n                    : self.config.maxDate && self.config.maxDate < self.now\n                        ? self.config.maxDate\n                        : self.now);\n        var oldYear = self.currentYear;\n        var oldMonth = self.currentMonth;\n        try {\n            if (jumpTo !== undefined) {\n                self.currentYear = jumpTo.getFullYear();\n                self.currentMonth = jumpTo.getMonth();\n            }\n        }\n        catch (e) {\n            e.message = \"Invalid date supplied: \" + jumpTo;\n            self.config.errorHandler(e);\n        }\n        if (triggerChange && self.currentYear !== oldYear) {\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        if (triggerChange &&\n            (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {\n            triggerEvent(\"onMonthChange\");\n        }\n        self.redraw();\n    }\n    function timeIncrement(e) {\n        var eventTarget = getEventTarget(e);\n        if (~eventTarget.className.indexOf(\"arrow\"))\n            incrementNumInput(e, eventTarget.classList.contains(\"arrowUp\") ? 1 : -1);\n    }\n    function incrementNumInput(e, delta, inputElem) {\n        var target = e && getEventTarget(e);\n        var input = inputElem ||\n            (target && target.parentNode && target.parentNode.firstChild);\n        var event = createEvent(\"increment\");\n        event.delta = delta;\n        input && input.dispatchEvent(event);\n    }\n    function build() {\n        var fragment = window.document.createDocumentFragment();\n        self.calendarContainer = createElement(\"div\", \"flatpickr-calendar\");\n        self.calendarContainer.tabIndex = -1;\n        if (!self.config.noCalendar) {\n            fragment.appendChild(buildMonthNav());\n            self.innerContainer = createElement(\"div\", \"flatpickr-innerContainer\");\n            if (self.config.weekNumbers) {\n                var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;\n                self.innerContainer.appendChild(weekWrapper);\n                self.weekNumbers = weekNumbers;\n                self.weekWrapper = weekWrapper;\n            }\n            self.rContainer = createElement(\"div\", \"flatpickr-rContainer\");\n            self.rContainer.appendChild(buildWeekdays());\n            if (!self.daysContainer) {\n                self.daysContainer = createElement(\"div\", \"flatpickr-days\");\n                self.daysContainer.tabIndex = -1;\n            }\n            buildDays();\n            self.rContainer.appendChild(self.daysContainer);\n            self.innerContainer.appendChild(self.rContainer);\n            fragment.appendChild(self.innerContainer);\n        }\n        if (self.config.enableTime) {\n            fragment.appendChild(buildTime());\n        }\n        toggleClass(self.calendarContainer, \"rangeMode\", self.config.mode === \"range\");\n        toggleClass(self.calendarContainer, \"animate\", self.config.animate === true);\n        toggleClass(self.calendarContainer, \"multiMonth\", self.config.showMonths > 1);\n        self.calendarContainer.appendChild(fragment);\n        var customAppend = self.config.appendTo !== undefined &&\n            self.config.appendTo.nodeType !== undefined;\n        if (self.config.inline || self.config.static) {\n            self.calendarContainer.classList.add(self.config.inline ? \"inline\" : \"static\");\n            if (self.config.inline) {\n                if (!customAppend && self.element.parentNode)\n                    self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);\n                else if (self.config.appendTo !== undefined)\n                    self.config.appendTo.appendChild(self.calendarContainer);\n            }\n            if (self.config.static) {\n                var wrapper = createElement(\"div\", \"flatpickr-wrapper\");\n                if (self.element.parentNode)\n                    self.element.parentNode.insertBefore(wrapper, self.element);\n                wrapper.appendChild(self.element);\n                if (self.altInput)\n                    wrapper.appendChild(self.altInput);\n                wrapper.appendChild(self.calendarContainer);\n            }\n        }\n        if (!self.config.static && !self.config.inline)\n            (self.config.appendTo !== undefined\n                ? self.config.appendTo\n                : window.document.body).appendChild(self.calendarContainer);\n    }\n    function createDay(className, date, _dayNumber, i) {\n        var dateIsEnabled = isEnabled(date, true), dayElement = createElement(\"span\", className, date.getDate().toString());\n        dayElement.dateObj = date;\n        dayElement.$i = i;\n        dayElement.setAttribute(\"aria-label\", self.formatDate(date, self.config.ariaDateFormat));\n        if (className.indexOf(\"hidden\") === -1 &&\n            compareDates(date, self.now) === 0) {\n            self.todayDateElem = dayElement;\n            dayElement.classList.add(\"today\");\n            dayElement.setAttribute(\"aria-current\", \"date\");\n        }\n        if (dateIsEnabled) {\n            dayElement.tabIndex = -1;\n            if (isDateSelected(date)) {\n                dayElement.classList.add(\"selected\");\n                self.selectedDateElem = dayElement;\n                if (self.config.mode === \"range\") {\n                    toggleClass(dayElement, \"startRange\", self.selectedDates[0] &&\n                        compareDates(date, self.selectedDates[0], true) === 0);\n                    toggleClass(dayElement, \"endRange\", self.selectedDates[1] &&\n                        compareDates(date, self.selectedDates[1], true) === 0);\n                    if (className === \"nextMonthDay\")\n                        dayElement.classList.add(\"inRange\");\n                }\n            }\n        }\n        else {\n            dayElement.classList.add(\"flatpickr-disabled\");\n        }\n        if (self.config.mode === \"range\") {\n            if (isDateInRange(date) && !isDateSelected(date))\n                dayElement.classList.add(\"inRange\");\n        }\n        if (self.weekNumbers &&\n            self.config.showMonths === 1 &&\n            className !== \"prevMonthDay\" &&\n            i % 7 === 6) {\n            self.weekNumbers.insertAdjacentHTML(\"beforeend\", \"<span class='flatpickr-day'>\" + self.config.getWeek(date) + \"</span>\");\n        }\n        triggerEvent(\"onDayCreate\", dayElement);\n        return dayElement;\n    }\n    function focusOnDayElem(targetNode) {\n        targetNode.focus();\n        if (self.config.mode === \"range\")\n            onMouseOver(targetNode);\n    }\n    function getFirstAvailableDay(delta) {\n        var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        for (var m = startMonth; m != endMonth; m += delta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = delta > 0 ? 0 : month.children.length - 1;\n            var endIndex = delta > 0 ? month.children.length : -1;\n            for (var i = startIndex; i != endIndex; i += delta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 && isEnabled(c.dateObj))\n                    return c;\n            }\n        }\n        return undefined;\n    }\n    function getNextAvailableDay(current, delta) {\n        var givenMonth = current.className.indexOf(\"Month\") === -1\n            ? current.dateObj.getMonth()\n            : self.currentMonth;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        var loopDelta = delta > 0 ? 1 : -1;\n        for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = givenMonth - self.currentMonth === m\n                ? current.$i + delta\n                : delta < 0\n                    ? month.children.length - 1\n                    : 0;\n            var numMonthDays = month.children.length;\n            for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 &&\n                    isEnabled(c.dateObj) &&\n                    Math.abs(current.$i - i) >= Math.abs(delta))\n                    return focusOnDayElem(c);\n            }\n        }\n        self.changeMonth(loopDelta);\n        focusOnDay(getFirstAvailableDay(loopDelta), 0);\n        return undefined;\n    }\n    function focusOnDay(current, offset) {\n        var activeElement = getClosestActiveElement();\n        var dayFocused = isInView(activeElement || document.body);\n        var startElem = current !== undefined\n            ? current\n            : dayFocused\n                ? activeElement\n                : self.selectedDateElem !== undefined && isInView(self.selectedDateElem)\n                    ? self.selectedDateElem\n                    : self.todayDateElem !== undefined && isInView(self.todayDateElem)\n                        ? self.todayDateElem\n                        : getFirstAvailableDay(offset > 0 ? 1 : -1);\n        if (startElem === undefined) {\n            self._input.focus();\n        }\n        else if (!dayFocused) {\n            focusOnDayElem(startElem);\n        }\n        else {\n            getNextAvailableDay(startElem, offset);\n        }\n    }\n    function buildMonthDays(year, month) {\n        var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;\n        var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);\n        var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? \"prevMonthDay hidden\" : \"prevMonthDay\", nextMonthDayClass = isMultiMonth ? \"nextMonthDay hidden\" : \"nextMonthDay\";\n        var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;\n        for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));\n        }\n        for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day\", new Date(year, month, dayNumber), dayNumber, dayIndex));\n        }\n        for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth &&\n            (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));\n        }\n        var dayContainer = createElement(\"div\", \"dayContainer\");\n        dayContainer.appendChild(days);\n        return dayContainer;\n    }\n    function buildDays() {\n        if (self.daysContainer === undefined) {\n            return;\n        }\n        clearNode(self.daysContainer);\n        if (self.weekNumbers)\n            clearNode(self.weekNumbers);\n        var frag = document.createDocumentFragment();\n        for (var i = 0; i < self.config.showMonths; i++) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));\n        }\n        self.daysContainer.appendChild(frag);\n        self.days = self.daysContainer.firstChild;\n        if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n            onMouseOver();\n        }\n    }\n    function buildMonthSwitch() {\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType !== \"dropdown\")\n            return;\n        var shouldBuildMonth = function (month) {\n            if (self.config.minDate !== undefined &&\n                self.currentYear === self.config.minDate.getFullYear() &&\n                month < self.config.minDate.getMonth()) {\n                return false;\n            }\n            return !(self.config.maxDate !== undefined &&\n                self.currentYear === self.config.maxDate.getFullYear() &&\n                month > self.config.maxDate.getMonth());\n        };\n        self.monthsDropdownContainer.tabIndex = -1;\n        self.monthsDropdownContainer.innerHTML = \"\";\n        for (var i = 0; i < 12; i++) {\n            if (!shouldBuildMonth(i))\n                continue;\n            var month = createElement(\"option\", \"flatpickr-monthDropdown-month\");\n            month.value = new Date(self.currentYear, i).getMonth().toString();\n            month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);\n            month.tabIndex = -1;\n            if (self.currentMonth === i) {\n                month.selected = true;\n            }\n            self.monthsDropdownContainer.appendChild(month);\n        }\n    }\n    function buildMonth() {\n        var container = createElement(\"div\", \"flatpickr-month\");\n        var monthNavFragment = window.document.createDocumentFragment();\n        var monthElement;\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType === \"static\") {\n            monthElement = createElement(\"span\", \"cur-month\");\n        }\n        else {\n            self.monthsDropdownContainer = createElement(\"select\", \"flatpickr-monthDropdown-months\");\n            self.monthsDropdownContainer.setAttribute(\"aria-label\", self.l10n.monthAriaLabel);\n            bind(self.monthsDropdownContainer, \"change\", function (e) {\n                var target = getEventTarget(e);\n                var selectedMonth = parseInt(target.value, 10);\n                self.changeMonth(selectedMonth - self.currentMonth);\n                triggerEvent(\"onMonthChange\");\n            });\n            buildMonthSwitch();\n            monthElement = self.monthsDropdownContainer;\n        }\n        var yearInput = createNumberInput(\"cur-year\", { tabindex: \"-1\" });\n        var yearElement = yearInput.getElementsByTagName(\"input\")[0];\n        yearElement.setAttribute(\"aria-label\", self.l10n.yearAriaLabel);\n        if (self.config.minDate) {\n            yearElement.setAttribute(\"min\", self.config.minDate.getFullYear().toString());\n        }\n        if (self.config.maxDate) {\n            yearElement.setAttribute(\"max\", self.config.maxDate.getFullYear().toString());\n            yearElement.disabled =\n                !!self.config.minDate &&\n                    self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();\n        }\n        var currentMonth = createElement(\"div\", \"flatpickr-current-month\");\n        currentMonth.appendChild(monthElement);\n        currentMonth.appendChild(yearInput);\n        monthNavFragment.appendChild(currentMonth);\n        container.appendChild(monthNavFragment);\n        return {\n            container: container,\n            yearElement: yearElement,\n            monthElement: monthElement,\n        };\n    }\n    function buildMonths() {\n        clearNode(self.monthNav);\n        self.monthNav.appendChild(self.prevMonthNav);\n        if (self.config.showMonths) {\n            self.yearElements = [];\n            self.monthElements = [];\n        }\n        for (var m = self.config.showMonths; m--;) {\n            var month = buildMonth();\n            self.yearElements.push(month.yearElement);\n            self.monthElements.push(month.monthElement);\n            self.monthNav.appendChild(month.container);\n        }\n        self.monthNav.appendChild(self.nextMonthNav);\n    }\n    function buildMonthNav() {\n        self.monthNav = createElement(\"div\", \"flatpickr-months\");\n        self.yearElements = [];\n        self.monthElements = [];\n        self.prevMonthNav = createElement(\"span\", \"flatpickr-prev-month\");\n        self.prevMonthNav.innerHTML = self.config.prevArrow;\n        self.nextMonthNav = createElement(\"span\", \"flatpickr-next-month\");\n        self.nextMonthNav.innerHTML = self.config.nextArrow;\n        buildMonths();\n        Object.defineProperty(self, \"_hidePrevMonthArrow\", {\n            get: function () { return self.__hidePrevMonthArrow; },\n            set: function (bool) {\n                if (self.__hidePrevMonthArrow !== bool) {\n                    toggleClass(self.prevMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hidePrevMonthArrow = bool;\n                }\n            },\n        });\n        Object.defineProperty(self, \"_hideNextMonthArrow\", {\n            get: function () { return self.__hideNextMonthArrow; },\n            set: function (bool) {\n                if (self.__hideNextMonthArrow !== bool) {\n                    toggleClass(self.nextMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hideNextMonthArrow = bool;\n                }\n            },\n        });\n        self.currentYearElement = self.yearElements[0];\n        updateNavigationCurrentMonth();\n        return self.monthNav;\n    }\n    function buildTime() {\n        self.calendarContainer.classList.add(\"hasTime\");\n        if (self.config.noCalendar)\n            self.calendarContainer.classList.add(\"noCalendar\");\n        var defaults = getDefaultHours(self.config);\n        self.timeContainer = createElement(\"div\", \"flatpickr-time\");\n        self.timeContainer.tabIndex = -1;\n        var separator = createElement(\"span\", \"flatpickr-time-separator\", \":\");\n        var hourInput = createNumberInput(\"flatpickr-hour\", {\n            \"aria-label\": self.l10n.hourAriaLabel,\n        });\n        self.hourElement = hourInput.getElementsByTagName(\"input\")[0];\n        var minuteInput = createNumberInput(\"flatpickr-minute\", {\n            \"aria-label\": self.l10n.minuteAriaLabel,\n        });\n        self.minuteElement = minuteInput.getElementsByTagName(\"input\")[0];\n        self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;\n        self.hourElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getHours()\n            : self.config.time_24hr\n                ? defaults.hours\n                : military2ampm(defaults.hours));\n        self.minuteElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getMinutes()\n            : defaults.minutes);\n        self.hourElement.setAttribute(\"step\", self.config.hourIncrement.toString());\n        self.minuteElement.setAttribute(\"step\", self.config.minuteIncrement.toString());\n        self.hourElement.setAttribute(\"min\", self.config.time_24hr ? \"0\" : \"1\");\n        self.hourElement.setAttribute(\"max\", self.config.time_24hr ? \"23\" : \"12\");\n        self.hourElement.setAttribute(\"maxlength\", \"2\");\n        self.minuteElement.setAttribute(\"min\", \"0\");\n        self.minuteElement.setAttribute(\"max\", \"59\");\n        self.minuteElement.setAttribute(\"maxlength\", \"2\");\n        self.timeContainer.appendChild(hourInput);\n        self.timeContainer.appendChild(separator);\n        self.timeContainer.appendChild(minuteInput);\n        if (self.config.time_24hr)\n            self.timeContainer.classList.add(\"time24hr\");\n        if (self.config.enableSeconds) {\n            self.timeContainer.classList.add(\"hasSeconds\");\n            var secondInput = createNumberInput(\"flatpickr-second\");\n            self.secondElement = secondInput.getElementsByTagName(\"input\")[0];\n            self.secondElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getSeconds()\n                : defaults.seconds);\n            self.secondElement.setAttribute(\"step\", self.minuteElement.getAttribute(\"step\"));\n            self.secondElement.setAttribute(\"min\", \"0\");\n            self.secondElement.setAttribute(\"max\", \"59\");\n            self.secondElement.setAttribute(\"maxlength\", \"2\");\n            self.timeContainer.appendChild(createElement(\"span\", \"flatpickr-time-separator\", \":\"));\n            self.timeContainer.appendChild(secondInput);\n        }\n        if (!self.config.time_24hr) {\n            self.amPM = createElement(\"span\", \"flatpickr-am-pm\", self.l10n.amPM[int((self.latestSelectedDateObj\n                ? self.hourElement.value\n                : self.config.defaultHour) > 11)]);\n            self.amPM.title = self.l10n.toggleTitle;\n            self.amPM.tabIndex = -1;\n            self.timeContainer.appendChild(self.amPM);\n        }\n        return self.timeContainer;\n    }\n    function buildWeekdays() {\n        if (!self.weekdayContainer)\n            self.weekdayContainer = createElement(\"div\", \"flatpickr-weekdays\");\n        else\n            clearNode(self.weekdayContainer);\n        for (var i = self.config.showMonths; i--;) {\n            var container = createElement(\"div\", \"flatpickr-weekdaycontainer\");\n            self.weekdayContainer.appendChild(container);\n        }\n        updateWeekdays();\n        return self.weekdayContainer;\n    }\n    function updateWeekdays() {\n        if (!self.weekdayContainer) {\n            return;\n        }\n        var firstDayOfWeek = self.l10n.firstDayOfWeek;\n        var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);\n        if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n            weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));\n        }\n        for (var i = self.config.showMonths; i--;) {\n            self.weekdayContainer.children[i].innerHTML = \"\\n      <span class='flatpickr-weekday'>\\n        \" + weekdays.join(\"</span><span class='flatpickr-weekday'>\") + \"\\n      </span>\\n      \";\n        }\n    }\n    function buildWeeks() {\n        self.calendarContainer.classList.add(\"hasWeeks\");\n        var weekWrapper = createElement(\"div\", \"flatpickr-weekwrapper\");\n        weekWrapper.appendChild(createElement(\"span\", \"flatpickr-weekday\", self.l10n.weekAbbreviation));\n        var weekNumbers = createElement(\"div\", \"flatpickr-weeks\");\n        weekWrapper.appendChild(weekNumbers);\n        return {\n            weekWrapper: weekWrapper,\n            weekNumbers: weekNumbers,\n        };\n    }\n    function changeMonth(value, isOffset) {\n        if (isOffset === void 0) { isOffset = true; }\n        var delta = isOffset ? value : value - self.currentMonth;\n        if ((delta < 0 && self._hidePrevMonthArrow === true) ||\n            (delta > 0 && self._hideNextMonthArrow === true))\n            return;\n        self.currentMonth += delta;\n        if (self.currentMonth < 0 || self.currentMonth > 11) {\n            self.currentYear += self.currentMonth > 11 ? 1 : -1;\n            self.currentMonth = (self.currentMonth + 12) % 12;\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        buildDays();\n        triggerEvent(\"onMonthChange\");\n        updateNavigationCurrentMonth();\n    }\n    function clear(triggerChangeEvent, toInitial) {\n        if (triggerChangeEvent === void 0) { triggerChangeEvent = true; }\n        if (toInitial === void 0) { toInitial = true; }\n        self.input.value = \"\";\n        if (self.altInput !== undefined)\n            self.altInput.value = \"\";\n        if (self.mobileInput !== undefined)\n            self.mobileInput.value = \"\";\n        self.selectedDates = [];\n        self.latestSelectedDateObj = undefined;\n        if (toInitial === true) {\n            self.currentYear = self._initialDate.getFullYear();\n            self.currentMonth = self._initialDate.getMonth();\n        }\n        if (self.config.enableTime === true) {\n            var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\n            setHours(hours, minutes, seconds);\n        }\n        self.redraw();\n        if (triggerChangeEvent)\n            triggerEvent(\"onChange\");\n    }\n    function close() {\n        self.isOpen = false;\n        if (!self.isMobile) {\n            if (self.calendarContainer !== undefined) {\n                self.calendarContainer.classList.remove(\"open\");\n            }\n            if (self._input !== undefined) {\n                self._input.classList.remove(\"active\");\n            }\n        }\n        triggerEvent(\"onClose\");\n    }\n    function destroy() {\n        if (self.config !== undefined)\n            triggerEvent(\"onDestroy\");\n        for (var i = self._handlers.length; i--;) {\n            self._handlers[i].remove();\n        }\n        self._handlers = [];\n        if (self.mobileInput) {\n            if (self.mobileInput.parentNode)\n                self.mobileInput.parentNode.removeChild(self.mobileInput);\n            self.mobileInput = undefined;\n        }\n        else if (self.calendarContainer && self.calendarContainer.parentNode) {\n            if (self.config.static && self.calendarContainer.parentNode) {\n                var wrapper = self.calendarContainer.parentNode;\n                wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);\n                if (wrapper.parentNode) {\n                    while (wrapper.firstChild)\n                        wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);\n                    wrapper.parentNode.removeChild(wrapper);\n                }\n            }\n            else\n                self.calendarContainer.parentNode.removeChild(self.calendarContainer);\n        }\n        if (self.altInput) {\n            self.input.type = \"text\";\n            if (self.altInput.parentNode)\n                self.altInput.parentNode.removeChild(self.altInput);\n            delete self.altInput;\n        }\n        if (self.input) {\n            self.input.type = self.input._type;\n            self.input.classList.remove(\"flatpickr-input\");\n            self.input.removeAttribute(\"readonly\");\n        }\n        [\n            \"_showTimeInput\",\n            \"latestSelectedDateObj\",\n            \"_hideNextMonthArrow\",\n            \"_hidePrevMonthArrow\",\n            \"__hideNextMonthArrow\",\n            \"__hidePrevMonthArrow\",\n            \"isMobile\",\n            \"isOpen\",\n            \"selectedDateElem\",\n            \"minDateHasTime\",\n            \"maxDateHasTime\",\n            \"days\",\n            \"daysContainer\",\n            \"_input\",\n            \"_positionElement\",\n            \"innerContainer\",\n            \"rContainer\",\n            \"monthNav\",\n            \"todayDateElem\",\n            \"calendarContainer\",\n            \"weekdayContainer\",\n            \"prevMonthNav\",\n            \"nextMonthNav\",\n            \"monthsDropdownContainer\",\n            \"currentMonthElement\",\n            \"currentYearElement\",\n            \"navigationCurrentMonth\",\n            \"selectedDateElem\",\n            \"config\",\n        ].forEach(function (k) {\n            try {\n                delete self[k];\n            }\n            catch (_) { }\n        });\n    }\n    function isCalendarElem(elem) {\n        return self.calendarContainer.contains(elem);\n    }\n    function documentClick(e) {\n        if (self.isOpen && !self.config.inline) {\n            var eventTarget_1 = getEventTarget(e);\n            var isCalendarElement = isCalendarElem(eventTarget_1);\n            var isInput = eventTarget_1 === self.input ||\n                eventTarget_1 === self.altInput ||\n                self.element.contains(eventTarget_1) ||\n                (e.path &&\n                    e.path.indexOf &&\n                    (~e.path.indexOf(self.input) ||\n                        ~e.path.indexOf(self.altInput)));\n            var lostFocus = !isInput &&\n                !isCalendarElement &&\n                !isCalendarElem(e.relatedTarget);\n            var isIgnored = !self.config.ignoredFocusElements.some(function (elem) {\n                return elem.contains(eventTarget_1);\n            });\n            if (lostFocus && isIgnored) {\n                if (self.config.allowInput) {\n                    self.setDate(self._input.value, false, self.config.altInput\n                        ? self.config.altFormat\n                        : self.config.dateFormat);\n                }\n                if (self.timeContainer !== undefined &&\n                    self.minuteElement !== undefined &&\n                    self.hourElement !== undefined &&\n                    self.input.value !== \"\" &&\n                    self.input.value !== undefined) {\n                    updateTime();\n                }\n                self.close();\n                if (self.config &&\n                    self.config.mode === \"range\" &&\n                    self.selectedDates.length === 1)\n                    self.clear(false);\n            }\n        }\n    }\n    function changeYear(newYear) {\n        if (!newYear ||\n            (self.config.minDate && newYear < self.config.minDate.getFullYear()) ||\n            (self.config.maxDate && newYear > self.config.maxDate.getFullYear()))\n            return;\n        var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;\n        self.currentYear = newYearNum || self.currentYear;\n        if (self.config.maxDate &&\n            self.currentYear === self.config.maxDate.getFullYear()) {\n            self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);\n        }\n        else if (self.config.minDate &&\n            self.currentYear === self.config.minDate.getFullYear()) {\n            self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);\n        }\n        if (isNewYear) {\n            self.redraw();\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n    }\n    function isEnabled(date, timeless) {\n        var _a;\n        if (timeless === void 0) { timeless = true; }\n        var dateToCheck = self.parseDate(date, undefined, timeless);\n        if ((self.config.minDate &&\n            dateToCheck &&\n            compareDates(dateToCheck, self.config.minDate, timeless !== undefined ? timeless : !self.minDateHasTime) < 0) ||\n            (self.config.maxDate &&\n                dateToCheck &&\n                compareDates(dateToCheck, self.config.maxDate, timeless !== undefined ? timeless : !self.maxDateHasTime) > 0))\n            return false;\n        if (!self.config.enable && self.config.disable.length === 0)\n            return true;\n        if (dateToCheck === undefined)\n            return false;\n        var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;\n        for (var i = 0, d = void 0; i < array.length; i++) {\n            d = array[i];\n            if (typeof d === \"function\" &&\n                d(dateToCheck))\n                return bool;\n            else if (d instanceof Date &&\n                dateToCheck !== undefined &&\n                d.getTime() === dateToCheck.getTime())\n                return bool;\n            else if (typeof d === \"string\") {\n                var parsed = self.parseDate(d, undefined, true);\n                return parsed && parsed.getTime() === dateToCheck.getTime()\n                    ? bool\n                    : !bool;\n            }\n            else if (typeof d === \"object\" &&\n                dateToCheck !== undefined &&\n                d.from &&\n                d.to &&\n                dateToCheck.getTime() >= d.from.getTime() &&\n                dateToCheck.getTime() <= d.to.getTime())\n                return bool;\n        }\n        return !bool;\n    }\n    function isInView(elem) {\n        if (self.daysContainer !== undefined)\n            return (elem.className.indexOf(\"hidden\") === -1 &&\n                elem.className.indexOf(\"flatpickr-disabled\") === -1 &&\n                self.daysContainer.contains(elem));\n        return false;\n    }\n    function onBlur(e) {\n        var isInput = e.target === self._input;\n        var valueChanged = self._input.value.trimEnd() !== getDateStr();\n        if (isInput &&\n            valueChanged &&\n            !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {\n            self.setDate(self._input.value, true, e.target === self.altInput\n                ? self.config.altFormat\n                : self.config.dateFormat);\n        }\n    }\n    function onKeyDown(e) {\n        var eventTarget = getEventTarget(e);\n        var isInput = self.config.wrap\n            ? element.contains(eventTarget)\n            : eventTarget === self._input;\n        var allowInput = self.config.allowInput;\n        var allowKeydown = self.isOpen && (!allowInput || !isInput);\n        var allowInlineKeydown = self.config.inline && isInput && !allowInput;\n        if (e.keyCode === 13 && isInput) {\n            if (allowInput) {\n                self.setDate(self._input.value, true, eventTarget === self.altInput\n                    ? self.config.altFormat\n                    : self.config.dateFormat);\n                self.close();\n                return eventTarget.blur();\n            }\n            else {\n                self.open();\n            }\n        }\n        else if (isCalendarElem(eventTarget) ||\n            allowKeydown ||\n            allowInlineKeydown) {\n            var isTimeObj = !!self.timeContainer &&\n                self.timeContainer.contains(eventTarget);\n            switch (e.keyCode) {\n                case 13:\n                    if (isTimeObj) {\n                        e.preventDefault();\n                        updateTime();\n                        focusAndClose();\n                    }\n                    else\n                        selectDate(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    focusAndClose();\n                    break;\n                case 8:\n                case 46:\n                    if (isInput && !self.config.allowInput) {\n                        e.preventDefault();\n                        self.clear();\n                    }\n                    break;\n                case 37:\n                case 39:\n                    if (!isTimeObj && !isInput) {\n                        e.preventDefault();\n                        var activeElement = getClosestActiveElement();\n                        if (self.daysContainer !== undefined &&\n                            (allowInput === false ||\n                                (activeElement && isInView(activeElement)))) {\n                            var delta_1 = e.keyCode === 39 ? 1 : -1;\n                            if (!e.ctrlKey)\n                                focusOnDay(undefined, delta_1);\n                            else {\n                                e.stopPropagation();\n                                changeMonth(delta_1);\n                                focusOnDay(getFirstAvailableDay(1), 0);\n                            }\n                        }\n                    }\n                    else if (self.hourElement)\n                        self.hourElement.focus();\n                    break;\n                case 38:\n                case 40:\n                    e.preventDefault();\n                    var delta = e.keyCode === 40 ? 1 : -1;\n                    if ((self.daysContainer &&\n                        eventTarget.$i !== undefined) ||\n                        eventTarget === self.input ||\n                        eventTarget === self.altInput) {\n                        if (e.ctrlKey) {\n                            e.stopPropagation();\n                            changeYear(self.currentYear - delta);\n                            focusOnDay(getFirstAvailableDay(1), 0);\n                        }\n                        else if (!isTimeObj)\n                            focusOnDay(undefined, delta * 7);\n                    }\n                    else if (eventTarget === self.currentYearElement) {\n                        changeYear(self.currentYear - delta);\n                    }\n                    else if (self.config.enableTime) {\n                        if (!isTimeObj && self.hourElement)\n                            self.hourElement.focus();\n                        updateTime(e);\n                        self._debouncedChange();\n                    }\n                    break;\n                case 9:\n                    if (isTimeObj) {\n                        var elems = [\n                            self.hourElement,\n                            self.minuteElement,\n                            self.secondElement,\n                            self.amPM,\n                        ]\n                            .concat(self.pluginElements)\n                            .filter(function (x) { return x; });\n                        var i = elems.indexOf(eventTarget);\n                        if (i !== -1) {\n                            var target = elems[i + (e.shiftKey ? -1 : 1)];\n                            e.preventDefault();\n                            (target || self._input).focus();\n                        }\n                    }\n                    else if (!self.config.noCalendar &&\n                        self.daysContainer &&\n                        self.daysContainer.contains(eventTarget) &&\n                        e.shiftKey) {\n                        e.preventDefault();\n                        self._input.focus();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            switch (e.key) {\n                case self.l10n.amPM[0].charAt(0):\n                case self.l10n.amPM[0].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[0];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n                case self.l10n.amPM[1].charAt(0):\n                case self.l10n.amPM[1].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[1];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n            }\n        }\n        if (isInput || isCalendarElem(eventTarget)) {\n            triggerEvent(\"onKeyDown\", e);\n        }\n    }\n    function onMouseOver(elem, cellClass) {\n        if (cellClass === void 0) { cellClass = \"flatpickr-day\"; }\n        if (self.selectedDates.length !== 1 ||\n            (elem &&\n                (!elem.classList.contains(cellClass) ||\n                    elem.classList.contains(\"flatpickr-disabled\"))))\n            return;\n        var hoverDate = elem\n            ? elem.dateObj.getTime()\n            : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], undefined, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());\n        var containsDisabled = false;\n        var minRange = 0, maxRange = 0;\n        for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {\n            if (!isEnabled(new Date(t), true)) {\n                containsDisabled =\n                    containsDisabled || (t > rangeStartDate && t < rangeEndDate);\n                if (t < initialDate && (!minRange || t > minRange))\n                    minRange = t;\n                else if (t > initialDate && (!maxRange || t < maxRange))\n                    maxRange = t;\n            }\n        }\n        var hoverableCells = Array.from(self.rContainer.querySelectorAll(\"*:nth-child(-n+\" + self.config.showMonths + \") > .\" + cellClass));\n        hoverableCells.forEach(function (dayElem) {\n            var date = dayElem.dateObj;\n            var timestamp = date.getTime();\n            var outOfRange = (minRange > 0 && timestamp < minRange) ||\n                (maxRange > 0 && timestamp > maxRange);\n            if (outOfRange) {\n                dayElem.classList.add(\"notAllowed\");\n                [\"inRange\", \"startRange\", \"endRange\"].forEach(function (c) {\n                    dayElem.classList.remove(c);\n                });\n                return;\n            }\n            else if (containsDisabled && !outOfRange)\n                return;\n            [\"startRange\", \"inRange\", \"endRange\", \"notAllowed\"].forEach(function (c) {\n                dayElem.classList.remove(c);\n            });\n            if (elem !== undefined) {\n                elem.classList.add(hoverDate <= self.selectedDates[0].getTime()\n                    ? \"startRange\"\n                    : \"endRange\");\n                if (initialDate < hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"startRange\");\n                else if (initialDate > hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"endRange\");\n                if (timestamp >= minRange &&\n                    (maxRange === 0 || timestamp <= maxRange) &&\n                    isBetween(timestamp, initialDate, hoverDate))\n                    dayElem.classList.add(\"inRange\");\n            }\n        });\n    }\n    function onResize() {\n        if (self.isOpen && !self.config.static && !self.config.inline)\n            positionCalendar();\n    }\n    function open(e, positionElement) {\n        if (positionElement === void 0) { positionElement = self._positionElement; }\n        if (self.isMobile === true) {\n            if (e) {\n                e.preventDefault();\n                var eventTarget = getEventTarget(e);\n                if (eventTarget) {\n                    eventTarget.blur();\n                }\n            }\n            if (self.mobileInput !== undefined) {\n                self.mobileInput.focus();\n                self.mobileInput.click();\n            }\n            triggerEvent(\"onOpen\");\n            return;\n        }\n        else if (self._input.disabled || self.config.inline) {\n            return;\n        }\n        var wasOpen = self.isOpen;\n        self.isOpen = true;\n        if (!wasOpen) {\n            self.calendarContainer.classList.add(\"open\");\n            self._input.classList.add(\"active\");\n            triggerEvent(\"onOpen\");\n            positionCalendar(positionElement);\n        }\n        if (self.config.enableTime === true && self.config.noCalendar === true) {\n            if (self.config.allowInput === false &&\n                (e === undefined ||\n                    !self.timeContainer.contains(e.relatedTarget))) {\n                setTimeout(function () { return self.hourElement.select(); }, 50);\n            }\n        }\n    }\n    function minMaxDateSetter(type) {\n        return function (date) {\n            var dateObj = (self.config[\"_\" + type + \"Date\"] = self.parseDate(date, self.config.dateFormat));\n            var inverseDateObj = self.config[\"_\" + (type === \"min\" ? \"max\" : \"min\") + \"Date\"];\n            if (dateObj !== undefined) {\n                self[type === \"min\" ? \"minDateHasTime\" : \"maxDateHasTime\"] =\n                    dateObj.getHours() > 0 ||\n                        dateObj.getMinutes() > 0 ||\n                        dateObj.getSeconds() > 0;\n            }\n            if (self.selectedDates) {\n                self.selectedDates = self.selectedDates.filter(function (d) { return isEnabled(d); });\n                if (!self.selectedDates.length && type === \"min\")\n                    setHoursFromDate(dateObj);\n                updateValue();\n            }\n            if (self.daysContainer) {\n                redraw();\n                if (dateObj !== undefined)\n                    self.currentYearElement[type] = dateObj.getFullYear().toString();\n                else\n                    self.currentYearElement.removeAttribute(type);\n                self.currentYearElement.disabled =\n                    !!inverseDateObj &&\n                        dateObj !== undefined &&\n                        inverseDateObj.getFullYear() === dateObj.getFullYear();\n            }\n        };\n    }\n    function parseConfig() {\n        var boolOpts = [\n            \"wrap\",\n            \"weekNumbers\",\n            \"allowInput\",\n            \"allowInvalidPreload\",\n            \"clickOpens\",\n            \"time_24hr\",\n            \"enableTime\",\n            \"noCalendar\",\n            \"altInput\",\n            \"shorthandCurrentMonth\",\n            \"inline\",\n            \"static\",\n            \"enableSeconds\",\n            \"disableMobile\",\n        ];\n        var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);\n        var formats = {};\n        self.config.parseDate = userConfig.parseDate;\n        self.config.formatDate = userConfig.formatDate;\n        Object.defineProperty(self.config, \"enable\", {\n            get: function () { return self.config._enable; },\n            set: function (dates) {\n                self.config._enable = parseDateRules(dates);\n            },\n        });\n        Object.defineProperty(self.config, \"disable\", {\n            get: function () { return self.config._disable; },\n            set: function (dates) {\n                self.config._disable = parseDateRules(dates);\n            },\n        });\n        var timeMode = userConfig.mode === \"time\";\n        if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {\n            var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaultOptions.dateFormat;\n            formats.dateFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"H:i\" + (userConfig.enableSeconds ? \":S\" : \"\")\n                    : defaultDateFormat + \" H:i\" + (userConfig.enableSeconds ? \":S\" : \"\");\n        }\n        if (userConfig.altInput &&\n            (userConfig.enableTime || timeMode) &&\n            !userConfig.altFormat) {\n            var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaultOptions.altFormat;\n            formats.altFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"h:i\" + (userConfig.enableSeconds ? \":S K\" : \" K\")\n                    : defaultAltFormat + (\" h:i\" + (userConfig.enableSeconds ? \":S\" : \"\") + \" K\");\n        }\n        Object.defineProperty(self.config, \"minDate\", {\n            get: function () { return self.config._minDate; },\n            set: minMaxDateSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxDate\", {\n            get: function () { return self.config._maxDate; },\n            set: minMaxDateSetter(\"max\"),\n        });\n        var minMaxTimeSetter = function (type) { return function (val) {\n            self.config[type === \"min\" ? \"_minTime\" : \"_maxTime\"] = self.parseDate(val, \"H:i:S\");\n        }; };\n        Object.defineProperty(self.config, \"minTime\", {\n            get: function () { return self.config._minTime; },\n            set: minMaxTimeSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxTime\", {\n            get: function () { return self.config._maxTime; },\n            set: minMaxTimeSetter(\"max\"),\n        });\n        if (userConfig.mode === \"time\") {\n            self.config.noCalendar = true;\n            self.config.enableTime = true;\n        }\n        Object.assign(self.config, formats, userConfig);\n        for (var i = 0; i < boolOpts.length; i++)\n            self.config[boolOpts[i]] =\n                self.config[boolOpts[i]] === true ||\n                    self.config[boolOpts[i]] === \"true\";\n        HOOKS.filter(function (hook) { return self.config[hook] !== undefined; }).forEach(function (hook) {\n            self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);\n        });\n        self.isMobile =\n            !self.config.disableMobile &&\n                !self.config.inline &&\n                self.config.mode === \"single\" &&\n                !self.config.disable.length &&\n                !self.config.enable &&\n                !self.config.weekNumbers &&\n                /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n        for (var i = 0; i < self.config.plugins.length; i++) {\n            var pluginConf = self.config.plugins[i](self) || {};\n            for (var key in pluginConf) {\n                if (HOOKS.indexOf(key) > -1) {\n                    self.config[key] = arrayify(pluginConf[key])\n                        .map(bindToInstance)\n                        .concat(self.config[key]);\n                }\n                else if (typeof userConfig[key] === \"undefined\")\n                    self.config[key] = pluginConf[key];\n            }\n        }\n        if (!userConfig.altInputClass) {\n            self.config.altInputClass =\n                getInputElem().className + \" \" + self.config.altInputClass;\n        }\n        triggerEvent(\"onParseConfig\");\n    }\n    function getInputElem() {\n        return self.config.wrap\n            ? element.querySelector(\"[data-input]\")\n            : element;\n    }\n    function setupLocale() {\n        if (typeof self.config.locale !== \"object\" &&\n            typeof flatpickr.l10ns[self.config.locale] === \"undefined\")\n            self.config.errorHandler(new Error(\"flatpickr: invalid locale \" + self.config.locale));\n        self.l10n = __assign(__assign({}, flatpickr.l10ns.default), (typeof self.config.locale === \"object\"\n            ? self.config.locale\n            : self.config.locale !== \"default\"\n                ? flatpickr.l10ns[self.config.locale]\n                : undefined));\n        tokenRegex.D = \"(\" + self.l10n.weekdays.shorthand.join(\"|\") + \")\";\n        tokenRegex.l = \"(\" + self.l10n.weekdays.longhand.join(\"|\") + \")\";\n        tokenRegex.M = \"(\" + self.l10n.months.shorthand.join(\"|\") + \")\";\n        tokenRegex.F = \"(\" + self.l10n.months.longhand.join(\"|\") + \")\";\n        tokenRegex.K = \"(\" + self.l10n.amPM[0] + \"|\" + self.l10n.amPM[1] + \"|\" + self.l10n.amPM[0].toLowerCase() + \"|\" + self.l10n.amPM[1].toLowerCase() + \")\";\n        var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));\n        if (userConfig.time_24hr === undefined &&\n            flatpickr.defaultConfig.time_24hr === undefined) {\n            self.config.time_24hr = self.l10n.time_24hr;\n        }\n        self.formatDate = createDateFormatter(self);\n        self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    }\n    function positionCalendar(customPositionElement) {\n        if (typeof self.config.position === \"function\") {\n            return void self.config.position(self, customPositionElement);\n        }\n        if (self.calendarContainer === undefined)\n            return;\n        triggerEvent(\"onPreCalendarPosition\");\n        var positionElement = customPositionElement || self._positionElement;\n        var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function (acc, child) { return acc + child.offsetHeight; }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(\" \"), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === \"above\" ||\n            (configPosVertical !== \"below\" &&\n                distanceFromBottom < calendarHeight &&\n                inputBounds.top > calendarHeight);\n        var top = window.pageYOffset +\n            inputBounds.top +\n            (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);\n        toggleClass(self.calendarContainer, \"arrowTop\", !showOnTop);\n        toggleClass(self.calendarContainer, \"arrowBottom\", showOnTop);\n        if (self.config.inline)\n            return;\n        var left = window.pageXOffset + inputBounds.left;\n        var isCenter = false;\n        var isRight = false;\n        if (configPosHorizontal === \"center\") {\n            left -= (calendarWidth - inputBounds.width) / 2;\n            isCenter = true;\n        }\n        else if (configPosHorizontal === \"right\") {\n            left -= calendarWidth - inputBounds.width;\n            isRight = true;\n        }\n        toggleClass(self.calendarContainer, \"arrowLeft\", !isCenter && !isRight);\n        toggleClass(self.calendarContainer, \"arrowCenter\", isCenter);\n        toggleClass(self.calendarContainer, \"arrowRight\", isRight);\n        var right = window.document.body.offsetWidth -\n            (window.pageXOffset + inputBounds.right);\n        var rightMost = left + calendarWidth > window.document.body.offsetWidth;\n        var centerMost = right + calendarWidth > window.document.body.offsetWidth;\n        toggleClass(self.calendarContainer, \"rightMost\", rightMost);\n        if (self.config.static)\n            return;\n        self.calendarContainer.style.top = top + \"px\";\n        if (!rightMost) {\n            self.calendarContainer.style.left = left + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n        else if (!centerMost) {\n            self.calendarContainer.style.left = \"auto\";\n            self.calendarContainer.style.right = right + \"px\";\n        }\n        else {\n            var doc = getDocumentStyleSheet();\n            if (doc === undefined)\n                return;\n            var bodyWidth = window.document.body.offsetWidth;\n            var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);\n            var centerBefore = \".flatpickr-calendar.centerMost:before\";\n            var centerAfter = \".flatpickr-calendar.centerMost:after\";\n            var centerIndex = doc.cssRules.length;\n            var centerStyle = \"{left:\" + inputBounds.left + \"px;right:auto;}\";\n            toggleClass(self.calendarContainer, \"rightMost\", false);\n            toggleClass(self.calendarContainer, \"centerMost\", true);\n            doc.insertRule(centerBefore + \",\" + centerAfter + centerStyle, centerIndex);\n            self.calendarContainer.style.left = centerLeft + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n    }\n    function getDocumentStyleSheet() {\n        var editableSheet = null;\n        for (var i = 0; i < document.styleSheets.length; i++) {\n            var sheet = document.styleSheets[i];\n            if (!sheet.cssRules)\n                continue;\n            try {\n                sheet.cssRules;\n            }\n            catch (err) {\n                continue;\n            }\n            editableSheet = sheet;\n            break;\n        }\n        return editableSheet != null ? editableSheet : createStyleSheet();\n    }\n    function createStyleSheet() {\n        var style = document.createElement(\"style\");\n        document.head.appendChild(style);\n        return style.sheet;\n    }\n    function redraw() {\n        if (self.config.noCalendar || self.isMobile)\n            return;\n        buildMonthSwitch();\n        updateNavigationCurrentMonth();\n        buildDays();\n    }\n    function focusAndClose() {\n        self._input.focus();\n        if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n            navigator.msMaxTouchPoints !== undefined) {\n            setTimeout(self.close, 0);\n        }\n        else {\n            self.close();\n        }\n    }\n    function selectDate(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var isSelectable = function (day) {\n            return day.classList &&\n                day.classList.contains(\"flatpickr-day\") &&\n                !day.classList.contains(\"flatpickr-disabled\") &&\n                !day.classList.contains(\"notAllowed\");\n        };\n        var t = findParent(getEventTarget(e), isSelectable);\n        if (t === undefined)\n            return;\n        var target = t;\n        var selectedDate = (self.latestSelectedDateObj = new Date(target.dateObj.getTime()));\n        var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth ||\n            selectedDate.getMonth() >\n                self.currentMonth + self.config.showMonths - 1) &&\n            self.config.mode !== \"range\";\n        self.selectedDateElem = target;\n        if (self.config.mode === \"single\")\n            self.selectedDates = [selectedDate];\n        else if (self.config.mode === \"multiple\") {\n            var selectedIndex = isDateSelected(selectedDate);\n            if (selectedIndex)\n                self.selectedDates.splice(parseInt(selectedIndex), 1);\n            else\n                self.selectedDates.push(selectedDate);\n        }\n        else if (self.config.mode === \"range\") {\n            if (self.selectedDates.length === 2) {\n                self.clear(false, false);\n            }\n            self.latestSelectedDateObj = selectedDate;\n            self.selectedDates.push(selectedDate);\n            if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)\n                self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        }\n        setHoursFromInputs();\n        if (shouldChangeMonth) {\n            var isNewYear = self.currentYear !== selectedDate.getFullYear();\n            self.currentYear = selectedDate.getFullYear();\n            self.currentMonth = selectedDate.getMonth();\n            if (isNewYear) {\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n            triggerEvent(\"onMonthChange\");\n        }\n        updateNavigationCurrentMonth();\n        buildDays();\n        updateValue();\n        if (!shouldChangeMonth &&\n            self.config.mode !== \"range\" &&\n            self.config.showMonths === 1)\n            focusOnDayElem(target);\n        else if (self.selectedDateElem !== undefined &&\n            self.hourElement === undefined) {\n            self.selectedDateElem && self.selectedDateElem.focus();\n        }\n        if (self.hourElement !== undefined)\n            self.hourElement !== undefined && self.hourElement.focus();\n        if (self.config.closeOnSelect) {\n            var single = self.config.mode === \"single\" && !self.config.enableTime;\n            var range = self.config.mode === \"range\" &&\n                self.selectedDates.length === 2 &&\n                !self.config.enableTime;\n            if (single || range) {\n                focusAndClose();\n            }\n        }\n        triggerChange();\n    }\n    var CALLBACKS = {\n        locale: [setupLocale, updateWeekdays],\n        showMonths: [buildMonths, setCalendarWidth, buildWeekdays],\n        minDate: [jumpToDate],\n        maxDate: [jumpToDate],\n        positionElement: [updatePositionElement],\n        clickOpens: [\n            function () {\n                if (self.config.clickOpens === true) {\n                    bind(self._input, \"focus\", self.open);\n                    bind(self._input, \"click\", self.open);\n                }\n                else {\n                    self._input.removeEventListener(\"focus\", self.open);\n                    self._input.removeEventListener(\"click\", self.open);\n                }\n            },\n        ],\n    };\n    function set(option, value) {\n        if (option !== null && typeof option === \"object\") {\n            Object.assign(self.config, option);\n            for (var key in option) {\n                if (CALLBACKS[key] !== undefined)\n                    CALLBACKS[key].forEach(function (x) { return x(); });\n            }\n        }\n        else {\n            self.config[option] = value;\n            if (CALLBACKS[option] !== undefined)\n                CALLBACKS[option].forEach(function (x) { return x(); });\n            else if (HOOKS.indexOf(option) > -1)\n                self.config[option] = arrayify(value);\n        }\n        self.redraw();\n        updateValue(true);\n    }\n    function setSelectedDate(inputDate, format) {\n        var dates = [];\n        if (inputDate instanceof Array)\n            dates = inputDate.map(function (d) { return self.parseDate(d, format); });\n        else if (inputDate instanceof Date || typeof inputDate === \"number\")\n            dates = [self.parseDate(inputDate, format)];\n        else if (typeof inputDate === \"string\") {\n            switch (self.config.mode) {\n                case \"single\":\n                case \"time\":\n                    dates = [self.parseDate(inputDate, format)];\n                    break;\n                case \"multiple\":\n                    dates = inputDate\n                        .split(self.config.conjunction)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                case \"range\":\n                    dates = inputDate\n                        .split(self.l10n.rangeSeparator)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                default:\n                    break;\n            }\n        }\n        else\n            self.config.errorHandler(new Error(\"Invalid date supplied: \" + JSON.stringify(inputDate)));\n        self.selectedDates = (self.config.allowInvalidPreload\n            ? dates\n            : dates.filter(function (d) { return d instanceof Date && isEnabled(d, false); }));\n        if (self.config.mode === \"range\")\n            self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n    }\n    function setDate(date, triggerChange, format) {\n        if (triggerChange === void 0) { triggerChange = false; }\n        if (format === void 0) { format = self.config.dateFormat; }\n        if ((date !== 0 && !date) || (date instanceof Array && date.length === 0))\n            return self.clear(triggerChange);\n        setSelectedDate(date, format);\n        self.latestSelectedDateObj =\n            self.selectedDates[self.selectedDates.length - 1];\n        self.redraw();\n        jumpToDate(undefined, triggerChange);\n        setHoursFromDate();\n        if (self.selectedDates.length === 0) {\n            self.clear(false);\n        }\n        updateValue(triggerChange);\n        if (triggerChange)\n            triggerEvent(\"onChange\");\n    }\n    function parseDateRules(arr) {\n        return arr\n            .slice()\n            .map(function (rule) {\n            if (typeof rule === \"string\" ||\n                typeof rule === \"number\" ||\n                rule instanceof Date) {\n                return self.parseDate(rule, undefined, true);\n            }\n            else if (rule &&\n                typeof rule === \"object\" &&\n                rule.from &&\n                rule.to)\n                return {\n                    from: self.parseDate(rule.from, undefined),\n                    to: self.parseDate(rule.to, undefined),\n                };\n            return rule;\n        })\n            .filter(function (x) { return x; });\n    }\n    function setupDates() {\n        self.selectedDates = [];\n        self.now = self.parseDate(self.config.now) || new Date();\n        var preloadedDate = self.config.defaultDate ||\n            ((self.input.nodeName === \"INPUT\" ||\n                self.input.nodeName === \"TEXTAREA\") &&\n                self.input.placeholder &&\n                self.input.value === self.input.placeholder\n                ? null\n                : self.input.value);\n        if (preloadedDate)\n            setSelectedDate(preloadedDate, self.config.dateFormat);\n        self._initialDate =\n            self.selectedDates.length > 0\n                ? self.selectedDates[0]\n                : self.config.minDate &&\n                    self.config.minDate.getTime() > self.now.getTime()\n                    ? self.config.minDate\n                    : self.config.maxDate &&\n                        self.config.maxDate.getTime() < self.now.getTime()\n                        ? self.config.maxDate\n                        : self.now;\n        self.currentYear = self._initialDate.getFullYear();\n        self.currentMonth = self._initialDate.getMonth();\n        if (self.selectedDates.length > 0)\n            self.latestSelectedDateObj = self.selectedDates[0];\n        if (self.config.minTime !== undefined)\n            self.config.minTime = self.parseDate(self.config.minTime, \"H:i\");\n        if (self.config.maxTime !== undefined)\n            self.config.maxTime = self.parseDate(self.config.maxTime, \"H:i\");\n        self.minDateHasTime =\n            !!self.config.minDate &&\n                (self.config.minDate.getHours() > 0 ||\n                    self.config.minDate.getMinutes() > 0 ||\n                    self.config.minDate.getSeconds() > 0);\n        self.maxDateHasTime =\n            !!self.config.maxDate &&\n                (self.config.maxDate.getHours() > 0 ||\n                    self.config.maxDate.getMinutes() > 0 ||\n                    self.config.maxDate.getSeconds() > 0);\n    }\n    function setupInputs() {\n        self.input = getInputElem();\n        if (!self.input) {\n            self.config.errorHandler(new Error(\"Invalid input element specified\"));\n            return;\n        }\n        self.input._type = self.input.type;\n        self.input.type = \"text\";\n        self.input.classList.add(\"flatpickr-input\");\n        self._input = self.input;\n        if (self.config.altInput) {\n            self.altInput = createElement(self.input.nodeName, self.config.altInputClass);\n            self._input = self.altInput;\n            self.altInput.placeholder = self.input.placeholder;\n            self.altInput.disabled = self.input.disabled;\n            self.altInput.required = self.input.required;\n            self.altInput.tabIndex = self.input.tabIndex;\n            self.altInput.type = \"text\";\n            self.input.setAttribute(\"type\", \"hidden\");\n            if (!self.config.static && self.input.parentNode)\n                self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n        }\n        if (!self.config.allowInput)\n            self._input.setAttribute(\"readonly\", \"readonly\");\n        updatePositionElement();\n    }\n    function updatePositionElement() {\n        self._positionElement = self.config.positionElement || self._input;\n    }\n    function setupMobile() {\n        var inputType = self.config.enableTime\n            ? self.config.noCalendar\n                ? \"time\"\n                : \"datetime-local\"\n            : \"date\";\n        self.mobileInput = createElement(\"input\", self.input.className + \" flatpickr-mobile\");\n        self.mobileInput.tabIndex = 1;\n        self.mobileInput.type = inputType;\n        self.mobileInput.disabled = self.input.disabled;\n        self.mobileInput.required = self.input.required;\n        self.mobileInput.placeholder = self.input.placeholder;\n        self.mobileFormatStr =\n            inputType === \"datetime-local\"\n                ? \"Y-m-d\\\\TH:i:S\"\n                : inputType === \"date\"\n                    ? \"Y-m-d\"\n                    : \"H:i:S\";\n        if (self.selectedDates.length > 0) {\n            self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);\n        }\n        if (self.config.minDate)\n            self.mobileInput.min = self.formatDate(self.config.minDate, \"Y-m-d\");\n        if (self.config.maxDate)\n            self.mobileInput.max = self.formatDate(self.config.maxDate, \"Y-m-d\");\n        if (self.input.getAttribute(\"step\"))\n            self.mobileInput.step = String(self.input.getAttribute(\"step\"));\n        self.input.type = \"hidden\";\n        if (self.altInput !== undefined)\n            self.altInput.type = \"hidden\";\n        try {\n            if (self.input.parentNode)\n                self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);\n        }\n        catch (_a) { }\n        bind(self.mobileInput, \"change\", function (e) {\n            self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);\n            triggerEvent(\"onChange\");\n            triggerEvent(\"onClose\");\n        });\n    }\n    function toggle(e) {\n        if (self.isOpen === true)\n            return self.close();\n        self.open(e);\n    }\n    function triggerEvent(event, data) {\n        if (self.config === undefined)\n            return;\n        var hooks = self.config[event];\n        if (hooks !== undefined && hooks.length > 0) {\n            for (var i = 0; hooks[i] && i < hooks.length; i++)\n                hooks[i](self.selectedDates, self.input.value, self, data);\n        }\n        if (event === \"onChange\") {\n            self.input.dispatchEvent(createEvent(\"change\"));\n            self.input.dispatchEvent(createEvent(\"input\"));\n        }\n    }\n    function createEvent(name) {\n        var e = document.createEvent(\"Event\");\n        e.initEvent(name, true, true);\n        return e;\n    }\n    function isDateSelected(date) {\n        for (var i = 0; i < self.selectedDates.length; i++) {\n            var selectedDate = self.selectedDates[i];\n            if (selectedDate instanceof Date &&\n                compareDates(selectedDate, date) === 0)\n                return \"\" + i;\n        }\n        return false;\n    }\n    function isDateInRange(date) {\n        if (self.config.mode !== \"range\" || self.selectedDates.length < 2)\n            return false;\n        return (compareDates(date, self.selectedDates[0]) >= 0 &&\n            compareDates(date, self.selectedDates[1]) <= 0);\n    }\n    function updateNavigationCurrentMonth() {\n        if (self.config.noCalendar || self.isMobile || !self.monthNav)\n            return;\n        self.yearElements.forEach(function (yearElement, i) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            if (self.config.showMonths > 1 ||\n                self.config.monthSelectorType === \"static\") {\n                self.monthElements[i].textContent =\n                    monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + \" \";\n            }\n            else {\n                self.monthsDropdownContainer.value = d.getMonth().toString();\n            }\n            yearElement.value = d.getFullYear().toString();\n        });\n        self._hidePrevMonthArrow =\n            self.config.minDate !== undefined &&\n                (self.currentYear === self.config.minDate.getFullYear()\n                    ? self.currentMonth <= self.config.minDate.getMonth()\n                    : self.currentYear < self.config.minDate.getFullYear());\n        self._hideNextMonthArrow =\n            self.config.maxDate !== undefined &&\n                (self.currentYear === self.config.maxDate.getFullYear()\n                    ? self.currentMonth + 1 > self.config.maxDate.getMonth()\n                    : self.currentYear > self.config.maxDate.getFullYear());\n    }\n    function getDateStr(specificFormat) {\n        var format = specificFormat ||\n            (self.config.altInput ? self.config.altFormat : self.config.dateFormat);\n        return self.selectedDates\n            .map(function (dObj) { return self.formatDate(dObj, format); })\n            .filter(function (d, i, arr) {\n            return self.config.mode !== \"range\" ||\n                self.config.enableTime ||\n                arr.indexOf(d) === i;\n        })\n            .join(self.config.mode !== \"range\"\n            ? self.config.conjunction\n            : self.l10n.rangeSeparator);\n    }\n    function updateValue(triggerChange) {\n        if (triggerChange === void 0) { triggerChange = true; }\n        if (self.mobileInput !== undefined && self.mobileFormatStr) {\n            self.mobileInput.value =\n                self.latestSelectedDateObj !== undefined\n                    ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr)\n                    : \"\";\n        }\n        self.input.value = getDateStr(self.config.dateFormat);\n        if (self.altInput !== undefined) {\n            self.altInput.value = getDateStr(self.config.altFormat);\n        }\n        if (triggerChange !== false)\n            triggerEvent(\"onValueUpdate\");\n    }\n    function onMonthNavClick(e) {\n        var eventTarget = getEventTarget(e);\n        var isPrevMonth = self.prevMonthNav.contains(eventTarget);\n        var isNextMonth = self.nextMonthNav.contains(eventTarget);\n        if (isPrevMonth || isNextMonth) {\n            changeMonth(isPrevMonth ? -1 : 1);\n        }\n        else if (self.yearElements.indexOf(eventTarget) >= 0) {\n            eventTarget.select();\n        }\n        else if (eventTarget.classList.contains(\"arrowUp\")) {\n            self.changeYear(self.currentYear + 1);\n        }\n        else if (eventTarget.classList.contains(\"arrowDown\")) {\n            self.changeYear(self.currentYear - 1);\n        }\n    }\n    function timeWrapper(e) {\n        e.preventDefault();\n        var isKeyDown = e.type === \"keydown\", eventTarget = getEventTarget(e), input = eventTarget;\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            self.amPM.textContent =\n                self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n        }\n        var min = parseFloat(input.getAttribute(\"min\")), max = parseFloat(input.getAttribute(\"max\")), step = parseFloat(input.getAttribute(\"step\")), curValue = parseInt(input.value, 10), delta = e.delta ||\n            (isKeyDown ? (e.which === 38 ? 1 : -1) : 0);\n        var newValue = curValue + step * delta;\n        if (typeof input.value !== \"undefined\" && input.value.length === 2) {\n            var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;\n            if (newValue < min) {\n                newValue =\n                    max +\n                        newValue +\n                        int(!isHourElem) +\n                        (int(isHourElem) && int(!self.amPM));\n                if (isMinuteElem)\n                    incrementNumInput(undefined, -1, self.hourElement);\n            }\n            else if (newValue > max) {\n                newValue =\n                    input === self.hourElement ? newValue - max - int(!self.amPM) : min;\n                if (isMinuteElem)\n                    incrementNumInput(undefined, 1, self.hourElement);\n            }\n            if (self.amPM &&\n                isHourElem &&\n                (step === 1\n                    ? newValue + curValue === 23\n                    : Math.abs(newValue - curValue) > step)) {\n                self.amPM.textContent =\n                    self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n            }\n            input.value = pad(newValue);\n        }\n    }\n    init();\n    return self;\n}\nfunction _flatpickr(nodeList, config) {\n    var nodes = Array.prototype.slice\n        .call(nodeList)\n        .filter(function (x) { return x instanceof HTMLElement; });\n    var instances = [];\n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        try {\n            if (node.getAttribute(\"data-fp-omit\") !== null)\n                continue;\n            if (node._flatpickr !== undefined) {\n                node._flatpickr.destroy();\n                node._flatpickr = undefined;\n            }\n            node._flatpickr = FlatpickrInstance(node, config || {});\n            instances.push(node._flatpickr);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    return instances.length === 1 ? instances[0] : instances;\n}\nif (typeof HTMLElement !== \"undefined\" &&\n    typeof HTMLCollection !== \"undefined\" &&\n    typeof NodeList !== \"undefined\") {\n    HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n    HTMLElement.prototype.flatpickr = function (config) {\n        return _flatpickr([this], config);\n    };\n}\nvar flatpickr = function (selector, config) {\n    if (typeof selector === \"string\") {\n        return _flatpickr(window.document.querySelectorAll(selector), config);\n    }\n    else if (selector instanceof Node) {\n        return _flatpickr([selector], config);\n    }\n    else {\n        return _flatpickr(selector, config);\n    }\n};\nflatpickr.defaultConfig = {};\nflatpickr.l10ns = {\n    en: __assign({}, English),\n    default: __assign({}, English),\n};\nflatpickr.localize = function (l10n) {\n    flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);\n};\nflatpickr.setDefaults = function (config) {\n    flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);\n};\nflatpickr.parseDate = createDateParser({});\nflatpickr.formatDate = createDateFormatter({});\nflatpickr.compareDates = compareDates;\nif (typeof jQuery !== \"undefined\" && typeof jQuery.fn !== \"undefined\") {\n    jQuery.fn.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n}\nDate.prototype.fp_incr = function (days) {\n    return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === \"string\" ? parseInt(days, 10) : days));\n};\nif (typeof window !== \"undefined\") {\n    window.flatpickr = flatpickr;\n}\nexport default flatpickr;\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.hu = {}));\n}(this, (function (exports) { 'use strict';\n\n  var fp = typeof window !== \"undefined\" && window.flatpickr !== undefined\n      ? window.flatpickr\n      : {\n          l10ns: {},\n      };\n  var Hungarian = {\n      firstDayOfWeek: 1,\n      weekdays: {\n          shorthand: [\"V\", \"H\", \"K\", \"Sz\", \"Cs\", \"P\", \"Szo\"],\n          longhand: [\n              \"Vasrnap\",\n              \"Htf\",\n              \"Kedd\",\n              \"Szerda\",\n              \"Cstrtk\",\n              \"Pntek\",\n              \"Szombat\",\n          ],\n      },\n      months: {\n          shorthand: [\n              \"Jan\",\n              \"Feb\",\n              \"Mr\",\n              \"pr\",\n              \"Mj\",\n              \"Jn\",\n              \"Jl\",\n              \"Aug\",\n              \"Szep\",\n              \"Okt\",\n              \"Nov\",\n              \"Dec\",\n          ],\n          longhand: [\n              \"Janur\",\n              \"Februr\",\n              \"Mrcius\",\n              \"prilis\",\n              \"Mjus\",\n              \"Jnius\",\n              \"Jlius\",\n              \"Augusztus\",\n              \"Szeptember\",\n              \"Oktber\",\n              \"November\",\n              \"December\",\n          ],\n      },\n      ordinal: function () {\n          return \".\";\n      },\n      weekAbbreviation: \"Ht\",\n      scrollTitle: \"Grgessen\",\n      toggleTitle: \"Kattintson a vltshoz\",\n      rangeSeparator: \" - \",\n      time_24hr: true,\n  };\n  fp.l10ns.hu = Hungarian;\n  var hu = fp.l10ns;\n\n  exports.Hungarian = Hungarian;\n  exports.default = hu;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","@import '~flatpickr/dist/flatpickr.min.css';\r\n\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.answer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.speech-bubble-triangle {\r\n  display: flex;\r\n  max-width: 84%;\r\n}\r\n\r\n.triangle-topright {\r\n  border-top: 7px solid var(--special-inactive);\r\n  border-right: 7px solid transparent;\r\n}\r\n\r\n.speech-bubble-answer {\r\n  background: var(--background-pastell-bg);\r\n  border: 1px solid  var(--special-inactive);\r\n  border-radius: 10px 0px 10px 10px;\r\n  padding: 0.3125rem;\r\n}\r\n\r\n.speech-bubble-answer.date{\r\n  display: flex;\r\n}\r\n\r\n.speech-bubble-answer.string, .speech-bubble-answer.string > form{\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n\r\n.answer-button {\r\n  margin: 0.3125rem;\r\n  border: 1px solid var(--brand-main-brand);\r\n  background: var(--background-white-bg);\r\n  border-radius: 20px;\r\n  color: var(--brand-main-brand);\r\n  padding: 0.3125rem 0.625rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.answer-button.active,\r\n.answer-input.answered {\r\n  background: var(--brand-main-brand);\r\n  color: var(--text-white-text);\r\n}\r\n\r\n.options-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.answer-input {\r\n  margin: 0.0625rem !important;\r\n  border: 1px solid var(--brand-main-brand);\r\n  border-radius: 2px;\r\n  padding-left: 0.625rem;\r\n  padding-right: 0.625rem;\r\n  color:  var(--brand-main-brand);\r\n  text-align: right;\r\n  background-color: var(--background-white-bg);\r\n}\r\n\r\ntextarea.answer-input{\r\n  margin: 0.0625rem ;\r\n  margin-right: 0.625rem !important;\r\n  border: 1px solid var(--brand-main-brand);\r\n  border-radius: 2px;\r\n  padding-left: 0.625rem;\r\n  padding-right: 0.625rem;\r\n  color:  var(--brand-main-brand);\r\n  text-align: right;\r\n  background-color: var(--background-white-bg);\r\n  min-width: 13.9rem;\r\n  min-height: 1.875rem;\r\n  height: 1.875rem;\r\n  width: 100%;\r\n}\r\n\r\n.answer-input:focus-visible {\r\n  border-color: var(--brand-main-brand);\r\n}\r\n\r\n/* Chrome, Safari, Edge, Opera */\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n\r\n/* Firefox */\r\ninput[type=\"number\"] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\n.fade-in.left {\r\n  transition: 0.5s all ease-in-out;\r\n  transform: translate3d(-50px, 0, 0);\r\n  opacity: 0;\r\n}\r\n\r\n.fade-in.right {\r\n  transition: 0.5s all ease-in-out;\r\n  transform: translate3d(50px, 0, 0);\r\n  opacity: 0;\r\n}\r\n\r\n.fade-in.show {\r\n  opacity: 1;\r\n  transform: translate3d(0, 0, 0);\r\n}\r\n\r\n.answer-input:disabled, .answer-button:disabled{\r\n  opacity: .4;\r\n}\r\n","import { Component, Element, Event, EventEmitter, Prop, State, Watch, h } from '@stencil/core';\r\nimport flatpickr from 'flatpickr';\r\nimport { Hungarian } from 'flatpickr/dist/l10n/hu';\r\nimport { Answer, Fragment } from '../../interfaces/dialog-interfaces';\r\nimport { getIntlMessage } from '../../language/translation';\r\n\r\n@Component({\r\n  tag: 'step-component',\r\n  styleUrl: 'step-component.css',\r\n  shadow: false,\r\n})\r\nexport class StepComponent {\r\n  private messages: Record<string, string> = {};\r\n\r\n  options: string[] = [];\r\n  stringAnswerValue: string;\r\n  numberAnswerValue: string;\r\n  dateAnswerValue: string;\r\n  localNumberAnswerValue: string;\r\n  localStringAnswerValue: string;\r\n  @State() localDateAnswerValue: string;\r\n\r\n  @Element() private element: HTMLElement;\r\n\r\n  @Prop() fragment: Fragment;\r\n  @Prop({ mutable: true }) answerValue: any;\r\n  @Prop() controlDisabled: boolean;\r\n  @Prop() locale: string = 'hu';\r\n  @Prop() lastLocale: string = '';\r\n\r\n  @State() isActive: boolean = false;\r\n  @State() isDateActive: boolean = false;\r\n  @State() showContent = false;\r\n\r\n  @Event() answer: EventEmitter<Answer>;\r\n  @Event() revokeAnswer: EventEmitter<Answer>;\r\n\r\n\r\n  @Watch('locale')\r\n  async loadMessages() {\r\n    if (this.locale !== this.lastLocale) {\r\n      this.lastLocale = this.locale;\r\n      this.messages = await getIntlMessage(this.locale);\r\n    }\r\n  }\r\n\r\n  @Watch('answerValue')\r\n  handleAnswerValueChange(newValue: string) {\r\n    console.log(\"answerValue\")\r\n    this.numberAnswerValue = newValue + ''\r\n    this.localNumberAnswerValue = newValue + '';\r\n    this.dateAnswerValue = newValue;\r\n    this.stringAnswerValue = newValue;\r\n    this.yesButtonClass();\r\n    this.noButtonClass();\r\n    this.isActive = true;\r\n    this.isDateActive = true;\r\n  }\r\n\r\n  @Watch('fragment')\r\n  handleFragmentValueChange(newValue, oldValue) {\r\n    console.log(\"old\", oldValue)\r\n    console.log(\"new\", newValue)\r\n    this.showContent = false;\r\n    if (this.fragment.type === 'QuestionMenu') {\r\n      this.options = [];\r\n      for (let i = 0; i < this.fragment.optionsExpert.length; i++) {\r\n        this.options.push(this.fragment.optionsLayman[i]);\r\n      }\r\n    }\r\n\r\n    console.log(\"handleFragmentValueChange\", this.options)\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n      this.setFocus();\r\n    }, 1000); // 200ms ksleltets*\r\n    console.log(\"fragment\")\r\n  }\r\n\r\n\r\n  async componentWillLoad() {\r\n    this.showContent = false;\r\n    if (this.answerValue) {\r\n      this.numberAnswerValue = this.answerValue;\r\n      this.localNumberAnswerValue = this.numberAnswerValue;\r\n      this.dateAnswerValue = this.answerValue;\r\n      this.stringAnswerValue = this.answerValue;\r\n      this.localStringAnswerValue = this.stringAnswerValue;\r\n      this.yesButtonClass();\r\n      this.noButtonClass();\r\n    }\r\n\r\n    if (this.fragment.type === 'QuestionMenu') {\r\n      for (let i = 0; i < this.fragment.optionsExpert.length; i++) {\r\n        this.options.push(this.fragment.optionsLayman[i]);\r\n      }\r\n    }\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n      this.setFocus();\r\n    }, 1000); // 200ms ksleltets\r\n    console.log(\"componentWillLoad\", this.options)\r\n    await this.loadMessages();\r\n\r\n  }\r\n\r\n  private datePicker: any; // Flatpickr pldny\r\n  componentDidLoad() {\r\n    console.log(\"componentDidLoad\")\r\n    const dateInput = this.element.querySelector('#hiddenDateInput');\r\n    const realDateInput = this.element.querySelector('#dateInput');\r\n    if (dateInput) {\r\n      const localeObject = {\r\n        ...(this.locale === 'hu' ? Hungarian : {}),\r\n      };\r\n\r\n      this.datePicker = flatpickr(dateInput, {\r\n        dateFormat: \"Y-m-d\",\r\n        positionElement: realDateInput,\r\n        clickOpens: false,\r\n        disableMobile: true,\r\n        allowInvalidPreload: true,\r\n        locale: localeObject,\r\n        onChange: (_selectedDates, dateStr) => {\r\n          this.handleDateChange(dateStr);\r\n        },\r\n\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  handleButtonClick() {\r\n    console.log(\"isDateActive\", this.isDateActive);\r\n    this.datePicker.open();\r\n  }\r\n\r\n  setFocus() {\r\n    setTimeout(() => {\r\n      console.log(\"setFocus\")\r\n      const firstInput = this.element.querySelector('input:not([hidden]):not([type=\"submit\"])') as HTMLInputElement;\r\n      console.log(\"input\", firstInput)\r\n      if (!firstInput) {\r\n        console.log(this.element)\r\n      }\r\n\r\n      if (!(this.answerValue !== null && this.answerValue !== undefined)) {\r\n        console.log(\"focus\", firstInput)\r\n        const firstArea = this.element.querySelector('textarea');\r\n        if (firstInput) {\r\n          console.log(\"focus inputon\")\r\n          firstInput.focus();\r\n        } else if (firstArea) {\r\n          console.log(\"focus arean\")\r\n          firstArea.focus();\r\n        }\r\n        else {\r\n          const firstButton = this.element.querySelector('button');\r\n          console.log(\"firstButton\", firstButton)\r\n          if (firstButton) {\r\n            console.log(\"focus gombon\")\r\n            firstButton.focus()\r\n          }\r\n        }\r\n\r\n\r\n      }\r\n\r\n    }, 1000)\r\n  }\r\n\r\n  render() {\r\n    const svgWidth = '1.5em'; // A szlessg belltsa\r\n    const svgColor = \"#2B7371\"; // A szn belltsa\r\n    const svgPathSend = \"M22.3402 10.6428L22.3327 10.6396L2.31328 2.33612C2.1449 2.26565 1.96167 2.23801 1.77999 2.25567C1.59831 2.27334 1.42384 2.33577 1.27219 2.43737C1.11197 2.54236 0.980359 2.68553 0.889207 2.85401C0.798055 3.02248 0.750218 3.21098 0.75 3.40253V8.713C0.750089 8.97486 0.841528 9.2285 1.00856 9.43018C1.17558 9.63186 1.40774 9.76896 1.665 9.81784L12.5836 11.8367C12.6265 11.8449 12.6652 11.8677 12.6931 11.9014C12.7209 11.935 12.7362 11.9773 12.7362 12.021C12.7362 12.0646 12.7209 12.1069 12.6931 12.1406C12.6652 12.1742 12.6265 12.1971 12.5836 12.2052L1.66547 14.2241C1.40828 14.2728 1.17614 14.4098 1.00903 14.6113C0.841932 14.8128 0.750328 15.0662 0.75 15.328V20.6394C0.749876 20.8223 0.795166 21.0024 0.881807 21.1635C0.968448 21.3246 1.09373 21.4616 1.24641 21.5624C1.43006 21.6844 1.6456 21.7496 1.86609 21.7499C2.01938 21.7497 2.1711 21.719 2.31234 21.6594L22.3312 13.4033L22.3402 13.3991C22.6096 13.2833 22.8392 13.091 23.0006 12.8461C23.1619 12.6011 23.2479 12.3143 23.2479 12.021C23.2479 11.7277 23.1619 11.4408 23.0006 11.1959C22.8392 10.9509 22.6096 10.7586 22.3402 10.6428Z\";\r\n\r\n    return (\r\n      <div class=\"step\">\r\n        {this.fragment.type != 'Goal' && (\r\n          <div>\r\n            <step-question\r\n              fragment={this.fragment}\r\n              isActiveQuestion={!(this.answerValue !== null && this.answerValue !== undefined)}\r\n            ></step-question>\r\n            <div class={`answer fade-in right ${this.showContent ? 'show' : ''}`}>\r\n\r\n              {this.fragment.type === 'QuestionMenu' && (\r\n                <div class=\"speech-bubble-triangle\">\r\n                  <span class=\"speech-bubble-answer\">\r\n                    <div class=\"options-container\">\r\n                      {this.options.map((op, index) => (\r\n\r\n                        <button class={{ \"answer-button\": true, \"active\": this.answerValue === index }}\r\n                          disabled={this.controlDisabled}\r\n                          onClick={() => this.menuAnswer(index)}\r\n                        >\r\n                          <div>{op}</div>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </span>\r\n                  <div class=\"triangle-topright\"></div>\r\n                </div>\r\n              )}\r\n              {this.fragment.type === 'QuestionYesNo' && (\r\n                <div class=\"speech-bubble-triangle\">\r\n                  <span class=\"speech-bubble-answer\">\r\n                    <button class={{ \"answer-button\": true, \"active\": this.yesButtonClass() }}\r\n                      disabled={this.controlDisabled}\r\n                      onClick={() => this.yesNoAnswer('true')}\r\n                    >\r\n                      {this.messages['question-yes']}\r\n                    </button>\r\n                    <button class={{ \"answer-button\": true, \"active\": this.noButtonClass() }}\r\n                      disabled={this.controlDisabled}\r\n                      onClick={() => this.yesNoAnswer('false')}\r\n                    >\r\n                      {this.messages['question-no']}\r\n                    </button>\r\n\r\n                  </span>\r\n                  <div class=\"triangle-topright\"></div>\r\n                </div>\r\n              )}\r\n              {this.fragment.type === 'QuestionInteger' && (\r\n                <div class=\"speech-bubble-triangle\">\r\n                  <span class=\"speech-bubble-answer\">\r\n                    <form onSubmit={(event) => {\r\n                      event.preventDefault();\r\n                      const form = event.target as HTMLFormElement;\r\n                      this.numberAnswerValue = form.getElementsByTagName('input')[0].value\r\n                      this.numberAnswer();\r\n                    }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        required\r\n                        inputMode='numeric'\r\n                        min=\"0\" step=\"1\"\r\n                        class={{ \"answer-input\": true, \"answered\": this.isActive }}\r\n                        value={this.localNumberAnswerValue}\r\n                        onInput={(event) => {\r\n                          const dateInput = (event.target as HTMLInputElement)\r\n\r\n                          dateInput.setCustomValidity(\"\"); this.onNumberInput(event)\r\n                        }}\r\n                        disabled={this.controlDisabled}\r\n                        onKeyDown={() => this.setNumberActive()}\r\n                        onInvalid={(event) => {\r\n                          const dateInput = (event.target as HTMLInputElement)\r\n                          console.log(\"message\", this.messages['validation-message'])\r\n                          dateInput.setCustomValidity(this.messages['validation-message']);\r\n\r\n                        }}\r\n\r\n                        style={{ width: '8em' }}\r\n                      />\r\n                      <input type=\"submit\" hidden />\r\n                    </form>\r\n                  </span>\r\n                  <div class=\"triangle-topright\"></div>\r\n                </div>\r\n              )}\r\n              {this.fragment.type === 'QuestionDecimal' && (\r\n                <div class=\"speech-bubble-triangle\">\r\n                  <span class=\"speech-bubble-answer\">\r\n                    <form onSubmit={(event) => {\r\n                      event.preventDefault();\r\n                      const form = event.target as HTMLFormElement;\r\n                      this.numberAnswerValue = form.getElementsByTagName('input')[0].value\r\n                      this.numberAnswer();\r\n                    }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        required\r\n                        step='any'\r\n                        inputMode='numeric'\r\n                        class={{ \"answer-input\": true, \"answered\": this.isActive }}\r\n                        value={this.localNumberAnswerValue}\r\n                        onInput={(event) => {\r\n                          const dateInput = (event.target as HTMLInputElement)\r\n\r\n                          dateInput.setCustomValidity(\"\"); this.onNumberInput(event)\r\n                        }}\r\n                        disabled={this.controlDisabled}\r\n                        onKeyDown={() => this.setNumberActive()}\r\n                        onInvalid={(event) => {\r\n                          const dateInput = (event.target as HTMLInputElement)\r\n                          console.log(\"message\", this.messages['validation-message'])\r\n                          dateInput.setCustomValidity(this.messages['validation-message']);\r\n\r\n                        }}\r\n\r\n                        style={{ width: '8em' }}\r\n                      />\r\n                      <input type=\"submit\" hidden />\r\n                    </form>\r\n                  </span>\r\n                  <div class=\"triangle-topright\"></div>\r\n                </div>\r\n              )}\r\n              {this.fragment.type === 'QuestionString' && (\r\n                <div class=\"speech-bubble-triangle\" style={{ flexGrow: '1' }}>\r\n                  <span class=\"speech-bubble-answer string\">\r\n\r\n                    <form id=\"stringform\" onSubmit={(event) => {\r\n                      event.preventDefault();\r\n                      this.stringAnswer();\r\n                    }}>\r\n                      <textarea required\r\n                        class={{ \"answer-input\": true, \"answered\": this.isActive }}\r\n                        value={this.localStringAnswerValue}\r\n                        onInput={(event) => {\r\n                          const dateInput = (event.target as HTMLTextAreaElement)\r\n\r\n                          dateInput.setCustomValidity(\"\"); this.onStringInput(event)\r\n                        }}\r\n                        disabled={this.controlDisabled}\r\n                        onKeyDown={() => this.setStringActive()}\r\n                        onInvalid={(event) => {\r\n                          const dateInput = (event.target as HTMLTextAreaElement)\r\n                          console.log(\"message\", this.messages['validation-message'])\r\n                          dateInput.setCustomValidity(this.messages['validation-message']);\r\n\r\n                        }}\r\n\r\n                      />\r\n                      <input type=\"submit\" hidden />\r\n                    </form>\r\n                    <button onClick={() => {\r\n                      const form = (this.element.querySelector('#stringform') as HTMLFormElement)\r\n                      console.log(\"form\", form)\r\n                      const hiddenSubmit = form.getElementsByTagName('input')[0] as HTMLInputElement;\r\n                      console.log(\"hiddenSubmit\")\r\n                      hiddenSubmit.click();\r\n\r\n                    }} style={{ alignSelf: 'flex-start', marginTop: '4px' }}>\r\n                      <svg width={svgWidth} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                        <path d={svgPathSend} fill={svgColor} />\r\n                      </svg>\r\n\r\n                    </button>\r\n                  </span>\r\n                  <div class=\"triangle-topright\"></div>\r\n                </div>\r\n              )}\r\n              {this.fragment.type === 'QuestionDate' && (\r\n                <div class=\"speech-bubble-triangle\">\r\n                  <span class=\"speech-bubble-answer date\">\r\n\r\n                    <form id=\"dateform\" onSubmit={(event) => {\r\n                      event.preventDefault();\r\n                      console.log(\"submit\")\r\n                      const form = event.target as HTMLFormElement;\r\n                      const dateInput = form.getElementsByTagName('input')[0]\r\n\r\n                      if (isNaN(Date.parse(this.localDateAnswerValue))) {\r\n                        this.datePicker.setDate(new Date().toISOString().slice(0, 10))\r\n                        console.log(\"parse nem\")\r\n                        dateInput.setCustomValidity(this.messages['validation-message']);\r\n                        return;\r\n                      } else {\r\n                        this.datePicker.setDate(this.localDateAnswerValue)\r\n                      }\r\n\r\n                      this.dateAnswerValue = this.localDateAnswerValue\r\n                      this.setDateActive();\r\n                      this.dateAnswer();\r\n                    }} style={{ marginRight: '0.625em' }}>\r\n\r\n                      <input type=\"text\" id=\"dateInput\"\r\n                        pattern=\"\\d{4}-\\d{2}-\\d{2}\" required placeholder=\"YYYY-MM-DD\"\r\n                        value={this.localDateAnswerValue}\r\n                        class={{ \"answer-input\": true, \"answered\": this.isDateActive }}\r\n                        disabled={this.controlDisabled}\r\n                        onInput={(event) => { (event.target as HTMLInputElement).setCustomValidity(''); this.onDateInput(event) }}\r\n                        onKeyDown={() => this.setDateActive()}\r\n                        onKeyUp={(event) => {\r\n                          const dateInput = event.target as HTMLInputElement\r\n\r\n                          if (isNaN(Date.parse(this.localDateAnswerValue))) {\r\n                            this.datePicker.setDate(new Date().toISOString().slice(0, 10))\r\n                            console.log(\"parse nem\")\r\n                            dateInput.setCustomValidity(this.messages['validation-message']);\r\n                          } else {\r\n                            dateInput.setCustomValidity(\"\");\r\n                          }\r\n\r\n                        }}\r\n                        onInvalid={(event) => {\r\n                          console.log(event)\r\n\r\n                          const dateInput = (event.target as HTMLInputElement)\r\n                          dateInput.setCustomValidity(this.messages['validation-message']);\r\n                        }}\r\n                        style={{ width: '8em' }}\r\n                      />\r\n                      <input type=\"hidden\" id=\"hiddenDateInput\" readonly style={{ display: 'none' }} />\r\n                      <input type=\"submit\" hidden />\r\n\r\n                    </form>\r\n\r\n                    <button id=\"date\" onClick={() => this.handleButtonClick()}>\r\n\r\n                      <svg width={svgWidth} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                        <path d=\"M19.5 3.75H4.5C3.25736 3.75 2.25 4.75736 2.25 6V19.5C2.25 20.7426 3.25736 21.75 4.5 21.75H19.5C20.7426 21.75 21.75 20.7426 21.75 19.5V6C21.75 4.75736 20.7426 3.75 19.5 3.75Z\" stroke=\"#2B7371\" stroke-width=\"2\" stroke-linejoin=\"round\" />\r\n                        <path d=\"M6 2.25V3.75M18 2.25V3.75M21.75 7.5H2.25M14.25 12.1875L16.2853 10.6875H16.5V18.5625M7.21781 11.3873C7.42078 11.0442 7.98891 10.5 8.99203 10.5C10.178 10.5 11.2369 11.1459 11.2369 12.3703C11.2396 12.6073 11.1948 12.8425 11.1052 13.062C11.0156 13.2814 10.883 13.4807 10.7152 13.6481C10.2028 14.1727 9.42094 14.3733 8.99391 14.3733C9.47672 14.3733 10.3622 14.6002 10.9416 15.1927C11.3128 15.5709 11.4844 16.1044 11.4844 16.6959C11.4844 18.0028 10.3814 18.75 9.04125 18.75C7.90828 18.75 7.21313 17.9264 6.98438 17.5388\" stroke=\"#2B7371\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                        <rect x=\"0.5\" y=\"0.5\" width=\"23\" height=\"23\" stroke={svgColor} />\r\n                      </svg>\r\n                    </button>\r\n\r\n\r\n\r\n\r\n                  </span>\r\n                  <div class=\"triangle-topright\"></div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n\r\n  handleDateChange(dateString: string) {\r\n    console.log(\"handleDateChange\", dateString)\r\n    this.setDateActive()\r\n    if (isNaN(Date.parse(dateString))) {\r\n      return;\r\n    }\r\n\r\n    const date = new Date(dateString);\r\n\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth() + 1;\r\n    const day = date.getDate();\r\n    this.localDateAnswerValue = `${year}-${this.padZero(month)}-${this.padZero(day)}`;\r\n    this.dateAnswerValue = this.localDateAnswerValue;\r\n    this.dateAnswer()\r\n\r\n  }\r\n\r\n  padZero(value: number) {\r\n    return value.toString().padStart(2, '0');\r\n  }\r\n\r\n  onDateInput(event: InputEvent): void {\r\n    this.localDateAnswerValue = (event.target as HTMLInputElement).value\r\n    this.setDateActive();\r\n  }\r\n\r\n\r\n  setDateActive(): void {\r\n    this.isDateActive = this.answerValue === this.dateAnswerValue && this.localDateAnswerValue === this.dateAnswerValue\r\n    console.log(\"isDateActive,\", this.isDateActive)\r\n  }\r\n\r\n  onNumberInput(event: InputEvent): void {\r\n    this.localNumberAnswerValue = (event.target as HTMLInputElement).value\r\n    this.setNumberActive();\r\n  }\r\n  checkNumberInput(event: KeyboardEvent): void {\r\n    if (event.key === 'Enter' || event.key === 'NumpadEnter') {\r\n      this.numberAnswerValue = (event.target as HTMLInputElement).value\r\n      this.numberAnswer();\r\n    }\r\n    this.setNumberActive();\r\n  }\r\n\r\n  onStringInput(event: InputEvent): void {\r\n    console.log(\"string input\", event)\r\n    let textarea = (event.target as HTMLTextAreaElement)\r\n    console.log(\"style\", textarea.scrollHeight)\r\n    textarea.style.height = ''\r\n    textarea.style.height = textarea.scrollHeight + \"px\";\r\n    this.localStringAnswerValue = (event.target as HTMLTextAreaElement).value\r\n    this.setStringActive();\r\n  }\r\n\r\n  setNumberActive(): void {\r\n    this.isActive = this.answerValue === (this.numberAnswerValue + '').replace(',', '.') && (this.localNumberAnswerValue + '').replace(',', '.') === this.numberAnswerValue\r\n    console.log(\"isActive,\", this.isActive)\r\n  }\r\n\r\n  setStringActive() {\r\n    this.isActive = this.answerValue === this.stringAnswerValue && this.localStringAnswerValue === this.stringAnswerValue\r\n    console.log(\"isActive,\", this.isActive)\r\n  }\r\n\r\n\r\n  menuAnswer(index: number): void {\r\n    if (this.answerValue === undefined) {\r\n      this.answerValue = index;\r\n      this.fragment.answer = this.answerValue;\r\n      this.answer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n    } else {\r\n      this.answerValue = index;\r\n      this.fragment.answer = this.answerValue;\r\n      this.revokeAnswer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n    }\r\n  }\r\n\r\n  yesNoAnswer(value: string) {\r\n    if (this.answerValue === undefined) {\r\n      this.answerValue = value;\r\n      this.fragment.answer = this.answerValue;\r\n      this.answer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n    } else {\r\n      this.answerValue = value;\r\n      this.fragment.answer = this.answerValue;\r\n      this.revokeAnswer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n    }\r\n    this.yesButtonClass();\r\n    this.noButtonClass();\r\n  }\r\n\r\n  numberAnswer() {\r\n    if (!this.answerValue) {\r\n      if (this.numberAnswerValue) {\r\n        this.answerValue = this.numberAnswerValue.replace(',', '.')\r\n        this.fragment.answer = this.answerValue;\r\n        this.answer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n      }\r\n    } else {\r\n      if (this.numberAnswerValue) {\r\n        this.answerValue = this.numberAnswerValue.replace(',', '.')\r\n        this.fragment.answer = this.answerValue;\r\n        this.revokeAnswer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  stringAnswer() {\r\n    this.stringAnswerValue = this.localStringAnswerValue;\r\n    if (!this.answerValue) {\r\n      if (this.stringAnswerValue) {\r\n        this.answerValue = this.stringAnswerValue;\r\n        this.fragment.answer = this.answerValue;\r\n        this.answer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n      }\r\n    } else {\r\n      if (this.stringAnswerValue) {\r\n        this.answerValue = this.stringAnswerValue;\r\n        this.fragment.answer = this.answerValue;\r\n        this.revokeAnswer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n      }\r\n    }\r\n  }\r\n\r\n  dateAnswer() {\r\n    if (!this.answerValue) {\r\n      if (this.dateAnswerValue) {\r\n        this.answerValue = this.dateAnswerValue;\r\n        this.fragment.answer = this.answerValue;\r\n        this.answer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n      }\r\n    } else {\r\n      if (this.dateAnswerValue) {\r\n        this.answerValue = this.dateAnswerValue;\r\n        this.fragment.answer = this.answerValue;\r\n        this.revokeAnswer.emit({ answer: this.answerValue, iri: this.fragment.iri });\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  yesButtonClass(): boolean {\r\n    let ans: string = this.answerValue + '';\r\n    if (ans === 'undefined' || ans === 'null') {\r\n      return false\r\n    }\r\n\r\n    return ans === 'true'\r\n  }\r\n\r\n  noButtonClass(): boolean {\r\n    let ans: string = this.answerValue + '';\r\n    if (ans === 'undefined' || ans === 'null') {\r\n      return false;\r\n    }\r\n\r\n    return ans === 'false';\r\n  }\r\n\r\n  okButtonClass() {\r\n    let ans: string = this.answerValue + '';\r\n    if (ans === 'undefined' || ans === 'null') {\r\n      return 'unselected-btn';\r\n    }\r\n\r\n    return 'selected-btn';\r\n  }\r\n\r\n\r\n}\r\n",":host {\r\n\tdisplay: block;\r\n}\r\n\r\n.question {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmargin-bottom: 1.25rem;\r\n\tmargin-top: 1.25rem;\r\n}\r\n\r\n.speech-bubble-triangle {\r\n\tdisplay: flex;\r\n\tmax-width: 84%;\r\n}\r\n\r\n.triangle-topleft {\r\n\tborder-top: 7px solid var(--special-inactive);\r\n\tborder-left: 7px solid transparent;\r\n}\r\n\r\n.speech-bubble-question {\r\n\tbackground: var(--background-white-bg);\r\n\tborder: 1px solid var(--special-inactive);\r\n\tborder-radius: 0px 10px 10px 10px;\r\n\tpadding: 0.625rem;\r\n}\r\n\r\n.speech-bubble-question.active {\r\n\tbackground: var(--background-warning-bg);\r\n}\r\n\r\n.infoicon {\r\n\tmargin-left: 0.625rem;\r\n\tcolor: var(--brand-main-brand);\r\n}\r\n\r\n.clickable {\r\n\tcursor: pointer;\r\n}\r\n\r\nion-popover.full-size {\r\n\t--width: calc(100vw - var(--page-margin) * 2);\r\n\t--box-shadow: 0 5px 10px 0 rgba(0, 0, 0, 0.6);\r\n\t--border-radius: 20px;\r\n\t--overflow: hidden;\r\n\r\n\t--width: calc(100%);\r\n\t--margin-left: auto;\r\n\t--margin-right: auto;\r\n}\r\nion-popover.full-size::part(content) {\r\n\tmargin: var(--page-margin);\r\n\tleft: 0;\r\n\tborder-radius: 10px;\r\n}\r\nion-popover.full-size::part(backdrop) {\r\n\tbackground-color: var(--special-transparent);\r\n}\r\n\r\nion-popover.full-size.error::part(backdrop) {\r\n\tbackground-color: var(--ion-backdrop-color, #000);\r\n}\r\n\r\nion-popover.full-size::part(arrow) {\r\n\tdisplay: none;\r\n}\r\nion-popover h1 {\r\n\tmargin: 0 0 10px 0;\r\n}\r\nion-popover ion-content {\r\n\t--background: #ecebeb;\r\n}\r\nion-popover.warning ion-content {\r\n\t--background: var(--special-warning);\r\n}\r\n","import { popoverController } from '@ionic/core';\r\nimport { Component, Prop, State, Watch, h } from '@stencil/core';\r\nimport { Fragment } from '../../interfaces/dialog-interfaces';\r\n\r\n@Component({\r\n  tag: 'step-question',\r\n  styleUrl: 'step-question.css',\r\n  shadow: false,\r\n})\r\nexport class StepQuestion {\r\n  @Prop() fragment: Fragment;\r\n  @Prop() isActiveQuestion: boolean;\r\n\r\n  @State() showContent = false;\r\n\r\n  @Watch('fragment')\r\n  handleFragmentValueChange() {\r\n    this.showContent = false;\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n    }, 1000); // 200ms ksleltets\r\n    console.log(\"q-fragment\")\r\n  }\r\n\r\n  hasTooltip(): boolean {\r\n    return !!this.fragment.descriptionLayman;\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    this.showContent = false;\r\n    setTimeout(() => {\r\n      this.showContent = true;\r\n    }, 200); // 200ms ksleltets\r\n    console.log(\"componentWillLoad-q\")\r\n\r\n  }\r\n\r\n\r\n  \r\n\r\n  async presentPopover(ev: Event) {\r\n    if (this.fragment.descriptionLayman.trim() !== '') {\r\n      const buttonId = `button-${this.fragment.iri}`; // Az egyedi gomb ID-je\r\n      const button = document.getElementById(buttonId); // A gomb elem lekrse\r\n      console.log(button)\r\n\r\n      if (!button) {\r\n        return; // Kilps, ha nem tallhat a gomb elem\r\n      }\r\n\r\n      const popover = await popoverController.create({\r\n        component: 'ion-popover',\r\n        event: ev,\r\n        alignment: \"center\",\r\n        translucent: true,\r\n        showBackdrop: false,\r\n        cssClass: 'full-size',\r\n        animated: true,\r\n        componentProps: {}\r\n      });\r\n\r\n      const popoverContent = document.createElement('ion-content');\r\n      popoverContent.classList.add(\"ion-padding\");\r\n      popoverContent.innerHTML = this.fragment.descriptionLayman;\r\n\r\n      popover.appendChild(popoverContent);\r\n\r\n      //const rect = button.getBoundingClientRect();\r\n\r\n      //popover.style.top = rect.bottom + 'px';\r\n      //popover.style.left = rect.left + 'px';\r\n\r\n      await popover.present();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const svgWidth = '1.5em'; // A szlessg belltsa\r\n    const svgColor = \"#2B7371\"; // A szn belltsa\r\n    const svgPath = \"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"\r\n    const svgViewBox = \"0 0 512 512\"\r\n\r\n    if (!this.hasTooltip()) {\r\n      return (\r\n        <div class={`question fade-in left ${this.showContent ? 'show' : ''}`}>\r\n          <div class=\"speech-bubble-triangle\">\r\n            <div class=\"triangle-topleft\"></div>\r\n            <span class={{ \"speech-bubble-question\": true, \"active\": this.isActiveQuestion }} innerHTML={this.fragment.labelLayman} ></span>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div class={`question fade-in left ${this.showContent ? 'show' : ''}`}>\r\n        <div class=\"speech-bubble-triangle\">\r\n          <div class=\"triangle-topleft\"></div>\r\n          <span class={{ \"speech-bubble-question\": true, \"active\": this.isActiveQuestion }} innerHTML={this.fragment.labelLayman} ></span>\r\n        </div>\r\n        <svg id={`button-${this.fragment.iri}`} class=\"infoicon clickable\" width={svgWidth} viewBox={svgViewBox} onClick={(ev) => this.presentPopover(ev)} >\r\n          <path d={svgPath} fill={svgColor} />\r\n        </svg>\r\n\r\n      </div>\r\n    );\r\n\r\n\r\n  }\r\n\r\n}\r\n"],"mappings":"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"}